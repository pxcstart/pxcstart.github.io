<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>RLHF(ä¸‰)ï¼šåŸºäºTRLçš„GrpoTrainerè¯¦è§£</title>
    <link href="/2025/04/19/RLHF(%E4%B8%89)/"/>
    <url>/2025/04/19/RLHF(%E4%B8%89)/</url>
    
    <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼šç›®å‰ä¸»æµçš„LLM post-trainingæ¡†æ¶ä¸»è¦æœ‰<a href="https://github.com/huggingface/trl">trl</a>, <a href="https://github.com/OpenRLHF/OpenRLHF">OpenRLHF</a>, <a href="https://github.com/volcengine/verl">verl</a>ã€‚åä¸¤è€…é›†æˆåº¦è¾ƒé«˜ï¼Œé€‚åˆå¯¹LLMé›¶ä»£ç è®­ç»ƒï¼Œè€Œtrlçµæ´»æ€§è¾ƒå¼ºï¼Œè¿™é‡Œä¸»è¦å¯¹GRPO Trainerçš„è®­ç»ƒæµç¨‹è¿›è¡Œæ¢³ç†</p><span id="more"></span><h3 id="GRPOTrainerç±»"><a href="#GRPOTrainerç±»" class="headerlink" title="GRPOTrainerç±»"></a>GRPOTrainerç±»</h3><p>å®ƒç»§æ‰¿äº†transformers.Trainerï¼Œå¹¶é‡å†™æˆ–æ‹“å±•äº†è‹¥å¹²æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š<br><strong><strong>init</strong></strong><br>ä½œç”¨ï¼šåˆå§‹åŒ–æ¨¡å‹ã€å‚è€ƒæ¨¡å‹ï¼ˆref_modelï¼‰ã€å¥–åŠ±æ¨¡å‹ï¼ˆreward_funcsï¼‰ç­‰ï¼Œå¹¶ä½œä¸€äº›è¶…å‚æ•°è®¾ç½®ï¼ˆå¦‚ num_generations, beta ç­‰ï¼‰ã€‚</p><ul><li>model: åŠ è½½ç­–ç•¥æ¨¡å‹, å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆæ¨¡å‹IDæˆ–è·¯å¾„ï¼‰æˆ–é¢„è®­ç»ƒæ¨¡å‹å¯¹è±¡ã€‚ä»…æ”¯æŒå› æœè¯­è¨€æ¨¡å‹</li><li>reward_funcs: åŠ è½½å¥–åŠ±å‡½æ•°ï¼Œå¯ä»¥æ˜¯é¢„è®­ç»ƒæ¨¡å‹(ä»…æ”¯æŒ<code>SequenceClassification</code>æ¨¡å‹);ç”¨æˆ·è‡ªå®šä¹‰Pythonå‡½æ•°ï¼›æˆ–è€…æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ„å‘³ç€å¤šç§å¥–åŠ±å‡½æ•°ä¸€èµ·ç”¨</li><li>args: GRPOConfigå¯¹è±¡ï¼ŒåŒ…å«è®­ç»ƒçš„æ‰€æœ‰å‚æ•°</li><li>train_dataset: è®­ç»ƒæ•°æ®é›†ï¼Œå¿…é¡»åŒ…å«åä¸ºâ€™promptâ€™çš„åˆ—ï¼Œå¯ä»¥æ˜¯Datasetæˆ–IterableDataset</li><li>eval_dataset: è¯„ä¼°æ•°æ®é›†</li><li>processing_class: æ•°æ®å¤„ç†å™¨ç±»ï¼Œç”¨äºå¯¹è®­ç»ƒå’Œè¯„ä¼°æ•°æ®è¿›è¡Œé¢„å¤„ç† typing.Optional[transformers.tokenization_utils_base.PreTrainedTokenizerBase] &#x3D; None</li><li>reward_processing_class: å¥–åŠ±å‡½æ•°å¯¹åº”çš„åˆ†è¯å™¨ï¼Œæ”¯æŒå•ä¸ªåˆ†è¯å™¨æˆ–å¤šä¸ªåˆ†è¯å™¨çš„åˆ—è¡¨</li><li>callback: è‡ªå®šä¹‰è®­ç»ƒå›è°ƒåˆ—è¡¨ï¼Œå¯æ‰©å±•æˆ–è¦†ç›–é»˜è®¤çš„è®­ç»ƒè¿‡ç¨‹ typing.Optional[list[transformers.trainer_callback.TrainerCallback]] &#x3D; None</li><li>optimizer</li><li>peft_config</li></ul><p>è¡¥å……è¯´æ˜ï¼š</p><ol><li>processing_class å¡«å……ä¾§å¿…é¡»è®¾ç½®ä¸º â€œleftâ€ã€‚å¦‚æœä¸º Noneï¼Œåˆ™ä½¿ç”¨ from_pretrained ä»æ¨¡å‹åç§°åŠ è½½å¤„ç†ç±»ã€‚</li><li>reward_processing_class: å¯é€‰ï¼Œé»˜è®¤ä¸ºNoneã€‚åœ¨è‡ªå®šä¹‰æ—¶ï¼Œå¿…é¡»ä¸ reward_funcs ä¸­å¥–åŠ±å‡½æ•°çš„é¡ºåºå’Œé•¿åº¦åŒ¹é…ã€‚</li></ol><p><strong>_prepare_inputs</strong><br>ä½œç”¨ï¼šåœ¨è®­ç»ƒå¾ªç¯ä¸­ï¼Œæ¯ä¸€ä¸ª batch å…ˆå¯¹ prompt è¿›è¡Œé‡‡æ ·ç”Ÿæˆå¤šæ¡å›ç­”ï¼Œè°ƒç”¨å¥–åŠ±æ¨¡å‹æ‰“åˆ†ï¼Œè®¡ç®—ç»„å†…ç›¸å¯¹ä¼˜åŠ¿ã€‚<br>ç®€è¦æµç¨‹ï¼š</p><ol><li>å¯¹batchä¸­æ¯ä¸ªpromptè°ƒç”¨æ¨¡å‹ä¸€æ¬¡æ€§ç”Ÿæˆ <code>num_generations</code>æ¡å›ç­”ã€‚è‹¥ç”Ÿæˆä¸­æå‰å‡ºç°EOSï¼Œå¯¹EOSä¹‹åçš„tokenä½¿ç”¨completion_maskè¿›è¡Œæ©ç </li><li>ä½¿ç”¨ref_modelå¯¹å®Œæ•´åºåˆ—(prompt+completion) è®¡ç®—tokençº§å¯¹æ•°æ¦‚ç‡ï¼Œç”¨äºåé¢è¿›è¡ŒKL</li><li>è°ƒç”¨reward modelå¯¹æ¯æ¡å›ç­”æ‰“åˆ†ï¼Œå½¢æˆ[B*G]çš„reward</li><li>è®¡ç®—ç›¸å¯¹ä¼˜åŠ¿ï¼š[B*G]-reshape-&gt;[B,G], å¯¹åŒä¸€ä¸ª prompt çš„ G æ¡å›ç­”åšâ€œå‡å€¼ã€æ ‡å‡†å·®â€ï¼Œå† broadcast å›å»ï¼Œä»¥å¾—åˆ°æ¯æ¡å›ç­”çš„ç›¸å¯¹ advantage<br>å…¨éƒ¨ä»£ç ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_prepare_inputs</span>(<span class="hljs-params">self, inputs: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Union</span>[torch.Tensor, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Union</span>[torch.Tensor, <span class="hljs-type">Any</span>]]:<br>    device = <span class="hljs-variable language_">self</span>.accelerator.device<br>    prompts = [x[<span class="hljs-string">&quot;prompt&quot;</span>] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> inputs]<br>    prompts_text = [maybe_apply_chat_template(example, <span class="hljs-variable language_">self</span>.processing_class)[<span class="hljs-string">&quot;prompt&quot;</span>] <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> inputs]<br>    prompt_inputs = <span class="hljs-variable language_">self</span>.processing_class(<br>        prompts_text, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>, padding=<span class="hljs-literal">True</span>, padding_side=<span class="hljs-string">&quot;left&quot;</span>, add_special_tokens=<span class="hljs-literal">False</span><br>    )<br>    prompt_inputs = <span class="hljs-built_in">super</span>()._prepare_inputs(prompt_inputs)<br>    prompt_ids, prompt_mask = prompt_inputs[<span class="hljs-string">&quot;input_ids&quot;</span>], prompt_inputs[<span class="hljs-string">&quot;attention_mask&quot;</span>]<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.max_prompt_length <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        prompt_ids = prompt_ids[:, -<span class="hljs-variable language_">self</span>.max_prompt_length :]<br>        prompt_mask = prompt_mask[:, -<span class="hljs-variable language_">self</span>.max_prompt_length :]<br><br>    <span class="hljs-comment"># Generate completions using either vLLM or regular generation</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.args.use_vllm:<br>        <span class="hljs-comment"># First, have main process load weights if needed</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.state.global_step != <span class="hljs-variable language_">self</span>._last_loaded_step:<br>            <span class="hljs-keyword">with</span> unwrap_model_for_generation(<br>                <span class="hljs-variable language_">self</span>.model, <span class="hljs-variable language_">self</span>.accelerator, gather_deepspeed3_params=<span class="hljs-variable language_">self</span>.args.ds3_gather_for_generation<br>            ) <span class="hljs-keyword">as</span> unwrapped_model:<br>                <span class="hljs-keyword">if</span> is_compiled_module(unwrapped_model):<br>                    state_dict = unwrapped_model._orig_mod.state_dict()<br>                <span class="hljs-keyword">else</span>:<br>                    state_dict = unwrapped_model.state_dict()<br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.accelerator.is_main_process:<br>                llm_model = <span class="hljs-variable language_">self</span>.llm.llm_engine.model_executor.driver_worker.model_runner.model<br>                llm_model.load_weights(state_dict.items())<br>            <span class="hljs-variable language_">self</span>._last_loaded_step = <span class="hljs-variable language_">self</span>.state.global_step<br><br>        <span class="hljs-comment"># Generate completions using vLLM: gather all prompts and use them in a single call in the main process</span><br>        all_prompts_text = gather_object(prompts_text)<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.accelerator.is_main_process:<br>            outputs = <span class="hljs-variable language_">self</span>.llm.generate(all_prompts_text, sampling_params=<span class="hljs-variable language_">self</span>.sampling_params, use_tqdm=<span class="hljs-literal">False</span>)<br>            completion_ids = [out.token_ids <span class="hljs-keyword">for</span> completions <span class="hljs-keyword">in</span> outputs <span class="hljs-keyword">for</span> out <span class="hljs-keyword">in</span> completions.outputs]<br>        <span class="hljs-keyword">else</span>:<br>            completion_ids = [<span class="hljs-literal">None</span>] * <span class="hljs-built_in">len</span>(all_prompts_text) * <span class="hljs-variable language_">self</span>.num_generations<br><br>        <span class="hljs-comment"># Broadcast the completions from the main process to all processes, ensuring each process receives its</span><br>        <span class="hljs-comment"># corresponding slice.</span><br>        completion_ids = broadcast_object_list(completion_ids, from_process=<span class="hljs-number">0</span>)<br>        process_slice = <span class="hljs-built_in">slice</span>(<br>            <span class="hljs-variable language_">self</span>.accelerator.process_index * <span class="hljs-built_in">len</span>(prompts) * <span class="hljs-variable language_">self</span>.num_generations,<br>            (<span class="hljs-variable language_">self</span>.accelerator.process_index + <span class="hljs-number">1</span>) * <span class="hljs-built_in">len</span>(prompts) * <span class="hljs-variable language_">self</span>.num_generations,<br>        )<br>        completion_ids = completion_ids[process_slice]<br><br>        <span class="hljs-comment"># Pad the completions, and concatenate them with the prompts</span><br>        completion_ids = [torch.tensor(ids, device=device) <span class="hljs-keyword">for</span> ids <span class="hljs-keyword">in</span> completion_ids]<br>        completion_ids = pad(completion_ids, padding_value=<span class="hljs-variable language_">self</span>.processing_class.pad_token_id)<br>        prompt_ids = torch.repeat_interleave(prompt_ids, <span class="hljs-variable language_">self</span>.num_generations, dim=<span class="hljs-number">0</span>)<br>        prompt_mask = torch.repeat_interleave(prompt_mask, <span class="hljs-variable language_">self</span>.num_generations, dim=<span class="hljs-number">0</span>)<br>        prompt_completion_ids = torch.cat([prompt_ids, completion_ids], dim=<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># Regular generation path</span><br>        <span class="hljs-keyword">with</span> unwrap_model_for_generation(<span class="hljs-variable language_">self</span>.model, <span class="hljs-variable language_">self</span>.accelerator) <span class="hljs-keyword">as</span> unwrapped_model:<br>            prompt_completion_ids = unwrapped_model.generate(<br>                prompt_ids, attention_mask=prompt_mask, generation_config=<span class="hljs-variable language_">self</span>.generation_config<br>            )<br><br>        <span class="hljs-comment"># Compute prompt length and extract completion ids</span><br>        prompt_length = prompt_ids.size(<span class="hljs-number">1</span>)<br>        prompt_ids = prompt_completion_ids[:, :prompt_length]<br>        completion_ids = prompt_completion_ids[:, prompt_length:]<br>        prompt_mask = prompt_mask.repeat_interleave(<span class="hljs-variable language_">self</span>.num_generations, dim=<span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># Mask everything after the first EOS token</span><br>    is_eos = completion_ids == <span class="hljs-variable language_">self</span>.processing_class.eos_token_id<br>    eos_idx = torch.full((is_eos.size(<span class="hljs-number">0</span>),), is_eos.size(<span class="hljs-number">1</span>), dtype=torch.long, device=device)<br>    eos_idx[is_eos.<span class="hljs-built_in">any</span>(dim=<span class="hljs-number">1</span>)] = is_eos.<span class="hljs-built_in">int</span>().argmax(dim=<span class="hljs-number">1</span>)[is_eos.<span class="hljs-built_in">any</span>(dim=<span class="hljs-number">1</span>)]<br>    sequence_indices = torch.arange(is_eos.size(<span class="hljs-number">1</span>), device=device).expand(is_eos.size(<span class="hljs-number">0</span>), -<span class="hljs-number">1</span>)<br>    completion_mask = (sequence_indices &lt;= eos_idx.unsqueeze(<span class="hljs-number">1</span>)).<span class="hljs-built_in">int</span>()<br><br>    <span class="hljs-comment"># Concatenate prompt_mask with completion_mask for logit computation</span><br>    attention_mask = torch.cat([prompt_mask, completion_mask], dim=<span class="hljs-number">1</span>)  <span class="hljs-comment"># (B*G, P+C)</span><br><br>    logits_to_keep = completion_ids.size(<span class="hljs-number">1</span>)  <span class="hljs-comment"># we only need to compute the logits for the completion tokens</span><br><br>    <span class="hljs-keyword">with</span> torch.inference_mode():<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.ref_model <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            ref_per_token_logps = <span class="hljs-variable language_">self</span>._get_per_token_logps(<br>                <span class="hljs-variable language_">self</span>.ref_model, prompt_completion_ids, attention_mask, logits_to_keep<br>            )<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">with</span> <span class="hljs-variable language_">self</span>.accelerator.unwrap_model(<span class="hljs-variable language_">self</span>.model).disable_adapter():<br>                ref_per_token_logps = <span class="hljs-variable language_">self</span>._get_per_token_logps(<br>                    <span class="hljs-variable language_">self</span>.model, prompt_completion_ids, attention_mask, logits_to_keep<br>                )<br><br>    <span class="hljs-comment"># Decode the generated completions</span><br>    completions = <span class="hljs-variable language_">self</span>.processing_class.batch_decode(completion_ids, skip_special_tokens=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">if</span> is_conversational(inputs[<span class="hljs-number">0</span>]):<br>        completions = [[&#123;<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;assistant&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: completion&#125;] <span class="hljs-keyword">for</span> completion <span class="hljs-keyword">in</span> completions]<br><br>    <span class="hljs-comment"># Compute the rewards</span><br>    prompts = [prompt <span class="hljs-keyword">for</span> prompt <span class="hljs-keyword">in</span> prompts <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-variable language_">self</span>.num_generations)]  <span class="hljs-comment"># repeat prompts</span><br><br>    rewards_per_func = torch.zeros(<span class="hljs-built_in">len</span>(prompts), <span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>.reward_funcs), device=device)<br>    <span class="hljs-keyword">for</span> i, (reward_func, reward_processing_class) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<br>        <span class="hljs-built_in">zip</span>(<span class="hljs-variable language_">self</span>.reward_funcs, <span class="hljs-variable language_">self</span>.reward_processing_classes)<br>    ):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(reward_func, nn.Module):  <span class="hljs-comment"># Module instead of PretrainedModel for compat with compiled models</span><br>            <span class="hljs-keyword">if</span> is_conversational(inputs[<span class="hljs-number">0</span>]):<br>                messages = [&#123;<span class="hljs-string">&quot;messages&quot;</span>: p + c&#125; <span class="hljs-keyword">for</span> p, c <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(prompts, completions)]<br>                texts = [apply_chat_template(x, reward_processing_class)[<span class="hljs-string">&quot;text&quot;</span>] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> messages]<br>            <span class="hljs-keyword">else</span>:<br>                texts = [p + c <span class="hljs-keyword">for</span> p, c <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(prompts, completions)]<br>            reward_inputs = reward_processing_class(<br>                texts, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>, padding=<span class="hljs-literal">True</span>, padding_side=<span class="hljs-string">&quot;right&quot;</span>, add_special_tokens=<span class="hljs-literal">False</span><br>            )<br>            reward_inputs = <span class="hljs-built_in">super</span>()._prepare_inputs(reward_inputs)<br>            <span class="hljs-keyword">with</span> torch.inference_mode():<br>                rewards_per_func[:, i] = reward_func(**reward_inputs).logits[:, <span class="hljs-number">0</span>]  <span class="hljs-comment"># Shape (B*G,)</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># Repeat all input columns (but &quot;prompt&quot; and &quot;completion&quot;) to match the number of generations</span><br>            reward_kwargs = &#123;key: [] <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> inputs[<span class="hljs-number">0</span>].keys() <span class="hljs-keyword">if</span> key <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;prompt&quot;</span>, <span class="hljs-string">&quot;completion&quot;</span>]&#125;<br>            <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> reward_kwargs:<br>                <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> inputs:<br>                    <span class="hljs-comment"># Repeat each value in the column for `num_generations` times</span><br>                    reward_kwargs[key].extend([example[key]] * <span class="hljs-variable language_">self</span>.num_generations)<br>            output_reward_func = reward_func(prompts=prompts, completions=completions, **reward_kwargs)<br>            rewards_per_func[:, i] = torch.tensor(output_reward_func, dtype=torch.float32, device=device)<br><br>    <span class="hljs-comment"># Sum the rewards from all reward functions</span><br>    rewards = rewards_per_func.<span class="hljs-built_in">sum</span>(dim=<span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment"># Compute grouped-wise rewards</span><br>    mean_grouped_rewards = rewards.view(-<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.num_generations).mean(dim=<span class="hljs-number">1</span>)<br>    std_grouped_rewards = rewards.view(-<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.num_generations).std(dim=<span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment"># Normalize the rewards to compute the advantages</span><br>    mean_grouped_rewards = mean_grouped_rewards.repeat_interleave(<span class="hljs-variable language_">self</span>.num_generations, dim=<span class="hljs-number">0</span>)<br>    std_grouped_rewards = std_grouped_rewards.repeat_interleave(<span class="hljs-variable language_">self</span>.num_generations, dim=<span class="hljs-number">0</span>)<br>    advantages = (rewards - mean_grouped_rewards) / (std_grouped_rewards + <span class="hljs-number">1e-4</span>)<br><br>    <span class="hljs-comment"># Log the metrics</span><br>    reward_per_func = <span class="hljs-variable language_">self</span>.accelerator.gather_for_metrics(rewards_per_func).mean(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">for</span> i, reward_func <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-variable language_">self</span>.reward_funcs):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(reward_func, nn.Module):  <span class="hljs-comment"># Module instead of PretrainedModel for compat with compiled models</span><br>            reward_func_name = reward_func.config._name_or_path.split(<span class="hljs-string">&quot;/&quot;</span>)[-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">else</span>:<br>            reward_func_name = reward_func.__name__<br>        <span class="hljs-variable language_">self</span>._metrics[<span class="hljs-string">f&quot;rewards/<span class="hljs-subst">&#123;reward_func_name&#125;</span>&quot;</span>].append(reward_per_func[i].item())<br><br>    <span class="hljs-variable language_">self</span>._metrics[<span class="hljs-string">&quot;reward&quot;</span>].append(<span class="hljs-variable language_">self</span>.accelerator.gather_for_metrics(rewards).mean().item())<br>    <span class="hljs-variable language_">self</span>._metrics[<span class="hljs-string">&quot;reward_std&quot;</span>].append(<span class="hljs-variable language_">self</span>.accelerator.gather_for_metrics(std_grouped_rewards).mean().item())<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-string">&quot;prompt_ids&quot;</span>: prompt_ids,<br>        <span class="hljs-string">&quot;prompt_mask&quot;</span>: prompt_mask,<br>        <span class="hljs-string">&quot;completion_ids&quot;</span>: completion_ids,<br>        <span class="hljs-string">&quot;completion_mask&quot;</span>: completion_mask,<br>        <span class="hljs-string">&quot;ref_per_token_logps&quot;</span>: ref_per_token_logps,<br>        <span class="hljs-string">&quot;advantages&quot;</span>: advantages,<br>    &#125;<br></code></pre></td></tr></table></figure>å…·ä½“ç»†èŠ‚ï¼š<a href="https://blog.csdn.net/shizheng_Li/article/details/145794949">https://blog.csdn.net/shizheng_Li/article/details/145794949</a></li></ol><p><strong>compute_loss</strong><br>ä½œç”¨ï¼šæ ¹æ® GRPO å…¬å¼ï¼Œç»“åˆ KL æƒ©ç½šé¡¹å’Œç›¸å¯¹ä¼˜åŠ¿ï¼Œè®¡ç®—æœ€ç»ˆæŸå¤±å¹¶è¿›è¡Œåå‘ä¼ æ’­ã€‚<br>ç®€è¦æµç¨‹ï¼š</p><ol><li>åœ¨å½“å‰ç­–ç•¥ä¸‹è®¡ç®—å®Œæ•´åºåˆ—çš„tokençº§å¯¹æ•°æ¦‚ç‡</li><li>æ ¹æ®actor modelå’Œref modelçš„token_log_prob,è®¡ç®—KLæ•£åº¦</li><li>åˆ©ç”¨KLæ•£åº¦å’Œ<code>_prepare_inputs</code>ä¸­å¾—åˆ°çš„ç›¸å¯¹ä¼˜åŠ¿è®¡ç®—GRPO Loss,ç„¶ååå‘ä¼ æ’­è¿›è¡Œæ¢¯åº¦æ›´æ–°<br>å…¨éƒ¨ä»£ç ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">compute_loss</span>(<span class="hljs-params">self, model, inputs, return_outputs=<span class="hljs-literal">False</span>, num_items_in_batch=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-keyword">if</span> return_outputs:<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;The GRPOTrainer does not support returning outputs&quot;</span>)<br>    <span class="hljs-comment"># Compute the per-token log probabilities for the model</span><br><br>    prompt_ids, prompt_mask = inputs[<span class="hljs-string">&quot;prompt_ids&quot;</span>], inputs[<span class="hljs-string">&quot;prompt_mask&quot;</span>]<br>    completion_ids, completion_mask = inputs[<span class="hljs-string">&quot;completion_ids&quot;</span>], inputs[<span class="hljs-string">&quot;completion_mask&quot;</span>]<br>    input_ids = torch.cat([prompt_ids, completion_ids], dim=<span class="hljs-number">1</span>)<br>    attention_mask = torch.cat([prompt_mask, completion_mask], dim=<span class="hljs-number">1</span>)<br>    logits_to_keep = completion_ids.size(<span class="hljs-number">1</span>)  <span class="hljs-comment"># we only need to compute the logits for the completion tokens</span><br><br>    per_token_logps = <span class="hljs-variable language_">self</span>._get_per_token_logps(model, input_ids, attention_mask, logits_to_keep)<br><br>    <span class="hljs-comment"># Compute the KL divergence between the model and the reference model</span><br>    ref_per_token_logps = inputs[<span class="hljs-string">&quot;ref_per_token_logps&quot;</span>]<br>    per_token_kl = torch.exp(ref_per_token_logps - per_token_logps) - (ref_per_token_logps - per_token_logps) - <span class="hljs-number">1</span><br><br>    <span class="hljs-comment"># x - x.detach() allows for preserving gradients from x</span><br>    advantages = inputs[<span class="hljs-string">&quot;advantages&quot;</span>]<br>    per_token_loss = torch.exp(per_token_logps - per_token_logps.detach()) * advantages.unsqueeze(<span class="hljs-number">1</span>)<br>    per_token_loss = -(per_token_loss - <span class="hljs-variable language_">self</span>.beta * per_token_kl)<br>    loss = ((per_token_loss * completion_mask).<span class="hljs-built_in">sum</span>(dim=<span class="hljs-number">1</span>) / completion_mask.<span class="hljs-built_in">sum</span>(dim=<span class="hljs-number">1</span>)).mean()<br><br>    <span class="hljs-comment"># Log the metrics</span><br>    completion_length = <span class="hljs-variable language_">self</span>.accelerator.gather_for_metrics(completion_mask.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>)).<span class="hljs-built_in">float</span>().mean().item()<br>    <span class="hljs-variable language_">self</span>._metrics[<span class="hljs-string">&quot;completion_length&quot;</span>].append(completion_length)<br><br>    mean_kl = ((per_token_kl * completion_mask).<span class="hljs-built_in">sum</span>(dim=<span class="hljs-number">1</span>) / completion_mask.<span class="hljs-built_in">sum</span>(dim=<span class="hljs-number">1</span>)).mean()<br>    <span class="hljs-variable language_">self</span>._metrics[<span class="hljs-string">&quot;kl&quot;</span>].append(<span class="hljs-variable language_">self</span>.accelerator.gather_for_metrics(mean_kl).mean().item())<br><br>    <span class="hljs-keyword">return</span> loss<br></code></pre></td></tr></table></figure>å…·ä½“ç»†èŠ‚ï¼š<a href="https://blog.csdn.net/shizheng_Li/article/details/145793070">https://blog.csdn.net/shizheng_Li/article/details/145793070</a></li></ol><p><strong>prediction_step</strong><br>ä½œç”¨ï¼šè®­ç»ƒ &#x2F; éªŒè¯é˜¶æ®µå¦‚ä½•è°ƒç”¨ _prepare_inputs å¹¶è·å– lossã€‚<br>åœ¨è¯„ä¼°æˆ–é¢„æµ‹æ—¶ï¼Œä¹Ÿéœ€è¦æ‰§è¡Œ _prepare_inputs æ¥ç”Ÿæˆå¤šæ¡å›ç­”å¹¶ç®— lossï¼Œåªä¸è¿‡ä¸ä¼šå†åå‘ä¼ æ’­ã€‚è¿™ä¸ªå‡½æ•°å°±æ˜¯åœ¨ eval é˜¶æ®µæˆ–é¢„æµ‹æ—¶ï¼Œå¯¹åº”åœ°æ‹¿åˆ° lossï¼Œç”¨äºæ‰“å°æ—¥å¿—æˆ– early stopping ç­‰æ“ä½œã€‚</p><p><strong>log ä¸ create_model_card</strong><br>ä½œç”¨ï¼šæ—¥å¿—ä¸æ¨¡å‹å¡ï¼Œå¯ä¸Šä¼ åˆ° Hugging Face Hub åšæ¨¡å‹ç®¡ç†ã€‚<br>create_model_cardè¾“å…¥å‚æ•°ï¼š</p><ul><li>model_nameï¼šæ¨¡å‹çš„åç§°</li><li>dataset_nameï¼šç”¨äºè®­ç»ƒçš„æ•°æ®é›†çš„åç§°</li><li>tagsï¼šè¦ä¸æ¨¡å‹å¡å…³è”çš„æ ‡ç­¾</li></ul><h3 id="è‡ªå®šä¹‰å¥–åŠ±å‡½æ•°"><a href="#è‡ªå®šä¹‰å¥–åŠ±å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰å¥–åŠ±å‡½æ•°"></a>è‡ªå®šä¹‰å¥–åŠ±å‡½æ•°</h3><p>GRPOTrainer æ”¯æŒä½¿ç”¨è‡ªå®šä¹‰å¥–åŠ±å‡½æ•°æ¥ä»£æ›¿å¯†é›†å¥–åŠ±æ¨¡å‹ã€‚ä¸ºäº†ç¡®ä¿å…¼å®¹æ€§ï¼Œæ‚¨çš„å¥–åŠ±å‡½æ•°å¿…é¡»æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p><ol><li>è¾“å…¥å‚æ•°<br>å‡½æ•°å¿…é¡»æ¥å—ä»¥ä¸‹å†…å®¹ä½œä¸ºå…³é”®å­—å‚æ•°ï¼š<ul><li>promptsï¼ˆåŒ…å«æç¤ºï¼‰ï¼Œ</li><li>completionsï¼ˆåŒ…å«ç”Ÿæˆçš„è¡¥å…¨ï¼‰ï¼Œ</li><li>æ•°æ®é›†å¯èƒ½åŒ…å«çš„æ‰€æœ‰åˆ—åï¼ˆä½†prompté™¤å¤–ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ•°æ®é›†åŒ…å«åä¸ºground_truthçš„åˆ—ï¼Œåˆ™å°†ä½¿ç”¨ground_truthä½œä¸ºå…³é”®å­—å‚æ•°è°ƒç”¨è¯¥å‡½æ•°ã€‚æ»¡è¶³æ­¤è¦æ±‚çš„æœ€ç®€å•æ–¹æ³•æ˜¯åœ¨å‡½æ•°ç­¾åä¸­ä½¿ç”¨**kwargsã€‚</li></ul></li></ol><p>æ ¹æ®æ•°æ®é›†æ ¼å¼ï¼Œè¾“å…¥ä¼šæœ‰æ‰€ä¸åŒï¼š<br>    - å¯¹äºæ ‡å‡†æ ¼å¼ï¼Œpromptså’Œcompletionså°†æ˜¯å­—ç¬¦ä¸²åˆ—è¡¨ã€‚<br>    - å¯¹äºå¯¹è¯æ ¼å¼ï¼Œpromptså’Œcompletionså°†æ˜¯æ¶ˆæ¯å­—å…¸åˆ—è¡¨ã€‚</p><ol start="2"><li>è¿”å›å€¼<br>å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°åˆ—è¡¨ã€‚æ¯ä¸ªæµ®ç‚¹æ•°ä»£è¡¨å¯¹åº”äºå•ä¸ªè¡¥å…¨çš„å¥–åŠ±ã€‚</li></ol><p>ç¤ºä¾‹ä¸€: å¥–åŠ±è¾ƒé•¿çš„è¡¥å…¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">reward_func</span>(<span class="hljs-params">completions, **kwargs</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;å¥–åŠ±å‡½æ•°ï¼Œå¯¹è¾ƒé•¿çš„è¡¥å…¨ç»™äºˆæ›´é«˜çš„åˆ†æ•°ã€‚&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> [<span class="hljs-built_in">float</span>(<span class="hljs-built_in">len</span>(completion)) <span class="hljs-keyword">for</span> completion <span class="hljs-keyword">in</span> completions]<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹äºŒï¼šå¥–åŠ±å…·æœ‰ç‰¹å®šæ ¼å¼çš„è¡¥å…¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">format_reward_func</span>(<span class="hljs-params">completions, **kwargs</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;å¥–åŠ±å‡½æ•°ï¼Œæ£€æŸ¥è¡¥å…¨æ˜¯å¦å…·æœ‰ç‰¹å®šæ ¼å¼ã€‚&quot;&quot;&quot;</span><br>    pattern = <span class="hljs-string">r&quot;^&amp;lt;think&amp;gt;.*?&amp;lt;/think&amp;gt;&amp;lt;answer&amp;gt;.*?&amp;lt;/answer&amp;gt;$&quot;</span><br>    completion_contents = [completion[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;content&quot;</span>] <span class="hljs-keyword">for</span> completion <span class="hljs-keyword">in</span> completions]<br>    matches = [re.<span class="hljs-keyword">match</span>(pattern, content) <span class="hljs-keyword">for</span> content <span class="hljs-keyword">in</span> completion_contents]<br>    <span class="hljs-keyword">return</span> [<span class="hljs-number">1.0</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0.0</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">in</span> matches]<br></code></pre></td></tr></table></figure><p>å†™åœ¨æœ€åï¼š è¯¦è§<a href="https://huggingface.co/docs/trl/main/en/grpo_trainer">https://huggingface.co/docs/trl/main/en/grpo_trainer</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>RLHF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RLHF(äºŒ)ï¼šåå¥½æ•°æ®é‡‡é›†</title>
    <link href="/2025/04/18/RLHF(%E4%BA%8C)/"/>
    <url>/2025/04/18/RLHF(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<h3 id="ORM-å’Œ-PRM"><a href="#ORM-å’Œ-PRM" class="headerlink" title="ORM å’Œ PRM"></a>ORM å’Œ PRM</h3><p><strong>ORM</strong>ï¼šç»“æœå¥–åŠ±æ¨¡å‹ï¼Œæ˜¯ä¸ç®¡æ¨ç†æœ‰å¤šå°‘æ­¥ï¼Œå¯¹å®Œæ•´çš„ç”Ÿæˆç»“æœè¿›è¡Œä¸€æ¬¡æ‰“åˆ†ï¼Œæ˜¯ä¸€ä¸ªåé¦ˆæ›´ç¨€ç–çš„å¥–åŠ±æ¨¡å‹<br><strong>PRM</strong>ï¼šè¿‡ç¨‹å¥–åŠ±æ¨¡å‹ï¼Œæ˜¯åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œåˆ†æ­¥éª¤ï¼Œå¯¹æ¯ä¸€æ­¥è¿›è¡Œæ‰“åˆ†ï¼Œæ˜¯æ›´ç»†ç²’åº¦çš„å¥–åŠ±æ¨¡å‹</p><p>ä½¿ç”¨PRMå¯ä»¥åœ¨post-trainingå’Œinferenceä¸¤ä¸ªé˜¶æ®µæå‡æ¨¡å‹çš„æ¨ç†æ€§èƒ½ï¼š</p><ul><li>Post-Trainingé˜¶æ®µï¼šåœ¨åå¥½å¯¹é½é˜¶æ®µï¼Œé€šè¿‡åœ¨RLè¿‡ç¨‹ä¸­å¢åŠ PRMï¼Œå¯¹é‡‡æ ·çš„ç»“æœæŒ‰æ­¥éª¤è¾“å‡ºå¥–åŠ±å€¼ï¼Œä¸ºæ¨¡å‹æä¾›æ›´ç²¾ç»†çš„ç›‘ç£ä¿¡å·ï¼Œæ¥æŒ‡å¯¼ç­–ç•¥æ¨¡å‹ä¼˜åŒ–ï¼Œæå‡æ¨¡å‹æŒ‰æ­¥æ¨ç†çš„èƒ½åŠ›</li><li>Inferenceé˜¶æ®µï¼šå¯¹äºä¸€ä¸ªè®­ç»ƒå¥½çš„PRMï¼Œå¯ä»¥åœ¨inferenceé˜¶æ®µç­›é€‰ä¼˜è´¨ç”Ÿæˆç»“æœã€‚</li></ul><h3 id="MCTS-è’™ç‰¹å¡æ´›æ ‘æœç´¢"><a href="#MCTS-è’™ç‰¹å¡æ´›æ ‘æœç´¢" class="headerlink" title="MCTS è’™ç‰¹å¡æ´›æ ‘æœç´¢"></a>MCTS è’™ç‰¹å¡æ´›æ ‘æœç´¢</h3><p>MCTSæ˜¯å¼ºåŒ–å­¦ä¹ é¢†åŸŸæå‡ºçš„æ–¹æ³•ï¼Œé€šè¿‡é‡‡æ ·æ–¹å¼é¢„ä¼°å½“å‰åŠ¨ä½œæˆ–çŠ¶æ€çš„ä»·å€¼ã€‚å…·ä½“æ“ä½œæ­¥éª¤ï¼šä½¿ç”¨å·²æœ‰çš„ç­–ç•¥ä¸ç¯å¢ƒåšä»¿çœŸäº¤äº’ï¼Œè¿›è¡Œå¤šæ¬¡rollouté‡‡æ ·ï¼Œæœ€ç»ˆæ„æˆäº†ä¸€ä¸ªä»å½“å‰èŠ‚ç‚¹å‡ºå‘çš„ä¸€é¢—Treeï¼ˆæ¯ä¸ªrolloutè¡¨ç¤º<strong>ä»å½“å‰èŠ‚ç‚¹åˆ°æœ€ç»ˆç»“æŸçŠ¶æ€çš„å¤šæ¬¡ä¸ç¯å¢ƒä»¿çœŸäº¤äº’çš„è¿‡ç¨‹</strong>ï¼‰ã€‚è¿™é¢—Treeçš„æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½æ˜¯ç»“æŸçŠ¶æ€ï¼Œç»“æŸçŠ¶æ€æ˜¯å¯ä»¥é€šè¿‡å®šä¹‰è§„åˆ™è¿›è¡Œé‡åŒ–æ”¶ç›Šçš„ã€‚å½“Treeçš„å¶å­ç»“ç‚¹æœ‰äº†å¥–åŠ±å€¼ï¼Œå°±å¯é€šè¿‡åå‘ä¼ æ’­ï¼Œè®¡ç®—æ¯ä¸ªä¸­é—´èŠ‚ç‚¹çš„å¥–åŠ±å€¼ï¼Œæœ€ç»ˆè®¡ç®—å‡ºæ•´ä¸ªTreeæ‰€æœ‰èŠ‚ç‚¹çš„å¥–åŠ±å€¼ã€‚MCTSä¸€æ¬¡rolloutåŒ…æ‹¬ï¼šsampleï¼Œexpandï¼Œsimulateï¼Œbackpropå››ä¸ªæ­¥éª¤ã€‚</p><ul><li><strong>Sample(é‡‡æ ·)ï¼š</strong>é€‰æ‹©ä¸€ä¸ªæœªè¢«æ¢ç´¢çš„èŠ‚ç‚¹ï¼Œåœ¨Reasoning Modelä¸­çš„èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå¸¦æœ‰ç‰¹å®šæ ‡ç­¾çš„æ¨ç†æ­¥éª¤ï¼ˆå¦‚ï¼šplanning èŠ‚ç‚¹ï¼ŒreflectionèŠ‚ç‚¹ç­‰ï¼‰ã€‚åˆå§‹æƒ…å†µï¼ŒTreeåªæœ‰ä¸€ä¸ªè¡¨ç¤ºåŸå§‹æŸ¥è¯¢çš„èŠ‚ç‚¹</li><li><strong>Expand(æ‰©å±•)ï¼š</strong>ä»æœªè¢«é€‰æ‹©çš„èŠ‚ç‚¹å‡ºå‘ï¼Œå±•å¼€æ‰€æœ‰å¯èƒ½çš„å­èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾ä¸­ä»$S_0$åˆ°$S_{1,1}, S_{1,2}, S_{1,3}, S_{1,4}$çš„è¿‡ç¨‹ã€‚å¯¹äºæ–‡æœ¬ç”Ÿæˆæ¨¡å‹ï¼Œä¸å¯èƒ½ç©·ä¸¾æ‰€æœ‰å­èŠ‚ç‚¹(next token)ï¼Œå› æ­¤éœ€è¦è®¾ç½®ä¸€ä¸ªæœ€å¤§ç”Ÿæ´»æ¬¡æ•°ï¼Œå³æœ€å¤§å­èŠ‚ç‚¹ä¸ªæ•°ã€‚</li><li><strong>Simulate(æ¨¡æ‹Ÿ)ï¼š</strong>ä»å±•å¼€çš„å­èŠ‚ç‚¹ä¸­ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†å±•å¼€å®ƒçš„å­èŠ‚ç‚¹ï¼Œé‡å¤è¿›è¡Œexpandè¿‡ç¨‹ã€‚ç›´åˆ°è¾¾åˆ°å¶å­ç»“ç‚¹ã€‚è¯¥è¿­ä»£è¿‡ç¨‹éœ€è¦æ§åˆ¶æœç´¢æ ‘çš„æœ€å¤§æ·±åº¦N</li><li><strong>Backprop(å›ä¼ )ï¼š</strong>é€šè¿‡å¤šæ¬¡æ¨¡æ‹Ÿæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªä»æ ¹èŠ‚ç‚¹åˆ°å¶å­ç»“ç‚¹çš„Treeï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é€šè¿‡è®¡ç®—<code>(ä»å½“å‰èŠ‚ç‚¹å‡ºå‘åˆ°æ­£ç¡®ç­”æ¡ˆçš„è·¯å¾„æ•°)/(ä»å½“å‰èŠ‚ç‚¹å‡ºå‘çš„æ€»è·¯å¾„æ•°)</code>çš„æ¯”å€¼ä½œä¸ºèŠ‚ç‚¹çš„å¥–åŠ±å€¼ã€‚</li></ul><p>ä½¿ç”¨MCTSä¹Ÿå¯ä»¥åœ¨post-trainingå’Œinferenceä¸¤ä¸ªèŠ‚ç‚¹æå‡æ¨¡å‹çš„æ¨ç†æ€§èƒ½ï¼š</p><ul><li>Post-Trainingé˜¶æ®µ: å¯¹äºæ¯ä¸ªproblem é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ ä¸€ä¸ªæœç´¢Treeï¼Œç„¶åè¿›è¡ŒTreeçš„æ¸¸èµ°éå†é‡‡æ ·ï¼Œå†ç”¨é‡‡æ ·çš„æ ·æœ¬SFTæˆ–RLè®­ç»ƒæ¨¡å‹ã€‚</li><li>Inferenceé˜¶æ®µï¼šåœ¨æ¨ç†é˜¶æ®µï¼Œä¹Ÿæ˜¯å¯¹ä¸€ä¸ªproblemæ¢ç´¢å¤šèŠ‚ç‚¹æ„é€ ä¸€æ£µæœç´¢æ ‘ï¼Œå¯¹äºåˆ°è¾¾æ­£ç¡®ç­”æ¡ˆçš„è·¯å¾„ï¼Œæ ¹æ®èŠ‚ç‚¹è·¯å¾„çš„ç½®ä¿¡åº¦æ‰“åˆ†ï¼Œè´ªå¿ƒé€‰å–æœ€ä¼˜è·¯å¾„ä½œä¸ºæœ€ç»ˆçš„æ¨ç†ç»“æœã€‚</li></ul><p><img src="/../article_img/RLHF/img2-1.png" alt="MCTSç”Ÿæˆæœç´¢æ ‘çš„è¿‡ç¨‹"></p><h3 id="åˆ†è€Œæ²»ä¹‹ï¼šOmegaPRM"><a href="#åˆ†è€Œæ²»ä¹‹ï¼šOmegaPRM" class="headerlink" title="åˆ†è€Œæ²»ä¹‹ï¼šOmegaPRM"></a>åˆ†è€Œæ²»ä¹‹ï¼šOmegaPRM</h3><p>ç”±äºMCTSå’ŒPRMæ–¹æ³•çš„è§„æ¨¡åŒ–æˆæœ¬è¿‡é«˜ï¼Œä¸ºäº†æ›´é«˜æ•ˆçš„æ”¶é›†é«˜è´¨é‡çš„è¿‡ç¨‹ç›‘ç£æ•°æ®ï¼ŒOmegaPRMç®—æ³•é€šè¿‡äºŒåˆ†æœç´¢å¿«é€Ÿè¯†åˆ«æ€ç»´é“¾CoTä¸­çš„ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œå¹¶å¹³è¡¡æ­£åä¾‹ï¼Œä»è€Œç¡®ä¿æ•ˆç‡å’Œè´¨é‡ã€‚</p><p>OmegaPRMçš„æœç´¢æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºéƒ¨åˆ†æ€ç»´é“¾è§£å†³æ–¹æ¡ˆçš„çŠ¶æ€ï¼Œå…¶ä¸­åŒ…å«ä¿¡æ¯ï¼Œå¦‚æ¨å‡ºçš„å‡†ç¡®æ€§å’Œå…¶ä»–ç»Ÿè®¡æ•°æ®ã€‚æ¯æ¡è¾¹éƒ½è¡¨ç¤ºä»ä¸Šä¸€ä¸ªçŠ¶æ€å¼€å§‹çš„ä¸€ä¸ªåŠ¨ä½œï¼Œå³æ¨ç†æ­¥éª¤ã€‚é»„è‰²è¾¹æ˜¯æ­£ç¡®çš„æ­¥éª¤ï¼Œè“è‰²è¾¹æ˜¯é”™è¯¯çš„æ­¥éª¤ã€‚<br><img src="/../article_img/RLHF/img2-2.png" alt="OmegaPRMç”Ÿæˆæœç´¢æ ‘çš„è¿‡ç¨‹"></p><p>æœç´¢ç®—æ³•çš„å…·ä½“å®ç°å¦‚ä¸‹ï¼šå»ºç«‹äº†ä¸€ä¸ª<code>å®Œæˆè€…ç­–ç•¥</code>ï¼Œè¯¥ç­–ç•¥å¯ä»¥é‡‡ç”¨é—®é¢˜ ğ‘ å’Œä¸€ä¸ªç”±å‰ ğ‘¡ æ­¥éª¤ $ğ‘¥_{1:ğ‘¡}$ ç»„æˆçš„å‰ç¼€è§£å†³æ–¹æ¡ˆï¼Œå¹¶è¾“å‡ºåç»­æ­¥éª¤çš„å®Œæˆæƒ…å†µï¼ˆåœ¨å¼ºåŒ–å­¦ä¹ ä¸­é€šå¸¸ç§°ä¸º<code>rollout</code>ï¼‰ï¼Œç›´åˆ°å¾—å‡ºæœ€ç»ˆç­”æ¡ˆã€‚å¯¹äºè§£å†³æ–¹æ¡ˆçš„ä»»ä½•æ­¥éª¤ï¼Œ<code>å®Œæˆè€…ç­–ç•¥</code>å¯ç”¨äºä»è¯¥æ­¥éª¤ä¸­éšæœºæŠ½å– ğ‘˜ ä¸ª <code>rollout</code>ã€‚å°†è¿™äº› rollout çš„æœ€ç»ˆç­”æ¡ˆä¸æ­£ç¡®ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒï¼Œæä¾›ä¸ ğ‘˜ ä¸ª rollout ç›¸å¯¹åº”çš„ ğ‘˜ ä¸ªç­”æ¡ˆæ­£ç¡®æ€§æ ‡ç­¾ã€‚éšåï¼Œè®¡ç®—ç¬¬ ğ‘¡ æ­¥ä¸­æ­£ç¡® rollout å æ€» rollout çš„æ¯”ç‡ï¼Œå…¬å¼1 å±•ç¤ºäº†ä¼°è®¡å‰ç¼€æ­¥éª¤ $ğ‘¥_{1:ğ‘¡}$ â€œæ­£ç¡®æ€§æ°´å¹³â€çš„æ–¹æ³•ã€‚åªè¦åœ¨é€»è¾‘æ¨ç†åœºæ™¯ä¸­ä»»ä½•ä¸€ä¸ªæ¨å‡ºæ˜¯æ­£ç¡®çš„ï¼Œğ‘¥1:ğ‘¡ å°±åº”è¯¥è¢«è§†ä¸ºæ­£ç¡®çš„ã€‚ä¸ºäº†ä¼˜åŒ–æ³¨é‡Šæ•ˆç‡ï¼ŒOmegaPRMé‡‡ç”¨äºŒåˆ†æœç´¢çš„è’™ç‰¹å¡æ´›ä¼°è®¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br>$c_t &#x3D; MontoCarlo(q,x_{1:t}) &#x3D; \frac{Num(\text{correct rollouts from t-th step})}{Num(\text{total rollouts from t-th step})}$<br><img src="/../article_img/RLHF/img2-3.png" alt="OmegaPRMäºŒåˆ†æœç´¢ç®—æ³•"></p>]]></content>
    
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>RLHF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RLHF(ä¸€)ï¼šLLM post-training</title>
    <link href="/2025/04/17/RLHF(%E4%B8%80)/"/>
    <url>/2025/04/17/RLHF(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<h3 id="1-PPOç®—æ³•"><a href="#1-PPOç®—æ³•" class="headerlink" title="1. PPOç®—æ³•"></a>1. PPOç®—æ³•</h3><p>$L_{PPO} &#x3D; \sum_{(s_t,a_t)}\frac{\pi_\theta(a_t|s_t)}{\pi_{ref}(a_t|s_t)}A(s_t,a_t) - \beta KL(\pi_\theta, \pi_{ref})$</p><p>PPOçš„è®­ç»ƒæ­¥éª¤å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰æ”¶é›†äººç±»åé¦ˆï¼Œäººå·¥æ ‡æ³¨æ•°æ® ï¼ˆ2ï¼‰è®­ç»ƒå¥–åŠ±æ¨¡å‹ ï¼ˆ3ï¼‰é‡‡ç”¨PPOå¼ºåŒ–å­¦ä¹ ï¼Œä¼˜åŒ–ç­–ç•¥<br><img src="/../article_img/RLHF/img1-1.png" alt="PPOè®­ç»ƒæµç¨‹"></p><p>åœ¨LLMä¸Šä½¿ç”¨PPOç®—æ³•è¿›è¡Œpost-trainingæ—¶ï¼Œä¸»è¦æ¶‰åŠ4ä¸ªmodel:</p><ul><li><strong>Actor Model</strong>ï¼š æ˜¯æˆ‘ä»¬è¦ä¼˜åŒ–å­¦ä¹ çš„ç­–ç•¥æ¨¡å‹ï¼ŒåŒæ—¶ç”¨äºåšæ•°æ®é‡‡æ ·ï¼Œç”¨SFT Modelçƒ­å¯</li><li><strong>Reference Model</strong>ï¼š æ˜¯ä¸ºäº†æ§åˆ¶Actoræ¨¡å‹å­¦ä¹ çš„åˆ†å¸ƒä¸åŸå§‹æ¨¡å‹çš„åˆ†å¸ƒç›¸å·®ä¸ä¼šå¤ªè¿œçš„å‚è€ƒæ¨¡å‹ï¼Œé€šè¿‡lossä¸­å¢åŠ KLé¡¹ï¼Œæ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚è®­ç»ƒè¿‡ç¨‹ä¸­è¯¥æ¨¡å‹ä¸æ›´æ–°</li><li><strong>Critic Model</strong>ï¼šæ˜¯å¯¹æ¯ä¸ªçŠ¶æ€åšæ‰“åˆ†çš„ä»·å€¼æ¨¡å‹ï¼Œè¡¡é‡å½“å‰tokenåˆ°ç”Ÿæˆç»“æŸçš„æ•´ä½“ä»·å€¼æ‰“åˆ†ï¼Œä¸€èˆ¬å¯ç”¨Reward Modelçƒ­å¯</li><li><strong>Reward Model</strong>ï¼šå¯¹æ•´ä¸ªç”Ÿæˆçš„ç»“æœæ‰“åˆ†ï¼Œæ˜¯äº‹å…ˆè®­ç»ƒå¥½çš„Reward Modelã€‚è®­ç»ƒè¿‡ç¨‹ä¸­è¯¥æ¨¡å‹ä¸æ›´æ–°</li></ul><h3 id="2-DPOç®—æ³•"><a href="#2-DPOç®—æ³•" class="headerlink" title="2. DPOç®—æ³•"></a>2. DPOç®—æ³•</h3><p>$L_{DPO}(\pi_\theta; \pi_{ref}) &#x3D; -E_{(x,y_w,y_l)\sim D}[log \sigma(\beta log\frac{\pi_\theta(y_w|x)}{\pi_{ref}(y_w|x)} - \beta log\frac{\pi_\theta(y_l|x)}{\pi_{ref}(y_l|x)})]$<br>DPOç›¸æ¯”äºPPOç®—æ³•ï¼Œç”±äºå®ƒç›´æ¥å®šä¹‰åå¥½æŸå¤±ä½œä¸ºç­–ç•¥æ¥ä¼˜åŒ–LLMï¼Œçœå»äº†å¥–åŠ±æ¨¡å‹çš„å®šä¹‰ï¼Œå› æ­¤åœ¨post-trainingçš„æµç¨‹ä¸Šæ›´ä¸ºç®€ç»ƒ(PPO: SFT-&gt;RM-&gt;PPO)</p><p>å¦‚ä½•ç†è§£DPO loss:<br>å¼€å§‹è®­ç»ƒæ—¶ï¼ŒReference modelå’ŒPolicy modeléƒ½æ˜¯åŒä¸€ä¸ªæ¨¡å‹ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­Reference modelä¸æ›´æ–°æƒé‡ã€‚æˆ‘ä»¬å°†losså…¬å¼ä¸­çš„logéƒ¨åˆ†å±•å¼€ï¼Œç„¶åè®¾$\beta$ä¸º1ï¼Œå¹¶ä¸”æš‚æ—¶ä¸çœ‹å‰é¢çš„log_sigmoidã€‚ä»è€Œå°†ä¼˜åŒ–å‡½æ•°ç®€åŒ–ä¸ºï¼š$[logp(y_w) - logp_{ref}(y_w)]-[logp(y_l)-logp_{ref}(y_l)]$</p><p>è®­ç»ƒçš„ç›®æ ‡ä¸ºå°†ä¼˜åŒ–å‡½æ•°æœ€å¤§åŒ–ã€‚å³æˆ‘ä»¬å¸Œæœ›å…¬å¼çš„å·¦åŠéƒ¨åˆ†å’Œå³åŠéƒ¨åˆ†çš„marginè¶Šå¤§è¶Šå¥½ï¼Œå·¦åŠéƒ¨åˆ†çš„å«ä¹‰æ˜¯good responseç›¸è¾ƒäºæ²¡è®­ç»ƒä¹‹å‰çš„ç´¯è®¡æ¦‚ç‡å·®å€¼ï¼Œå³åŠéƒ¨åˆ†ä»£è¡¨bad responseç›¸è¾ƒäºæ²¡è®­ç»ƒä¹‹å‰çš„ç´¯è®¡æ¦‚ç‡å·®å€¼</p><h3 id="3-KTOç®—æ³•"><a href="#3-KTOç®—æ³•" class="headerlink" title="3. KTOç®—æ³•"></a>3. KTOç®—æ³•</h3><p>DPOç®—æ³•ä¸­ä¾èµ–çš„è®­ç»ƒæ•°æ®ä¸ºï¼šé—®é¢˜â€”â€”æœŸæœ›å›ç­”â€”â€”æ‹’ç»å›ç­”ã€‚é«˜è´¨é‡çš„åå¥½æ•°æ®æ”¶é›†è¾ƒä¸ºå›°éš¾ã€‚KTOåˆ™å›é¿äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨äºŒå…ƒä¿¡å·æ ‡è®°çš„æ•°æ®æ¥è®­ç»ƒç®—æ³•ï¼Œå¯¹äºè´Ÿæ ·æœ¬æ›´åŠ æ•æ„Ÿ</p><p><strong>å‰æ™¯ä»·å€¼å‡½æ•°</strong>ï¼šå†³ç­–è€…æ ¹æ®å®é™…æ”¶ç›Šæˆ–æŸå¤±æ‰€äº§ç”Ÿçš„ä¸»è§‚æ„Ÿå—çš„ä»·å€¼ã€‚ï¼ˆå†³ç­–æ—¶ï¼Œç›¸å¯¹äºæ”¶ç›Šï¼Œå†³ç­–è€…å¯¹æŸå¤±æ›´åŠ æ•æ„Ÿï¼‰</p><div align="center">$$v(z,z_{ref};\lambda,a) =\begin{cases} (z - z_{ref})^\alpha & \text{if } z > z_{ref} \\-\lambda(z_{ref} - z)^\alpha & \text{if } z < z_{ref}\end{cases}$$</div><p>KTOç®—æ³•çš„losså¦‚ä¸‹ï¼š<br>$L_{KTO}(\pi_\theta; \pi_{ref}) &#x3D; E_{(x,y)\sim D}[\lambda_y - v(x,y)]$</p><div align="center">$$v(x,y)=\begin{cases} \lambda_D \sigma(\beta(r_\theta(x,y)-z_0)) & if y \sim y_{desirable}|x \\-\lambda_U \sigma(\beta(z_0 - r_\theta(x,y))) & if y \sim y_{undesirable}|x\end{cases}$$</div>å…¶ä¸­ï¼Œ$z_0 = KL(\pi_\theta(y'|x)||\pi_{ref}(y'|x))$ï¼Œ $r_\theta(x,y)=log \frac{\pi_\theta(y|x)}{\pi_{ref}(y|x)}$<h3 id="4-GRPOç®—æ³•"><a href="#4-GRPOç®—æ³•" class="headerlink" title="4.GRPOç®—æ³•"></a>4.GRPOç®—æ³•</h3><p>åœ¨PPOç®—æ³•ä¸­ï¼Œæ¯ä¸ªæ—¶é—´æ­¥éƒ½æœ‰ä¸€ä¸ªä»·å€¼ç½‘ç»œå»ä¼°è®¡ä¼˜åŠ¿å‡½æ•°ï¼Œè¿™ä½¿å¾—è®­ç»ƒèµ„æºæ¶ˆè€—å·¨å¤§ã€‚ä¸ºäº†å‡å°‘åœ¨post-trainingçš„è¿‡ç¨‹ä¸­å¯¹ä»·å€¼ç½‘ç»œçš„ä¾èµ–ï¼ŒGRPOé‡‡ç”¨â€œåˆ†ç»„è¾“å‡ºç›¸äº’æ¯”è¾ƒâ€çš„æ–¹å¼æ¥ä¼°è®¡åŸºçº¿ï¼Œä»è€Œçœå»Critic Modelã€‚<br><strong>å…³é”®ç‚¹ï¼šåˆ†ç»„é‡‡æ ·ä¸ç›¸å¯¹å¥–åŠ±</strong><br>å¯¹äºä¸€ä¸ªé—®é¢˜qï¼ŒActor Modelä¼šäº§ç”Ÿå¤šä»½è¾“å‡º$o_1,o_2,â€¦,o_G$ï¼Œç„¶åå°†è¿™ç»„è¾“å‡ºä¸€èµ·é€å…¥å¥–åŠ±æ¨¡å‹ï¼Œå¾—åˆ°å¥–åŠ±é›†åˆ$r_1,r_2,â€¦,r_G$ã€‚ç„¶åå¯¹å¥–åŠ±é›†åˆè¿›è¡Œå½’ä¸€åŒ–$\tilde{r_i}&#x3D;(r_i-mean(r))&#x2F;std(r)$ï¼Œä»è€Œå¾—åˆ°åˆ†ç»„å†…çš„ç›¸å¯¹æ°´å¹³ï¼Œå³<strong>ç›¸å¯¹å¥–åŠ±</strong>ã€‚GRPOä¼šå°†ç›¸å¯¹å¥–åŠ±èµ‹ç»™è¯¥è¾“å‡ºå¯¹åº”çš„æ‰€æœ‰tokençš„ä¼˜åŠ¿å‡½æ•°ã€‚å³$\hat{A}_{i,t} &#x3D; \tilde{r_i}$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>è¾“å‡º$o_i$çš„æ‰€æœ‰tokenå…±äº«åŒä¸€ä¸ªåˆ†æ•°</strong>ï¼Œäºæ˜¯æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ— ä»·å€¼ç½‘ç»œçš„ä¼˜åŠ¿å‡½æ•°ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå› ä¸ºä¸å†éœ€è¦åœ¨æ¯ä¸ªtokenä¸Šæ‹Ÿåˆä¸€ä¸ªä»·å€¼å‡½æ•°ï¼ŒGRPOå¯ä»¥å¤§å¹…èŠ‚çœå†…å­˜ã€‚</p><p>ä¸‹é¢ç»™å‡ºGRPOçš„loss function:<br>$L_{GRPO}&#x3D; E[\frac{1}{G}\sum_{i&#x3D;1}^G \frac{1}{||o_i||}\sum_{t&#x3D;1}^{||o_i||} min(\frac{\pi_\theta(o_{i,t}|q,o_{i,&lt;t})}{\pi_{ref}(o_{i,t}|q,o_{i,&lt;t})},clip(\frac{\pi_\theta(o_{i,t}|q,o_{i,&lt;t})}{\pi_{ref}(o_{i,t}|q,o_{i,&lt;t})},1-\epsilon,1+\epsilon)) \cdot \hat{A_{i,t}} -\beta KL(\pi_\theta, \pi_{ref})]$<br><img src="/../article_img/RLHF/img1-2.png" alt="GRPO vs PPO"></p><p>Ques: å¦‚ä½•ä½¿ç”¨GRPOè¿›è¡Œè¿‡ç¨‹ç›‘ç£</p>]]></content>
    
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>RLHF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2025.03è®ºæ–‡é˜…è¯»</title>
    <link href="/2025/04/14/20250414/"/>
    <url>/2025/04/14/20250414/</url>
    
    <content type="html"><![CDATA[<ol><li>ReARTeR: Retrieval-Augmented Reasoning with Trustworthy Process Rewarding<br>åŸºäºè¿‡ç¨‹å¥–åŠ±æ¨¡å‹PRMçš„æ£€ç´¢å¢å¼ºç³»ç»Ÿå­˜åœ¨ä»¥ä¸‹æŒ‘æˆ˜ï¼š<br>ï¼ˆ1ï¼‰ç¼ºä¹è§£é‡Šï¼šç°æœ‰çš„PRMé€šå¸¸ä¼šç”Ÿæˆæ— æ³•è§£é‡Šçš„æ ‡é‡åˆ†æ•° ï¼ˆ2ï¼‰PRMè®­ç»ƒæ•°æ®çš„åˆ†å¸ƒåå·®ï¼šé€šè¿‡è’™ç‰¹å¡æ´›æ ‘æ–¹æ³•æ”¶é›†è¿‡ç¨‹ç›‘ç£æ•°æ®é›†å¾€å¾€ä¼šå¯¼è‡´åˆ†å¸ƒåå·®ï¼Œå…¶ä¸­å¤§å¤šæ•°é—®é¢˜ä¼šè·å¾—ä¸æˆæ¯”ä¾‹çš„é«˜åˆ†ã€‚å› æ­¤ï¼ŒPRMéš¾ä»¥è¯†åˆ«é”™è¯¯çš„æ­¥éª¤ ï¼ˆ3ï¼‰PRMçš„æ—©æœŸæ­¥éª¤åå·®ï¼šç”±äºæ—©æœŸæ­¥éª¤çš„éšæœºæ€§å’Œä¸ç¡®å®šæ€§è¾ƒå¤§ï¼Œä¸æ›´æ¥è¿‘æ¨ç†ç»ˆç‚¹çš„æ­¥éª¤ç›¸æ¯”ï¼ŒPRMåœ¨æ—©æœŸçš„æ¨ç†æ­¥éª¤ä¸­é¢„æµ‹å¥–åŠ±çš„å‡†ç¡®ç‡è¾ƒä½ ï¼ˆ4ï¼‰ç¼ºä¹æ¨ç†ä¼˜åŒ–ï¼šè¿™äº›æ–¹æ³•ä¾èµ–ç°æˆçš„LLMä½œä¸ºç”Ÿæˆå™¨ï¼Œæ²¡æœ‰åœ¨post-trainingé˜¶æ®µåŠ å…¥æ¨ç†ä¼˜åŒ–</li></ol><p>è®ºæ–‡æå‡ºäº†ä¸€ç§<strong>å¯ä¿¡è¿‡ç¨‹å¥–åŠ±æœºåˆ¶</strong>ï¼Œæ¥å¢å¼ºåŸºäºPRMçš„RAGæ¨ç†ã€‚å¯ä¿¡è¿‡ç¨‹å¥–åŠ±é€šè¿‡ä¸¤ç§æ¨¡å‹è¿›è¡Œå®ç°ï¼šï¼ˆ1ï¼‰è¿‡ç¨‹å¥–åŠ±æ¨¡å‹PRMï¼Œä»–æä¾›çš„æ ‡é‡åˆ†æ•°è™½ç„¶å‡†ç¡®ï¼Œä½†ç¼ºä¹å¯è§£é‡Šæ€§ ï¼ˆ2ï¼‰è¿‡ç¨‹è§£é‡Šæ¨¡å‹PEMï¼Œå®ƒä¸ºPRMçš„åˆ†æ•°ç”Ÿæˆè‡ªç„¶è¯­è¨€è§£é‡Šï¼Œæœ‰åŠ©äºä¼˜åŒ–åˆ†æ•°è¾ƒä½çš„æ—©æœŸæ­¥éª¤<br>ä½œè€…åœ¨post-trainingé˜¶æ®µå¼•å…¥äº†æ­¥éª¤çº§ï¼ˆstep-levelï¼‰ç¦»çº¿å¼ºåŒ–å¾®è°ƒï¼Œæ¥å¢å¼ºRAGç³»ç»Ÿçš„æ¨ç†èƒ½åŠ›ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨åŸºäºå¯ä¿¡è¿‡ç¨‹å¥–åŠ±æŒ‡å¯¼çš„è’™ç‰¹å¡æ´›æ ‘æ¥ç”Ÿæˆé«˜è´¨é‡çš„step-levelåå¥½æ•°æ®ï¼Œè¿™äº›æ•°æ®ç”¨äºä¼˜åŒ–æ¨¡å‹ï¼Œä»è€Œæ˜¾è‘—æå‡ç³»ç»Ÿçš„æ¨ç†æ€§èƒ½ã€‚</p><p>ReARTeRçš„ç­–ç•¥æ¨¡å‹$\pi_\theta$åŒ…æ‹¬ä¸€ä¸ªç”Ÿæˆå™¨G(å¯è¿›è¡Œpost-trainingè¿›è¡Œæ¨ç†å¢å¼º)ï¼Œä»¥åŠä¸€ä¸ªæ£€ç´¢å™¨Eã€‚æ­¤å¤–ï¼Œè¿˜ç»“åˆäº†è¿‡ç¨‹å¥–åŠ±æ¨¡å‹Rå’Œè¿‡ç¨‹è§£é‡Šæ¨¡å‹Cã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Recsys</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Syncthingå®‰è£…</title>
    <link href="/2025/03/25/syncthing%E5%AE%89%E8%A3%85/"/>
    <url>/2025/03/25/syncthing%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1ã€ä¸‹è½½æœ€æ–°éƒ¨ç½²åŒ…</span><br>curl -s https://api.github.com/repos/syncthing/syncthing/releases/latest | grep browser_download_url | grep linux-amd64 | <span class="hljs-built_in">cut</span> -d <span class="hljs-string">&#x27;&quot;&#x27;</span> -f 4 | wget -qi -<br><span class="hljs-comment"># 2ã€è§£å‹å¹¶å®‰è£…</span><br>tar -xvf syncthing-linux-amd64-v1.28.1.tar.gz<br><span class="hljs-built_in">mv</span> syncthing-linux-amd64-v1.28.1/syncthing /usr/bin/<br><span class="hljs-comment"># 3ã€å¯åŠ¨å¹¶ä¸”æµ‹è¯•</span><br>syncthing<br></code></pre></td></tr></table></figure><h3 id="å¼€æœºè‡ªå¯"><a href="#å¼€æœºè‡ªå¯" class="headerlink" title="å¼€æœºè‡ªå¯"></a>å¼€æœºè‡ªå¯</h3><p>å¦‚æœè¦ç«‹åˆ»å¯åŠ¨<strong>syncthing</strong>ï¼Œç›´æ¥ä½¿ç”¨å‘½ä»¤ <code>syncthing</code> å³å¯ï¼Œä½†è¿™æ ·è¿è¡Œååˆ†ä¸ä¼˜é›…ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨systemdé…ç½®å¼€æœºè‡ªå¯ã€‚<br>åˆ›å»ºä¸€ä¸ªæ–°çš„ systemd æœåŠ¡æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano /etc/systemd/system/syncthing.service<br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=Syncthing - Open Source Continuous File Synchronization<br><span class="hljs-attr">After</span>=work.target<br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">User</span>=&lt;your_user_name&gt;<br><span class="hljs-attr">ExecStart</span>=/usr/bin/syncthing -<span class="hljs-literal">no</span>-browser -<span class="hljs-literal">no</span>-restart -logflags=<span class="hljs-number">0</span><br><span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure<br><span class="hljs-attr">SuessExitStatus</span>=<span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-attr">RestartForceExitStatus</span>=<span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br></code></pre></td></tr></table></figure><p>åœ¨Userå¤„å¡«ä¸Šç”¨æˆ·åï¼Œç„¶åé‡å¯systemd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br>systemctl --user restart syncthing<br>systemctl --user status syncthing<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰syncthingè¿›ç¨‹åˆ¤æ–­æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š <code>ps aux | grep syncthing</code></p><h3 id="æœ¬åœ°ç½‘ç»œè®¿é—®"><a href="#æœ¬åœ°ç½‘ç»œè®¿é—®" class="headerlink" title="æœ¬åœ°ç½‘ç»œè®¿é—®"></a>æœ¬åœ°ç½‘ç»œè®¿é—®</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSyncthing çš„ Web GUI åªç›‘å¬ localhost:8384ï¼Œæ‰€ä»¥å¦‚æœåœ¨æœ¬åœ°ç½‘ç»œè®¿é—®è¿œç¨‹æœåŠ¡å™¨çš„syncthingæœåŠ¡ï¼Œéœ€è¦ä¿®æ”¹ç›‘å¬åœ°å€</p><ol><li>ç¼–è¾‘é…ç½®æ–‡ä»¶<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nano ~/.config/syncthing/config.xml<br></code></pre></td></tr></table></figure>å¦‚æœä¸çŸ¥é“syncthingçš„ä½ç½®çš„è¯ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>syncthing -paths</code>æ‰¾åˆ° <code>config.xml</code> è¿™é¡¹</li><li>æ‰¾åˆ°<code>&lt;gui&gt;</code>èŠ‚ç‚¹ï¼Œä¿®æ”¹å…¶ä¸­çš„ address å­—æ®µï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">gui</span> <span class="hljs-attr">enabled</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">tls</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">address</span>&gt;</span>0.0.0.0:8384<span class="hljs-tag">&lt;/<span class="hljs-name">address</span>&gt;</span>   <span class="hljs-comment">&lt;!-- â† è¿™é‡Œæ”¹æˆ 0.0.0.0 è¡¨ç¤ºç›‘å¬æ‰€æœ‰åœ°å€ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">apikey</span>&gt;</span>ä½ çš„apikey<span class="hljs-tag">&lt;/<span class="hljs-name">apikey</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">user</span>&gt;</span>ç”¨æˆ·å<span class="hljs-tag">&lt;/<span class="hljs-name">user</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>å¯†ç ï¼ˆBase64ç¼–ç ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">gui</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Tool</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ ç³»åˆ—ï¼ˆäº”ï¼‰ï¼šPolicy Gradient</title>
    <link href="/2025/03/15/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%94%EF%BC%89/"/>
    <url>/2025/03/15/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%94%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼šå‰é¢æ‰€æåˆ°çš„Q-value Basedæ–¹æ³•æ— æ³•è§£å†³è¿ç»­åŠ¨ä½œç©ºé—´åœºæ™¯ä¸‹çš„ä¼˜åŒ–é—®é¢˜ï¼Œå› ä¸ºQ-learningçš„ç­–ç•¥æ˜¯ä»å¤šä¸ªç¦»æ•£åŠ¨ä½œä¸­è´ªå©ªåœ°é€‰æ‹©æœ€å¤§Qå€¼ï¼Œåœ¨è¿ç»­ç©ºé—´ä¸­ï¼Œæ— æ³•æšä¸¾æ‰€æœ‰åŠ¨ä½œã€‚ä¸ºæ­¤ï¼Œæœ¬èŠ‚è®²è¿°ä¸€ç§<strong>ç›´æ¥é¢å‘ç­–ç•¥</strong>çš„ä¼˜åŒ–æ–¹æ³•ï¼šPolicy Gradient</p><span id="more"></span><h3 id="1-Policy-Gradient"><a href="#1-Policy-Gradient" class="headerlink" title="1. Policy Gradient"></a>1. Policy Gradient</h3><p>è®­ç»ƒç›®æ ‡ï¼š$\pi_\theta(s,a)&#x3D;P[a|s,\theta]$<br>Ques: ä»€ä¹ˆæ ·çš„ç­–ç•¥ç®—æ˜¯å¥½çš„ç­–ç•¥,å¦‚ä½•è¿›è¡Œæ¢¯åº¦æ›´æ–°<br>Ans:<br><code>think</code> $\theta$ä¼šå½±å“ç­–ç•¥$\pi$,$\pi$ä¼šå½±å“episodeé‡‡æ ·è·¯å¾„$\tau&#x3D;{s_1,a_1,r_1,s_2,a_2,r_2,â€¦,s_T,a_T,r_T}$ï¼Œæ ¹æ®$\tau$, æˆ‘ä»¬å¯ä»¥ç®—å‡º$R(\tau)&#x3D;\sum_{n&#x3D;1}^N r_n$ï¼Œæˆ‘ä»¬å¸Œæœ›é‡‡æ ·è·¯å¾„çš„$R(\tau)$å°½å¯èƒ½çš„å¤§<br><code>method</code><br>ç”¨é‡‡æ ·è·¯å¾„çš„å¹³å‡æ”¶ç›Šæ¥è¯„ä»·ä¸€ä¸ª$\theta$çš„å¥½å<br>$\bar R_\theta &#x3D; \sum_{\tau} R(\tau) \cdot P(\tau|\theta) \approx \frac{1}{N} \sum_{n&#x3D;1}^{N} R(\tau^n)$<br>æ¨å¯¼$\bar R_\theta$çš„æ¢¯åº¦:<br>$$\nabla \bar R_\theta&#x3D;\sum_\tau R(\tau) \nabla P(\tau|\theta)&#x3D;\sum_\tau R(\tau)P(\tau|\theta) \frac{\nabla P(\tau|\theta)}{P(\tau|\theta)}&#x3D;<br>\sum_\tau R(\tau)P(\tau|\theta)\nabla logP(\tau|\theta) \approx \frac{1}{N}\sum_{n&#x3D;1}^N R(\tau^n) \nabla log P(\tau^n|\theta)$$<br>å…¶ä¸­ï¼Œ$P(\tau|\theta)&#x3D;p(s_1)p(a_1|s_1,\theta)p(r_1,s_2|s_1,a_1)p(a_2|s_2,\theta)â€¦$<br>ç”±æ­¤ï¼Œæˆ‘ä»¬æœ‰ï¼š$log P(\tau|\theta)&#x3D;logp(s_1)+\sum_{t&#x3D;1}^Tlogp(a_t|s_t,\theta)+logp(r_t,s_{t+1}|s_t,a_t)$<br>$\nabla logP(\tau|\theta)&#x3D;\sum_{t&#x3D;1}^T\nabla logp(a_t|s_t, \theta)$<br>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†policy gradientè§†ä¸ºä¸€ä¸ªåˆ†ç±»ä»»åŠ¡å¯¹$\nabla \bar R_\theta$è¿›è¡Œæ›´æ–°<br><img src="/../article_img/Reinforcement/img5-2.png" alt="Gradient Descent"><br>ç±»æ¯”åˆ†ç±»ä»»åŠ¡ï¼š<br><img src="/../article_img/Reinforcement/img5-1.png" alt="Classification Task"></p><h3 id="2-Actor-Critic"><a href="#2-Actor-Critic" class="headerlink" title="2. Actor-Critic"></a>2. Actor-Critic</h3><p>åœ¨Policy Gradientæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åœ¨æ›´æ–°$\nabla \bar R_\theta$æ—¶ï¼Œå€ŸåŠ©ç´¯è®¡æ”¶ç›Š$R(\tau^n)$ä½œä¸ºä¼˜åŠ¿ä¼°è®¡ï¼Œç„¶è€Œåœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œè™½ç„¶$R(\tau^n)$æ˜¯positiveçš„ï¼Œä½†æ˜¯æ•ˆç›Šè¿˜æ¯”ä¸è¿‡éšæœºæ•ˆç›Šçš„è¯ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸èƒ½æ¥å—çš„ã€‚å› æ­¤ï¼Œéœ€è¦add a baselineå»è¿›ä¸€æ­¥è¯„ä¼°positive or negtiveï¼Œä»è€Œæ›´å¥½åœ°æŒ‡å¯¼$\nabla logP(\tau|\theta)$çš„æ›´æ–°</p><p>æ ¸å¿ƒæ€æƒ³ï¼š<br>ï¼ˆ1ï¼‰Actor:å­¦ä¹ ç­–ç•¥$\pi_\theta(a|s)$ï¼Œè´Ÿè´£å†³ç­–<br>ï¼ˆ2ï¼‰Critic:å­¦ä¹ ä¸€ä¸ªä»·å€¼å‡½æ•° $V_w(s)$ï¼Œä¼°è®¡çŠ¶æ€çš„â€œå¥½åâ€ï¼ŒæŒ‡å¯¼ Actor æ”¹è¿›ç­–ç•¥</p><p>æ¢¯åº¦æ›´æ–°ï¼š<br>$$\nabla \bar R_\theta \approx \frac{1}{N}\sum_{n&#x3D;1}^{N}\sum_{t&#x3D;1}^{T_n}(R_\tau^n-baseline) \nabla log P_\theta(a_t^n|s_t^n)$$<br>å…¶ä¸­$R_\tau^n$å¯ä»¥è¡¨ç¤ºä¸º$E[G_t^n]&#x3D;Q^{\pi_\theta}(s_t^n,a_t^n)$ï¼Œbaselineè¡¨ç¤ºä¸º$V^{\pi_\theta}(s_t^n)$</p><p>Ques: éœ€è¦estimate Qå’ŒVä¸¤ä¸ªç½‘ç»œå—<br>Ans: å¯ä»¥åªestimate value network<br>åˆ©ç”¨$Q^{\pi_\theta}(s_t^n,a_t^n)&#x3D;E[r_t^n + V^{\pi_\theta}(s_{t+1}^n)] \approx r_t^n + V^{\pi_\theta}(s_{t+1}^n)$<br>æˆ‘ä»¬å¯ä»¥å¾—åˆ°<strong>Advantage Function</strong>ï¼š$Q^{\pi_\theta}(s_t^n,a_t^n)-V^{\pi_\theta}(s_t^n)&#x3D;r_t^n - (V^{\pi_\theta}(s_t^n)-V^{\pi_\theta}(s_{t+1}^n))$</p><h3 id="summary"><a href="#summary" class="headerlink" title="summary"></a>summary</h3><p><img src="/../article_img/Reinforcement/img5-5.png" alt="summary"></p>]]></content>
    
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ ç³»åˆ—ï¼ˆå››ï¼‰ï¼šDQNç®—æ³•</title>
    <link href="/2025/03/14/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
    <url>/2025/03/14/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼šå‰é¢è®²è§£äº†åœ¨On-Policyå’ŒOff-Policyç¯å¢ƒä¸‹å¦‚ä½•è¿›è¡Œç­–ç•¥æå‡çš„å‡ ç§å¸¸ç”¨æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œstateçš„æ•°é‡å¯èƒ½æ˜¯éå¸¸åºå¤§çš„ï¼Œä¸ºäº†å­˜å‚¨æ¯ä¸ªstate-action pairæ‰€éœ€è¦çš„lookup-tableæ‰€éœ€è¦çš„ç©ºé—´ä¼šå¾ˆåºå¤§ï¼Œæ— æ³•é€šè¿‡éå†çš„æ–¹å¼å»evaluateæ¯ä¸ªstate-action pairã€‚è¿™å°±éœ€è¦æˆ‘ä»¬è€ƒè™‘å¦‚ä½•å¯¹Qï¼ŒVè¿›è¡Œå»ºæ¨¡ï¼Œé€šè¿‡å‡½æ•°é€¼è¿‘çš„æ–¹æ³•ä¼°è®¡è¿ç»­ç©ºé—´ä¸‹çš„state value</p><span id="more"></span><h3 id="1-Value-Approximation"><a href="#1-Value-Approximation" class="headerlink" title="1. Value Approximation"></a>1. Value Approximation</h3><p>Target: å¯»æ‰¾åˆ°åˆé€‚çš„å‚æ•°wä½¿å¾—mse losså°½å¯èƒ½çš„å°  $J(w)&#x3D;E_\pi[(v_\pi(S)-\hat{v}(S,w))^2]$<br>é€šè¿‡æ¢¯åº¦ä¸‹é™æ¥æ›´æ–°w: $\Delta w&#x3D;-\frac{1}{2}\alpha \nabla_w J(w)&#x3D;\alpha(v_\pi(S)-\hat{v}(S,w))\nabla_w\hat{v}(S_t,w)$</p><p>ä½¿ç”¨ç‰¹å¾å‘é‡è¡¨ç¤ºstate $x(S)&#x3D;(x_1(S)â€¦x_n(S))$<br>$\hat{v}(S_t,w)$å¯ä»¥é€šè¿‡çº¿æ€§åŠ æƒå¾—åˆ°ï¼Œå³$\hat{v}(S,w)&#x3D;x(S)^Tw&#x3D;\sum_{j&#x3D;1}^n x_j(S)w_j$ </p><p>äºæ˜¯æˆ‘ä»¬ä¾¿æœ‰ï¼š$\Delta w&#x3D;\alpha(v_\pi(S)-\hat{v}(S_t,w))x(S)$</p><p>ç°åœ¨æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¦‚ä½•å¾—åˆ°$v_\pi(S)$çš„çœŸå®è¡¨ç¤ºï¼Ÿä¾ç„¶æ˜¯é‡‡ç”¨MC&#x2F;TDç­‰æ–¹æ³•è¿›è¡Œæ³›åŒ–ä¼°è®¡<br>MC: $\Delta w&#x3D;\alpha(G_t-\hat{v}(S,w))\nabla_w\hat{v}(S_t,w)$<br>TD(0): $\Delta w&#x3D;\alpha(R_{t+1}+\gamma\hat{v}(S_{t+1},w)-\hat{v}(S_t,w))\nabla_w\hat{v}(S_t,w)$</p><h3 id="2-Replay-Buffer"><a href="#2-Replay-Buffer" class="headerlink" title="2. Replay Buffer"></a>2. Replay Buffer</h3><p>replay bufferæ˜¯ä¸€ä¸ª <strong>å­˜å‚¨æ™ºèƒ½ä½“äº¤äº’ç»éªŒ</strong> çš„æ•°æ®ç»“æ„ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªé˜Ÿåˆ—æˆ–æ•°ç»„ï¼‰ï¼Œç”¨æ¥ä¿å­˜æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’çš„è½¨è¿¹æ ·æœ¬ï¼š$(S_t, A_t, S_{t+1}, A_{t+1}, <code>done</code>)$<br>âœ… æ‰“ç ´æ—¶é—´ç›¸å…³æ€§ (Break Correlation)<br>å¼ºåŒ–å­¦ä¹ ä¸­çš„æ•°æ®æ˜¯æŒ‰æ—¶é—´é¡ºåºç”Ÿæˆçš„ï¼Œå½¼æ­¤é«˜åº¦ç›¸å…³ã€‚Replay Bufferè®©æˆ‘ä»¬ä»è¿‡å»çš„ç»éªŒä¸­éšæœºé‡‡æ ·ï¼Œæ‰“ä¹±æ•°æ®é¡ºåºï¼Œé™ä½ç›¸å…³æ€§ï¼Œæå‡è®­ç»ƒç¨³å®šæ€§ã€‚</p><p>âœ… æé«˜æ•°æ®åˆ©ç”¨ç‡ (Improve Data Efficiency)<br>æ¯æ¬¡äº¤äº’ç”Ÿæˆçš„æ•°æ®å¦‚æœåªç”¨ä¸€æ¬¡å°±ä¸¢æ‰ï¼Œæ•ˆç‡å¤ªä½äº†ã€‚Replay Bufferè®©æ•°æ®èƒ½è¢«å¤šæ¬¡å¤ç”¨ï¼Œå¤§å¤§æé«˜è®­ç»ƒæ•ˆç‡ã€‚</p><p>âœ… å¹³æ»‘è®­ç»ƒ (Smooth Training)<br>ç¼“å†²åŒºé‡Œçš„ç»éªŒåŒ…æ‹¬æˆåŠŸå’Œå¤±è´¥çš„å¤šç§åœºæ™¯ï¼Œé˜²æ­¢æ¨¡å‹è¢«æœ€è¿‘çš„å‡ æ¬¡å¤±è´¥ç»éªŒâ€œè¯¯å¯¼â€å¾—å¤ªä¸¥é‡ã€‚</p><p>âœ… æ”¯æŒ Off-Policy å­¦ä¹ <br>DQN æ˜¯ Off-Policy ç®—æ³•ï¼Œç›®æ ‡ç­–ç•¥æ˜¯è´ªå©ªç­–ç•¥ï¼Œè¡Œä¸ºç­–ç•¥æ˜¯<strong>Ïµ-greedy</strong>ã€‚Replay Bufferè®©æˆ‘ä»¬ä»è¿‡å»çš„ç»éªŒä¸­è®­ç»ƒï¼Œä¸å¿…è·Ÿå½“å‰è¡Œä¸ºç­–ç•¥ä¸¥æ ¼åŒ¹é…ã€‚</p><h3 id="3-DQNç®—æ³•"><a href="#3-DQNç®—æ³•" class="headerlink" title="3. DQNç®—æ³•"></a>3. DQNç®—æ³•</h3><p>DQNç®—æ³•æ˜¯ç»“åˆäº†Q-Learningå’Œæ·±åº¦ç¥ç»ç½‘ç»œçš„å¼ºåŒ–å­¦ä¹ ç®—æ³•ã€‚å®ƒç”¨æ·±åº¦ç¥ç»ç½‘ç»œæ›¿ä»£ä¼ ç»Ÿçš„Qè¡¨æ ¼ï¼Œè¿‘ä¼¼çš„å­¦ä¹ Qå€¼å‡½æ•°ï¼š$Q(s,a;\theta) \approx Q*(s,a)$<br>ä¸‹é¢å¯¹è¯¥ç®—æ³•è¿›è¡Œä»‹ç»ï¼š<br>ï¼ˆ1ï¼‰ç»éªŒå›æ”¾ï¼ˆExperience Replayï¼‰<br>åœ¨ä¼ ç»ŸQ-Learningä¸­ï¼Œæ¯æ¬¡è®­ç»ƒéƒ½ç”¨æœ€æ–°çš„æ•°æ®æ›´æ–°Qå€¼ï¼Œå¯èƒ½å¯¼è‡´ç½‘ç»œè¿‡æ‹Ÿåˆæœ€è¿‘çš„ç»éªŒï¼Œæ”¶æ•›ä¸ç¨³å®šã€‚<br>DQNå¼•å…¥ç»éªŒå›æ”¾æœºåˆ¶ï¼Œå°†æ¯æ¬¡ç»å† (s, a, r, sâ€™) ä¿å­˜åˆ°å›æ”¾ç¼“å†²æ± ï¼ˆReplay Bufferï¼‰ï¼Œæ¯æ¬¡è®­ç»ƒæ—¶éšæœºé‡‡æ ·ä¸€æ‰¹æ•°æ®è¿›è¡Œè®­ç»ƒã€‚<br>ï¼ˆ2ï¼‰ç›®æ ‡ç½‘ç»œï¼ˆTarget Networkï¼‰<br>DQNä½¿ç”¨<strong>åœ¨çº¿ç½‘ç»œ</strong>å’Œ<strong>ç›®æ ‡ç½‘ç»œ</strong>ä¸¤ä¸ªç½‘ç»œï¼Œå‰è€…ç”¨äºå®æ—¶æ›´æ–°ï¼Œè¾“å‡º$Q(s,a;\theta)$;åè€…æ¯éš”ä¸€æ®µæ—¶é—´èµ‹å€¼åœ¨çº¿ç½‘ç»œå‚æ•°$\theta$åˆ°ç›®æ ‡ç½‘ç»œ$\thetaâ€™$ï¼Œè¾“å‡º$Q(sâ€™,aâ€™;\thetaâ€™)$<br>ç›®æ ‡ç½‘ç»œçš„Qå€¼ç”¨ä½œè®­ç»ƒçš„ç›®æ ‡ï¼š $Loss&#x3D;(r + \gamma max_{aâ€™}Q(sâ€™,aâ€™;\thetaâ€™)-Q(s,a;\theta))^2$<br><img src="/../article_img/Reinforcement/img4-1.png" alt="DQN framework"><br>ï¼ˆ3ï¼‰ä½¿ç”¨Epsilon Greedyç­–ç•¥åœ¨æ¢ç´¢ä¸åˆ©ç”¨ä¹‹é—´åšæƒè¡¡</p><p>ä¸‹é¢ç»™å‡ºDQNç®—æ³•çš„ä¼ªä»£ç ï¼š<br><img src="/../article_img/Reinforcement/img4-2.png" alt="DQN Algorithm"></p><p>Ques: DQNç½‘ç»œå¦‚ä½•å®ç°ç«¯åˆ°ç«¯çš„å­¦ä¹ <br>Ans: ä¸­é—´å±‚æ˜¯å¸¸è§„çš„å·ç§¯ç½‘ç»œç”¨æ¥å­¦ä¹ stateè¡¨å¾ï¼Œè¾“å‡ºå±‚é€šè¿‡æ˜ å°„åˆ°ä¸€ä¸ªoutputç©ºé—´ï¼Œå®šä¹‰æ¯ä¸ªç»´åº¦ä»£è¡¨ä¸€ä¸ªvalue</p><h3 id="4-DQNç®—æ³•çš„å»¶ä¼¸"><a href="#4-DQNç®—æ³•çš„å»¶ä¼¸" class="headerlink" title="4. DQNç®—æ³•çš„å»¶ä¼¸"></a>4. DQNç®—æ³•çš„å»¶ä¼¸</h3><h4 id="Double-DQN"><a href="#Double-DQN" class="headerlink" title="Double DQN"></a>Double DQN</h4><p>DQNç®—æ³•å­˜åœ¨çš„é—®é¢˜ï¼šä½¿ç”¨åŒä¸€ä¸ªç½‘ç»œæ—¢é€‰æ‹©åŠ¨ä½œåˆè¯„ä¼°ä»·å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´over estimateçš„é—®é¢˜<br>æ”¹è¿›æ–¹æ¡ˆï¼š$Q(s_t,a_t) \leftarrow r_t + Qâ€™(s_{t+1}, argmax_a Q(s_{t+1}ï¼Œa))$ å†…å±‚çš„Qç”¨æ¥é€‰æ‹©actionï¼Œå¤–å±‚çš„Qç”¨æ¥è¯„ä¼°ä»·å€¼</p><h4 id="Dueling-DQN"><a href="#Dueling-DQN" class="headerlink" title="Dueling DQN"></a>Dueling DQN</h4><p>DQNç®—æ³•å­˜åœ¨çš„é—®é¢˜ï¼šåœ¨å¾ˆå¤šçŠ¶æ€ä¸‹ï¼ŒåŠ¨ä½œçš„ä»·å€¼å·®åˆ«ä¸å¤§ã€‚æ¯”å¦‚ï¼šæ¸¸æˆä¸­ç«™åœ¨åŸåœ°ç­‰å¾… vs éšä¾¿èµ°ä¸€æ­¥ è¿™ç§æƒ…å†µä¸‹ï¼ŒDQNä»ç„¶å¿…é¡»ç»™æ¯ä¸ªåŠ¨ä½œå•ç‹¬ä¼°è®¡ Q å€¼ï¼Œæµªè´¹äº†å¤§é‡å­¦ä¹ èƒ½åŠ›ï¼Œå¯¼è‡´è®­ç»ƒæ•ˆç‡ä¸‹é™ã€‚<br>Dueling DQNçš„æ ¸å¿ƒæ€æƒ³ï¼šå°†Qå€¼åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œ<strong>çŠ¶æ€å€¼å‡½æ•° V(s)ï¼š</strong>æè¿°å½“å‰çŠ¶æ€æœ¬èº«çš„â€œå¥½åâ€ <strong>ä¼˜åŠ¿å‡½æ•° A(s, a)ï¼š</strong>æè¿°æŸä¸ªå…·ä½“åŠ¨ä½œæ¯”å…¶ä»–åŠ¨ä½œå¥½å¤šå°‘<br>äºæ˜¯ï¼Œæˆ‘ä»¬ä¾¿æœ‰ï¼š$Q(s,a)&#x3D;V(s)+A(s,a)$<br>ä¼˜ç‚¹ï¼šçŠ¶æ€ä»·å€¼ä¸»å¯¼è®­ç»ƒï¼Œä¸ç”¨æ¯æ¬¡éƒ½ç®—æ‰€æœ‰åŠ¨ä½œï¼›æ›´é«˜æ•ˆåœ°å­¦ä¹ ï¼Œå°¤å…¶åœ¨åŠ¨ä½œå¤šã€åŠ¨ä½œå·®åˆ«å°çš„åœºæ™¯ï¼›æ”¶æ•›æ›´å¿«ï¼Œæ€§èƒ½æ›´å¥½<br><img src="/../article_img/Reinforcement/img4-3.png" alt="Dueling DQN"></p><h4 id="Batch-Constraint-DQN-BCQ"><a href="#Batch-Constraint-DQN-BCQ" class="headerlink" title="Batch-Constraint DQN(BCQ)"></a>Batch-Constraint DQN(BCQ)</h4><p>DQNç®—æ³•å­˜åœ¨çš„å¤–æ¨è¯¯å·®ï¼ˆextrapolation errorï¼‰é—®é¢˜ï¼šQç½‘ç»œåœ¨æ²¡è§è¿‡çš„state-action pairä¸Šä¼šover estimate Qå€¼<br>é—®é¢˜çš„æ ¹æºåœ¨äºï¼š<strong>æœ‰é™çš„æ•°æ®é›†ï¼š</strong>è®­ç»ƒæ•°æ®æ— æ³•è¦†ç›–æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€-åŠ¨ä½œå¯¹ã€‚<strong>ç›®æ ‡ç½‘ç»œå»¶è¿Ÿæ›´æ–°ï¼š</strong>ç›®æ ‡ Q å€¼ç”¨çš„æ˜¯æ—§ç½‘ç»œï¼ˆå»¶è¿Ÿæ›´æ–°ï¼‰ï¼Œå¯èƒ½ä¸å‡†ç¡®ã€‚<strong>æœ€å¤§åŒ–æ“ä½œå¸¦æ¥çš„åå·®ï¼š</strong>maxQ å€¾å‘äºé€‰æ›´é«˜ä¼°çš„å€¼ã€‚<br>æ ¸å¿ƒæ€æƒ³ï¼šå°½å¯èƒ½è®©agent actionå’Œbatchä¸­sample actionäº§ç”Ÿçš„ç»“æœç›¸è¿‘ï¼Œå³<strong>çº¦æŸç­–ç•¥ä¸è¦åç¦»å·²æ”¶é›†çš„æ•°æ®åˆ†å¸ƒï¼ŒåŒæ—¶æœ€å¤§åŒ–å›æŠ¥</strong></p><p>ä¸‹é¢ç»™å‡ºBCQç®—æ³•çš„ä¼ªä»£ç ï¼š<br><img src="/../article_img/Reinforcement/img4-4.png" alt="BCQ Algorithm"><br>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¡Œä¸ºé€‰æ‹©æ—¶ï¼Œé™¤äº†è€ƒè™‘é«˜Qå€¼ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›å®ƒèƒ½å¤Ÿæ¥è¿‘æ•°æ®åˆ†å¸ƒçš„actionï¼Œä¼ªä»£ç çš„ç¬¬5è¡Œä¸­æˆ‘ä»¬é€šè¿‡è®¾å®šé˜ˆå€¼çš„æ–¹å¼ç­›é€‰æ‰äº†ä¸€äº›å‘ç”Ÿæ¦‚ç‡è¾ƒä½çš„action</p><h4 id="Distributional-Q-function"><a href="#Distributional-Q-function" class="headerlink" title="Distributional Q-function"></a>Distributional Q-function</h4><p>DQNç®—æ³•å­˜åœ¨çš„é—®é¢˜ï¼šåœ¨DQNä¸­ï¼Œæˆ‘ä»¬å­¦çš„æ˜¯Qå€¼çš„æœŸæœ›ï¼Œ$Q(s,a)&#x3D;E[R(s,a)]$ ä½†é—®é¢˜æ˜¯ï¼ŒæœŸæœ›å€¼æ— æ³•æè¿°å¥–åŠ±çš„ä¸ç¡®å®šæ€§å’Œæ³¢åŠ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒDQN åªå­¦åˆ°äº†å¹³å‡å›æŠ¥ï¼Œæ²¡å­¦åˆ°â€œå›æŠ¥çš„åˆ†å¸ƒæƒ…å†µâ€ã€‚<br>ğŸ‘‰ ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾æœ‰ä¸¤ä¸ªåŠ¨ä½œ$a_1$å’Œ$a_2$ï¼Œå®ƒä»¬çš„æœŸæœ›å›æŠ¥éƒ½æ˜¯ 10ã€‚$a_1$çš„å›æŠ¥æ˜¯ [10, 10, 10]ï¼Œéå¸¸ç¨³å®šã€‚$a_2$çš„å›æŠ¥æ˜¯ [0, 10, 20]ï¼Œæ³¢åŠ¨å¾ˆå¤§ã€‚ä¼ ç»Ÿ DQN è®¤ä¸ºå®ƒä¿©ä¸€æ ·å¥½ï¼Œä½†æ˜¾ç„¶$a_1$æ›´å¯é <br>æ ¸å¿ƒè§‚ç‚¹ï¼šå­¦ä¹ å›æŠ¥çš„â€œå®Œæ•´åˆ†å¸ƒâ€ $Q(s,a)&#x3D;E[Z(s,a)]$ è¿™é‡Œçš„Z(s,a)ä¸ºä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒ<br>stepï¼šå®šä¹‰å›æŠ¥èŒƒå›´$[v_min,v_max]$,åˆ’åˆ†ä¸ºnä¸ªå°åŒºé—´ï¼›å­¦ä¹ æ¯ä¸ªbinçš„æ¦‚ç‡$p_i$,å½¢æˆä¸€ä¸ªå›æŠ¥çš„ç¦»æ•£åˆ†å¸ƒï¼›è®­ç»ƒç›®æ ‡å˜æˆè®©ç½‘ç»œé¢„æµ‹æ•´ä¸ªåˆ†å¸ƒï¼Œè€Œä¸æ˜¯å•ä¸€Qå€¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ ç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šModel-Free Control</title>
    <link href="/2025/03/12/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <url>/2025/03/12/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼šç³»åˆ—äºŒä¸­æåŠçš„MC&#x2F;TDæ–¹æ³•éƒ½æ˜¯åœ¨å·²çŸ¥ç­–ç•¥$\pi$çš„å‰æä¸‹ï¼Œä¼°è®¡æ¯ä¸ªçŠ¶æ€çš„æœŸæœ›å›æŠ¥ã€‚å‰è€…æ˜¯ç­‰åˆ°æ•´ä¸ªå›åˆç»“æŸåˆ©ç”¨å®Œæ•´å›æŠ¥$G_t$æ¥æ›´æ–°ä»·å€¼å‡½æ•°,åè€…åˆ©ç”¨ä¸€æ­¥é¢„æµ‹å’Œå½“å‰å¥–åŠ±åŠ¨æ€æ›´æ–°ä»·å€¼å‡½æ•°ã€‚å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œè¿™äº›æ–¹æ³•çŸ¥è¯†å­¦ä¹ äº†ä»·å€¼å‡½æ•°ï¼Œå¹¶æ²¡æœ‰æ”¹å˜ç­–ç•¥ã€‚åœ¨è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ç­–ç•¥ä¼˜åŒ–æ–¹æ³•ã€‚</p><span id="more"></span><h3 id="1-Epsilon-Greedy"><a href="#1-Epsilon-Greedy" class="headerlink" title="1. Epsilon Greedy"></a>1. Epsilon Greedy</h3><p>åœ¨Model-based Controlä¸­ï¼Œæˆ‘ä»¬åŸºäºMDP Transitioné‡‡ç”¨è´ªå¿ƒç­–ç•¥è¿›è¡Œpolicy improvementï¼š$\piâ€™(s)&#x3D;argmax_{a \in A}R_s^a + P_{ssâ€™}^aV(sâ€™)$<br>åœ¨Model-freeèƒŒæ™¯ä¸‹ï¼Œç”±äºç¼ºå¤±MDP Transitionï¼Œå¾€å¾€é‡‡ç”¨å¯¹è¡Œä¸ºä»·å€¼å‡½æ•°Q(s,a)è¿›è¡Œå»ºæ¨¡: $\piâ€™(s)&#x3D;argmax_{a \in A}Q(s,a)$<br>è¿™é‡Œä»‹ç»ä¸€ä¸ªå¸¸ç”¨çš„è´ªå¿ƒç­–ç•¥Epsilon Greedyï¼š</p><div align="center">$$\pi(a|s) =\begin{cases} \frac{\epsilon}{m} + 1 - \epsilon & \text{if } a = \arg\max\limits_{a \in A} Q(s,a) \\\frac{\epsilon}{m} & \text{otherwise}\end{cases}$$</div>why to search bad state: é¿å…å±€éƒ¨æœ€ä¼˜è§£ï¼Œé€šè¿‡å¢åŠ å¯¹ä¸è‰¯çŠ¶æ€çš„æ¢ç´¢ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿå…¨é¢åœ°äº†è§£ç¯å¢ƒï¼Œå‘ç°å¯èƒ½è¢«å¿½ç•¥çš„æ½œåœ¨æœºä¼šï¼Œè¿›è€Œæå‡æ•´ä½“ç­–ç•¥çš„è´¨é‡ã€‚<p>&lt;å®šä¹‰&gt;Greedy in the limit with infinite exploration(GLIE)<br>éšç€æ—¶é—´çš„æ¨è¿›ï¼Œç­–ç•¥æœ€ç»ˆæ”¶æ•›åˆ°çº¯è´ªå©ªç­–ç•¥ï¼›åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€å’ŒåŠ¨ä½œéƒ½è¦è¢«æ¢ç´¢æ— é™æ¬¡ï¼Œç¡®ä¿è·å¾—å……åˆ†çš„ä¿¡æ¯æ¥è¯„ä¼°æ‰€æœ‰å¯èƒ½çš„åŠ¨ä½œã€‚<br>å³GLIEè¦æ±‚ç­–ç•¥$\pi_t$æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š<br>(1) $lim_{k-&gt;\infty}N_k(s,a)&#x3D;\infty$<br>(2) $lim_{k-&gt;\infty}\pi_k(a|s)&#x3D;1(a&#x3D;argmax_{aâ€™ \in A}Q_k(s,aâ€™))$</p><p>GLIEçš„æ„ä¹‰ï¼šï¼ˆ1ï¼‰ä¿è¯æ”¶æ•› ï¼ˆ2ï¼‰é¿å…å±€éƒ¨æœ€ä¼˜</p><p>Epsilon Greedyæ»¡è¶³GLIEï¼šåœ¨æ¢ç´¢çš„è¿‡ç¨‹ä¸­é€æ¸å‡å°‘æ¢ç´¢ç‡$\epsilon$ï¼Œä¾‹å¦‚$\epsilon_t&#x3D;1&#x2F;t$</p><p>ä¸‹é¢ä»‹ç»ä¸‹$\epsilon$-Greedyä¸Monte-Carloç»“åˆçš„Controlæ–¹æ³•ï¼š<br>(1) ä½¿ç”¨å½“å‰ç­–ç•¥$\pi$ä¸ç¯å¢ƒè¿›è¡Œç¬¬kæ¬¡å®Œæ•´äº¤äº’(kth episode)å¾—åˆ°é‡‡æ ·æ•°æ®ï¼š ${S_1,A_1,R_2,â€¦,,S_T} \sim \pi$<br>(2) ä½¿ç”¨MCæ–¹æ³•å¯¹è¿›è¡ŒQå€¼æ›´æ–°ï¼š$N(S_t,A_t) \leftarrow N(S_t,A_t) + 1$, $Q(S_t, A_t) \leftarrow Q(S_t,A_t) + \frac{1}{N(S_t,A_t)}(G_t - Q(S_t, A_t))$<br>(3) åŸºäº\epsilon-Greedyè¿›è¡Œç­–ç•¥æå‡ï¼š$\epsilon \leftarrow 1&#x2F;k$, $\pi \leftarrow \epsilon-greedy(Q)$</p><h3 id="2-SARSA"><a href="#2-SARSA" class="headerlink" title="2. SARSA"></a>2. SARSA</h3><p>å°†TDæ–¹æ³•å’ŒGLIEç»“åˆçš„Controlæ–¹æ³•æˆ‘ä»¬ç§°å…¶ä¸ºSARSAã€‚<br><img src="/../article_img/Reinforcement/img3-1.png" alt="SARSA"><br>ä¸‹é¢æ˜¯SARSAè¿›è¡ŒQå€¼æ›´æ–°å’Œç­–ç•¥æå‡çš„ä¼ªä»£ç :<br><img src="/../article_img/Reinforcement/img3-2.png" alt="SARSA Algorithm"></p><p>n-step SARSA:<br>$q_t^{(n)}&#x3D;R_{t+1} + \gamma R_{t+2} + â€¦ + \gamma^{n-1}R_{t+n} + \gamma^n Q(S_{t+n})$<br>$Q(S_t,A_t) \leftarrow Q(S_t,A_t) + \alpha (q_t^{(n)}-Q(S_t,A_t))$</p><h3 id="3-Off-Policy-Learning"><a href="#3-Off-Policy-Learning" class="headerlink" title="3. Off-Policy Learning"></a>3. Off-Policy Learning</h3><p>on policy learning:ç­–ç•¥å­¦ä¹ åªèƒ½ä½¿ç”¨ <strong>å½“å‰ç­–ç•¥</strong> ç”Ÿæˆçš„æ•°æ®<br>off policy learning: ç­–ç•¥å­¦ä¹ å¯ä»¥ä½¿ç”¨ <strong>å…¶ä»–ç­–ç•¥</strong> ç”Ÿæˆçš„æ•°æ®ï¼ŒåŒ…æ‹¬å†å²æ•°æ®å’Œç»éªŒå›æ”¾<br>â€‹ç‰¹ç‚¹ï¼šè®­ç»ƒç­–ç•¥å’Œè¡Œä¸ºç­–ç•¥å¯ä»¥ä¸åŒï¼›å¯ä»¥ä½¿ç”¨ <strong>è¿‡å»çš„æ•°æ®ï¼ˆç»éªŒå›æ”¾ï¼‰</strong> è¿›è¡Œè®­ç»ƒï¼Œæé«˜æ•°æ®åˆ©ç”¨ç‡<br>å¯¹äºoff-policy learningï¼Œç”±äºè¡Œä¸ºç­–ç•¥å’Œè®­ç»ƒç­–ç•¥å¹¶ä¸ç›¸åŒï¼Œè¡Œä¸ºç­–ç•¥$\mu$äº§ç”Ÿçš„æ•°æ®å¯èƒ½ä¸ç¬¦åˆç›®æ ‡ç­–ç•¥$\pi$çš„åˆ†å¸ƒï¼Œç›´æ¥ä½¿ç”¨å®ƒæ¥æ›´æ–°ç›®æ ‡ç­–ç•¥ä¼šäº§ç”Ÿåå·®ã€‚ä¸ºäº†ä¿®æ­£åˆ†å¸ƒåå·®ï¼Œå¯ä»¥é‡‡ç”¨Importance Samplingæ–¹æ³•ã€‚<br>important sampling:  <strong>ç”¨äºä¼°è®¡ä¸€ä¸ªåˆ†å¸ƒçš„æœŸæœ›å€¼ï¼Œè€Œé‡‡æ ·æ•°æ®å´æ¥è‡ªå¦ä¸€ä¸ªåˆ†å¸ƒ</strong> çš„æŠ€æœ¯ã€‚å®ƒé€šè¿‡è°ƒæ•´é‡‡æ ·åˆ†å¸ƒçš„å½±å“ï¼Œæ¥ä¿®æ­£é‡‡æ ·åå·®ï¼Œä½¿å¾—ä¼°è®¡å€¼æ›´å‡†ç¡®ã€‚<br>$E_{X\sim P}[f(X)]&#x3D;\sum P(X)f(X)&#x3D;\sum Q(X)\frac{P(X)}{Q(X)}f(X)&#x3D;E_{X\sim Q}[\frac{P(X)}{Q(X)}f(X)]$</p><p>ä¸‹é¢ä»‹ç»Importance Sampling for Off-Policy Monte-Carlo:<br>Target: é€šè¿‡model-free controlå­¦ä¹ ä¸€ä¸ªç›®æ ‡ç­–ç•¥$\pi$,ä½†æ˜¯é‡‡æ ·æ•°æ®æ¥è‡ªäºè¡Œä¸ºç­–ç•¥$\mu$<br>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç§°$\mu$ä¸ºè¡Œä¸ºç­–ç•¥ï¼Œå®ƒè´Ÿè´£ç”Ÿæˆè®­ç»ƒæ•°æ®ï¼›$\pi$ä¸ºç›®æ ‡ç­–ç•¥ï¼Œå³æˆ‘ä»¬å¸Œæœ›å­¦ä¹ çš„ç­–ç•¥<br>Stepï¼šå‡è®¾ä¸€ä¸ªå®Œæ•´çš„episodeé‡‡æ ·åºåˆ—ï¼š$\tau &#x3D; {S_1, A_1, R_2,â€¦,S_T}$<br>åœ¨ç›®æ ‡ç­–ç•¥$\pi$ä¸­çš„å›æŠ¥æœŸæœ›ä¸º $G_t^{\pi&#x2F;\mu} &#x3D; \frac{\pi(A_t|S_t)}{\mu(A_t|S_t)}\frac{\pi(A_{t+1}|S_{t+1})}{\mu(A_{t+1}|S_{t+1})}â€¦\frac{\pi(A_T|S_T)}{\mu(A_T|S_T)}G_t$<br>æ›´æ–°Qå€¼å‡½æ•°ï¼š$Q(S_t,A_t) \leftarrow Q(S_t,A_t) + \alpha(G_t^{\pi&#x2F;\mu}-Q(S_t,A_t))$</p><p>Ques: ä¸ºä»€ä¹ˆ$\pi(A_t|S_t)$å·²çŸ¥å´ä¸èƒ½ç›´æ¥ç”¨$\piæ¥æ›´æ–°Qå€¼$<br>Ans: æˆ‘ä»¬æ‰‹å¤´çš„æ•°æ®æ˜¯è¡Œä¸ºç­–ç•¥ Î¼ ç”Ÿæˆçš„ï¼Œè€Œä¸æ˜¯ç›®æ ‡ç­–ç•¥ Ï€ ç”Ÿæˆçš„ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨ç›®æ ‡ç­–ç•¥ Ï€ æ¥æ›´æ–°Qå€¼ï¼Œå®é™…ä¸Šæˆ‘ä»¬æ˜¯åœ¨<strong>å‡è®¾æ•°æ®æ˜¯æŒ‰ç›®æ ‡ç­–ç•¥é‡‡æ ·çš„ï¼Œä½†æ•°æ®å®é™…æ˜¯æŒ‰è¡Œä¸ºç­–ç•¥é‡‡æ ·çš„</strong>ã€‚è¿™ä¼šå¯¼è‡´ä¼°è®¡äº§ç”Ÿåå·®ã€‚</p><h3 id="4-Q-Learning"><a href="#4-Q-Learning" class="headerlink" title="4. Q-Learning"></a>4. Q-Learning</h3><p>Q-learningæ˜¯ä¸€ç§Off-Policy Temporal Difference Learningçš„æ§åˆ¶æ–¹æ³•ï¼Œå®ƒå¯ä»¥å€ŸåŠ©è¡Œä¸ºç­–ç•¥äº§ç”Ÿçš„æ•°æ®è€Œæ— éœ€Importance Sampling<br>å…¬å¼ï¼š$Q(S,a) \leftarrow Q(S,a) + \alpha [R+\gamma max_{aâ€™}Q(sâ€™,aâ€™)-Q(s,a)]$<br><img src="/../article_img/Reinforcement/img3-4.png" alt="Q-Learning"></p><p>Ques: ä¸ºä»€ä¹ˆQ-learningä¸éœ€è¦é‡è¦æ€§é‡‡æ ·<br>Ans:<br>ï¼ˆ1ï¼‰Q-learning çš„ç›®æ ‡ç­–ç•¥å§‹ç»ˆæ˜¯è´ªå©ªç­–ç•¥ï¼ˆ$max_{aâ€™}Q(sâ€™,aâ€™)$ï¼‰ï¼Œä½†è¡Œä¸ºç­–ç•¥å¯ä»¥æ˜¯æ¢ç´¢æ€§çš„ï¼ˆæ¯”å¦‚ Ïµ-greedyï¼‰ã€‚å› ä¸ºå®ƒåªç”¨ç›®æ ‡ç­–ç•¥æ¥é€‰æ‹©ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æœ€ä¼˜åŠ¨ä½œï¼Œä¸éœ€è¦çº æ­£è¡Œä¸ºç­–ç•¥å¸¦æ¥çš„åå·®ã€‚<br>ï¼ˆ2ï¼‰å®ƒç”¨çš„æ˜¯å•æ­¥TDæ›´æ–°ï¼Œä¸æ˜¯å®Œæ•´å›æŠ¥ã€‚TDæ›´æ–°åªä¾èµ–å½“å‰ç»éªŒ(s,a,r,sâ€™)ï¼Œæ‰€ä»¥è¡Œä¸ºç­–ç•¥åªéœ€è¦æä¾›è¶³å¤Ÿå¤šæ ·çš„æ•°æ®ï¼Œä¸è¦æ±‚å®ƒå’Œç›®æ ‡ç­–ç•¥ä¸€è‡´</p><p>Ans:æ— æ³•ä¸çœŸå®ç¯å¢ƒäº¤äº’ï¼Œå¦‚ä½•è®­ç»ƒç›®æ ‡ç­–ç•¥<br>Ques: Simulatorå’ŒBatch RL<br>Simulator: å¼ºåŒ–å­¦ä¹ ä¸­çš„ä¸€ä¸ªç¯å¢ƒï¼Œå…è®¸Agentåœ¨å…¶ä¸­äº¤äº’ã€æ”¶é›†æ•°æ®å¹¶è¿›è¡Œè®­ç»ƒã€‚<strong>é€‚ç”¨äºOnline RLï¼ˆåœ¨çº¿å¼ºåŒ–å­¦ä¹ ï¼‰</strong>ï¼šç®—æ³•å¯ä»¥éšæ—¶ä¸ç¯å¢ƒäº¤äº’å¹¶æ”¶é›†æ•°æ®ï¼ˆå¦‚ DQNã€PPOï¼‰ã€‚<br>Batch RLï¼šå®ƒä»…ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„æ•°æ®é›†æ¥è®­ç»ƒï¼Œè€Œä¸ä¼šä¸ç¯å¢ƒäº¤äº’ã€‚<strong>éœ€è¦ Off-Policy æ–¹æ³•</strong>ï¼šç”±äºæ•°æ®å¯èƒ½æ¥è‡ªå¤šä¸ªä¸åŒçš„ç­–ç•¥ï¼ˆè€Œéå½“å‰ç­–ç•¥ï¼‰ï¼Œå¿…é¡»ä½¿ç”¨ <strong>Off-Policy RL</strong>ï¼ˆå¦‚ DQNã€BCQï¼‰</p><p>åŒºåˆ†Q-learningå’ŒSARSAçš„Qå€¼æ›´æ–°ï¼š<br>SARSAçš„Qå€¼æ›´æ–°å…¬å¼ä¸ºï¼š$Q(S_t,A_t) \leftarrow Q(S_t,A_t) + \alpha[R_{t+1}+\gamma Q(S_{t+1},A_{t+1})-Q(S_t,A_t)]$<br>Q-learningç”¨çš„æ˜¯ä¸‹ä¸€çŠ¶æ€çš„æœ€ä¼˜åŠ¨ä½œ$max_{aâ€™}Q(sâ€™,aâ€™)$æ¥æ›´æ–°ï¼Œå±äºOff-Policyã€‚SARSAç”¨çš„æ˜¯å®é™…é€‰åˆ°çš„ä¸‹ä¸€åŠ¨ä½œ$A_{t+1}$æ¥æ›´æ–°ï¼Œå±äºOn-Policyã€‚</p><p>ä¸‹é¢ç»™å‡ºQ-Learningçš„ä¼ªä»£ç ï¼š<br><img src="/../article_img/Reinforcement/img3-5.png" alt="Q-Learning Algorithm"></p><h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/../article_img/Reinforcement/img3-6.png" alt="Summary"></p>]]></content>
    
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lora Adapterè°ƒè¯•è·Ÿè¸ª</title>
    <link href="/2025/03/11/Lora%20Adapter%E8%B0%83%E8%AF%95%E8%B7%9F%E8%B8%AA/"/>
    <url>/2025/03/11/Lora%20Adapter%E8%B0%83%E8%AF%95%E8%B7%9F%E8%B8%AA/</url>
    
    <content type="html"><![CDATA[<p>æ‰“ç®—èŠ±ç‚¹æ—¶é—´çœ‹çœ‹åœ¨peftåº“ä¸­loraæ˜¯æ€ä¹ˆæ³¨å…¥base modelçš„ï¼Œè¿™é‡Œç®€å•æ€»ç»“ä¸‹ï¼š</p><p>é¦–å…ˆå†™ä¸ªæµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> peft <span class="hljs-keyword">import</span> LoraModel, LoraConfig<br><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM, AutoTokenizer<br><br><br>model = AutoModelForCausalLM.from_pretrained(<span class="hljs-string">&#x27;meta-llama/Llama-2-7b-hf&#x27;</span>, torch_dtype=torch.float16, device_map=<span class="hljs-string">&quot;cuda&quot;</span>)<br>tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&#x27;meta-llama/Llama-2-7b-hf&#x27;</span>)<br>tokenizer.pad_token = tokenizer.eos_token<br>lora_config = LoraConfig(<br>    r=<span class="hljs-number">32</span>,<br>    lora_alpha=<span class="hljs-number">16</span>,<br>    target_modules=[<span class="hljs-string">&quot;gate_proj&quot;</span>,<span class="hljs-string">&quot;up_proj&quot;</span>,<span class="hljs-string">&quot;q_proj&quot;</span>,<span class="hljs-string">&quot;down_proj&quot;</span>,<span class="hljs-string">&quot;o_proj&quot;</span>,<span class="hljs-string">&quot;k_proj&quot;</span>,<span class="hljs-string">&quot;v_proj&quot;</span>],<br>    lora_dropout=<span class="hljs-number">0.05</span>,<br>    bias=<span class="hljs-string">&quot;none&quot;</span>,<br>    task_type=<span class="hljs-string">&quot;CAUSAL_LM&quot;</span>,<br>)<br><br>model = LoraModel(model, lora_config, <span class="hljs-string">&quot;default&quot;</span>) <span class="hljs-comment"># åœ¨è¿™é‡Œæ‰“ä¸ªæ–­ç‚¹</span><br>model.print_trainable_parameters()<br><span class="hljs-keyword">for</span> name, param <span class="hljs-keyword">in</span> model.named_parameters():<br>    <span class="hljs-built_in">print</span>(name, param)<br></code></pre></td></tr></table></figure><p>è·Ÿè¿›å»è°ƒè¯•ï¼ŒLoraModelæ˜¯åŸºäºBaseTunerç±»å®ç°çš„å­ç±»ï¼ŒBaseTunerçš„initå‡½æ•°ä¸­æœ‰ä¸€ä¸ªinject_adapteræ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®ç°äº†å¦‚ä½•å°†loraä¸­çš„target moduleä¸base modelä¸­çš„moduleè¿›è¡Œæ›¿æ¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">elf.active_adapter: <span class="hljs-built_in">str</span> | <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>] = adapter_name<br><span class="hljs-variable language_">self</span>._pre_injection_hook(<span class="hljs-variable language_">self</span>.model, <span class="hljs-variable language_">self</span>.peft_config[adapter_name], adapter_name)<br><span class="hljs-keyword">if</span> peft_config != PeftType.XLORA <span class="hljs-keyword">or</span> peft_config[adapter_name] != PeftType.XLORA:<br>    <span class="hljs-variable language_">self</span>.inject_adapter(<span class="hljs-variable language_">self</span>.model, adapter_name, low_cpu_mem_usage=low_cpu_mem_usage)<br></code></pre></td></tr></table></figure><p>è·Ÿè¿›inject_adapter,å®ƒé¦–å…ˆä¼šæ”¶é›†base modelçš„æ‰€æœ‰named modulesç»„æˆä¸€ä¸ªkey listï¼Œç„¶åè¿›å…¥å¾ªç¯ï¼Œå¦‚æœkeyåœ¨peft_configä¸­å®šä¹‰çš„target_modulesä¸­ï¼Œåˆ™è°ƒç”¨_create_and_replaceæ–¹æ³•ï¼ˆ@abstractmethodï¼‰ï¼Œè¯¥æ–¹æ³•åœ¨å­ç±»ä¸­è¿›è¡Œå®ç°ã€‚ä¸‹é¢é‡ç‚¹ä»‹ç»ä¸‹è¯¥æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_and_replace</span>(<span class="hljs-params"></span><br><span class="hljs-params">        self,</span><br><span class="hljs-params">        lora_config,</span><br><span class="hljs-params">        adapter_name,</span><br><span class="hljs-params">        target,</span><br><span class="hljs-params">        target_name,</span><br><span class="hljs-params">        parent,</span><br><span class="hljs-params">        current_key,</span><br><span class="hljs-params">    </span>):<br>        <span class="hljs-keyword">if</span> current_key <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Current Key shouldn&#x27;t be `None`&quot;</span>)<br><br>        <span class="hljs-comment"># Regexp matching - Find key which matches current target_name in patterns provided</span><br>        pattern_keys = <span class="hljs-built_in">list</span>(chain(lora_config.rank_pattern.keys(), lora_config.alpha_pattern.keys()))<br>        target_name_key = <span class="hljs-built_in">next</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> key: re.<span class="hljs-keyword">match</span>(<span class="hljs-string">rf&quot;.*\.<span class="hljs-subst">&#123;key&#125;</span>$&quot;</span>, current_key), pattern_keys), current_key)<br>        r = lora_config.rank_pattern.get(target_name_key, lora_config.r)<br>        alpha = lora_config.alpha_pattern.get(target_name_key, lora_config.lora_alpha)<br><br>        kwargs = &#123;<br>            <span class="hljs-string">&quot;r&quot;</span>: r,<br>            <span class="hljs-string">&quot;lora_alpha&quot;</span>: alpha,<br>            <span class="hljs-string">&quot;lora_dropout&quot;</span>: lora_config.lora_dropout,<br>            <span class="hljs-string">&quot;fan_in_fan_out&quot;</span>: lora_config.fan_in_fan_out,<br>            <span class="hljs-string">&quot;init_lora_weights&quot;</span>: lora_config.init_lora_weights,<br>            <span class="hljs-string">&quot;use_rslora&quot;</span>: lora_config.use_rslora,<br>            <span class="hljs-string">&quot;use_dora&quot;</span>: lora_config.use_dora,<br>            <span class="hljs-string">&quot;ephemeral_gpu_offload&quot;</span>: lora_config.runtime_config.ephemeral_gpu_offload,<br>            <span class="hljs-string">&quot;loaded_in_8bit&quot;</span>: <span class="hljs-built_in">getattr</span>(<span class="hljs-variable language_">self</span>.model, <span class="hljs-string">&quot;is_loaded_in_8bit&quot;</span>, <span class="hljs-literal">False</span>),<br>            <span class="hljs-string">&quot;loaded_in_4bit&quot;</span>: <span class="hljs-built_in">getattr</span>(<span class="hljs-variable language_">self</span>.model, <span class="hljs-string">&quot;is_loaded_in_4bit&quot;</span>, <span class="hljs-literal">False</span>),<br>        &#125;<br><br>        quant_methods = [<span class="hljs-string">&quot;gptq&quot;</span>, <span class="hljs-string">&quot;aqlm&quot;</span>, <span class="hljs-string">&quot;awq&quot;</span>]<br>        <span class="hljs-keyword">for</span> quant_method <span class="hljs-keyword">in</span> quant_methods:<br>            quantization_config = get_quantization_config(<span class="hljs-variable language_">self</span>.model, method=quant_method)<br>            <span class="hljs-keyword">if</span> quantization_config <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>                kwargs[<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;quant_method&#125;</span>_quantization_config&quot;</span>] = quantization_config<br><br>        <span class="hljs-comment"># note: AdaLoraLayer is a subclass of LoraLayer, we need to exclude it</span><br>        <span class="hljs-keyword">from</span> peft.tuners.adalora <span class="hljs-keyword">import</span> AdaLoraLayer<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(target, LoraLayer) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(target, AdaLoraLayer):<br>            target.update_layer(<br>                adapter_name,<br>                r,<br>                lora_alpha=alpha,<br>                lora_dropout=lora_config.lora_dropout,<br>                init_lora_weights=lora_config.init_lora_weights,<br>                use_rslora=lora_config.use_rslora,<br>                use_dora=lora_config.use_dora,<br>            )<br>        <span class="hljs-keyword">else</span>:<br>            new_module = <span class="hljs-variable language_">self</span>._create_new_module(lora_config, adapter_name, target, **kwargs)<br>            <span class="hljs-keyword">if</span> adapter_name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.active_adapters:<br>                <span class="hljs-comment"># adding an additional adapter: it is not automatically trainable</span><br>                new_module.requires_grad_(<span class="hljs-literal">False</span>)<br>            <span class="hljs-variable language_">self</span>._replace_module(parent, target_name, new_module, target)<br></code></pre></td></tr></table></figure><p>kwargsä¸ºæ„é€ Loraå±‚æ‰€å¿…éœ€çš„å‚æ•°ï¼Œæ­¤å¤–è¿™é‡Œè¿˜æ£€æŸ¥äº†base modelæ˜¯å¦å·²ç»è¢«8 bit or 4 bité‡åŒ–ï¼Œä»¥é˜²æ­¢ä¸å…¼å®¹çš„æ“ä½œã€‚ç„¶ååˆ¤æ–­targetæ˜¯éƒ½å·²ç»æ˜¯ä¸€ä¸ªLoraLayerï¼š<strong>å¦‚æœ <code>target</code> å·²ç»æ˜¯ä¸€ä¸ª LoRA å±‚</strong>ï¼ˆ<code>LoraLayer</code>ï¼‰ï¼Œåˆ™ <strong>æ›´æ–°</strong> å…¶å‚æ•°ï¼ˆå¦‚ <code>r</code>ã€<code>lora_alpha</code> ç­‰ï¼‰ï¼›<strong>å¦‚æœ <code>target</code> æ˜¯ <code>AdaLoraLayer</code>ï¼Œåˆ™è·³è¿‡</strong>ï¼Œå› ä¸º AdaLoRA æœ‰è‡ªå·±çš„é€‚é…é€»è¾‘ï¼›å¦åˆ™ï¼Œåˆ›å»ºæ–°çš„ LoRA å±‚å¹¶æ›¿æ¢ç›®æ ‡å±‚ã€‚self._replace_moduleç”¨äº å°† <code>parent</code> ä¸­çš„ <code>target_name</code> å±‚æ›¿æ¢ä¸º <code>new_module</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_replace_module</span>(<span class="hljs-params">self, parent, child_name, new_module, child</span>):<br>        <span class="hljs-built_in">setattr</span>(parent, child_name, new_module)<br>        <span class="hljs-comment"># It&#x27;s not necessary to set requires_grad here, as that is handled by</span><br>        <span class="hljs-comment"># _mark_only_adapters_as_trainable</span><br><br>        <span class="hljs-comment"># child layer wraps the original module, unpack it</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(child, <span class="hljs-string">&quot;base_layer&quot;</span>):<br>            child = child.base_layer<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(new_module, <span class="hljs-string">&quot;base_layer&quot;</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(new_module, <span class="hljs-string">&quot;W_q&quot;</span>):  <span class="hljs-comment"># HQQ</span><br>                new_module.W_q = child.W_q<br>            <span class="hljs-keyword">else</span>:<br>                new_module.weight = child.weight<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(child, <span class="hljs-string">&quot;bias&quot;</span>):<br>                new_module.bias = child.bias<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">getattr</span>(child, <span class="hljs-string">&quot;state&quot;</span>, <span class="hljs-literal">None</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(new_module, <span class="hljs-string">&quot;base_layer&quot;</span>):<br>                new_module.base_layer.state = child.state<br>            <span class="hljs-keyword">else</span>:<br>                new_module.state = child.state<br>            new_module.to(child.weight.device)<br><br>        meta = torch.device(<span class="hljs-string">&quot;meta&quot;</span>)<br>        <span class="hljs-comment"># dispatch to correct device</span><br>        <span class="hljs-keyword">for</span> name, module <span class="hljs-keyword">in</span> new_module.named_modules():<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">self</span>.prefix <span class="hljs-keyword">in</span> name) <span class="hljs-keyword">or</span> (<span class="hljs-string">&quot;ranknum&quot;</span> <span class="hljs-keyword">in</span> name):<br>                weight = (<br>                    child.qweight<br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(child, <span class="hljs-string">&quot;qweight&quot;</span>)<br>                    <span class="hljs-keyword">else</span> child.W_q<br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(child, <span class="hljs-string">&quot;W_q&quot;</span>)<br>                    <span class="hljs-keyword">else</span> child.weight<br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(child, <span class="hljs-string">&quot;weight&quot;</span>)<br>                    <span class="hljs-keyword">else</span> <span class="hljs-built_in">next</span>(child.parameters())<br>                )<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">any</span>(p.device == meta <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> module.parameters()):<br>                    module.to(weight.device)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Code</tag>
      
      <tag>debug</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šModel-free Prediction</title>
    <link href="/2025/03/08/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <url>/2025/03/08/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢: Predictionä»»åŠ¡æ˜¯ç”¨æ¥åœ¨ç»™å®šç­–ç•¥$\pi$çš„å‰æä¸‹ï¼ŒåŸºäºä»·å€¼å‡½æ•°å’Œå¥–åŠ±å‡½æ•°æ¥è¯„ä¼°è¯¥ç­–ç•¥çš„å¥½åã€‚Controlä»»åŠ¡ç”¨æ¥å¯¹ç­–ç•¥è¿›è¡Œæå‡å’Œæ”¹è¿›ã€‚æ ¹æ®æ˜¯å¦å·²çŸ¥çŠ¶æ€è½¬ç§»çŸ©é˜µ(MDP transition)åˆ†ä¸ºModel-Based Predictionå’ŒModel-free Prediction</p><span id="more"></span><h3 id="Model-Based-Prediction-Control"><a href="#Model-Based-Prediction-Control" class="headerlink" title="Model-Based Prediction&amp;Control"></a>Model-Based Prediction&amp;Control</h3><h4 id="1-Policy-Iteration"><a href="#1-Policy-Iteration" class="headerlink" title="1. Policy Iteration"></a>1. Policy Iteration</h4><p>ç­–ç•¥è¿­ä»£ï¼ˆPolicy Iterationï¼‰æ˜¯ä¸€ç§ç”¨äºæ±‚è§£é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰çš„åŠ¨æ€è§„åˆ’ç®—æ³•ã€‚å®ƒä¸»è¦ç”¨äºå¯»æ‰¾æœ€ä¼˜ç­–ç•¥ï¼Œå³åœ¨ç»™å®šMDPçš„æƒ…å†µä¸‹ï¼Œä½¿å¾—ç´¯è®¡å¥–åŠ±æœ€å¤§çš„ç­–ç•¥ã€‚<br>step: ï¼ˆ1ï¼‰<strong>ç­–ç•¥è¯„ä¼°ï¼ˆPolicy Evaluationï¼‰</strong> Prediction Phase<br>åœ¨å½“å‰ç­–ç•¥$\pi$ä¸‹ï¼Œè®¡ç®—æ‰€æœ‰çŠ¶æ€sçš„çŠ¶æ€å‡½æ•°$V^{\pi}(s)$, $V^{\pi}(s)&#x3D;\sum_{a}\pi(a|s)[R_s^a +\gamma \sum_{sâ€™}P_{ssâ€™}^a V^\pi(sâ€™)]$<br>(2) <strong>ç­–ç•¥æ”¹è¿›ï¼ˆPolicy Improvementï¼‰</strong> Control Phase<br>åˆ©ç”¨è´ªå¿ƒç­–ç•¥æ¥æ”¹è¿›å½“å‰ç­–ç•¥ï¼š$\piâ€™&#x3D;greedy(\pi)$<br>å…·ä½“æ¥è¯´ï¼Œå¯¹äºæ¯ä¸ªçŠ¶æ€sï¼Œæ‰¾åˆ°ä½¿å¾—ä»·å€¼å‡½æ•°æœ€å¤§çš„åŠ¨ä½œaï¼Œä»è€Œå¾—åˆ°æœ€ä¼˜ç­–ç•¥$\pi*$<br>$\pi*(s)&#x3D;argmax_a\sum_{sâ€™}P_{ssâ€™}^a[R_s^a + \gamma V^\pi(sâ€™)]$</p><h4 id="2-Value-Iteration"><a href="#2-Value-Iteration" class="headerlink" title="2. Value Iteration"></a>2. Value Iteration</h4><p>ä»·å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰åœ¨æ›´æ–°çŠ¶æ€æ—¶å¹¶ä¸æ¶‰åŠç­–ç•¥$\pi$ï¼Œå®ƒå°†æ ¹æ®æœ€å¤§çš„åŠ¨ä½œå¥–åŠ±ä¸è½¬ç§»åçš„çŠ¶æ€ä»·å€¼ä¹‹å’Œæ‰€å¯¹åº”çš„é‚£ä¸ªåŠ¨ä½œä½œä¸ºæ–°çš„ç­–ç•¥ã€‚å³$V_{k+1}(s)&#x3D;max_{a \in A}(R_s^a + \gamma \sum_{sâ€™ \in S}P_{ssâ€™}^a V_k(sâ€™))$<br>ä¸‹é¢ç»™å‡ºPolicy Iterationå’ŒValue Iterationçš„å¯¹æ¯”ï¼š</p><table><thead><tr><th><strong>ç‰¹ç‚¹</strong></th><th><strong>Value Iteration (å€¼è¿­ä»£)</strong></th><th><strong>Policy Iteration (ç­–ç•¥è¿­ä»£)</strong></th></tr></thead><tbody><tr><td><strong>æ€è·¯</strong></td><td>ç›´æ¥è¿­ä»£æ›´æ–°å€¼å‡½æ•°ç›´åˆ°æ”¶æ•›ï¼Œå†æå–æœ€ä¼˜ç­–ç•¥</td><td>äº¤æ›¿æ‰§è¡Œç­–ç•¥è¯„ä¼°å’Œç­–ç•¥æ”¹è¿›ï¼Œä¸æ–­è¿­ä»£ä¼˜åŒ–ç­–ç•¥</td></tr><tr><td><strong>ä¸»è¦æ­¥éª¤</strong></td><td>1. æ›´æ–°å€¼å‡½æ•° â†’ 2. æå–ç­–ç•¥</td><td>1. ç­–ç•¥è¯„ä¼° â†’ 2. ç­–ç•¥æ”¹è¿› â†’ 3. é‡å¤ç›´åˆ°ç­–ç•¥æ”¶æ•›</td></tr><tr><td><strong>æ”¶æ•›æ¡ä»¶</strong></td><td>å€¼å‡½æ•°å˜åŒ–è¶³å¤Ÿå° (</td><td>V_{k+1} - V_k</td></tr><tr><td><strong>ç­–ç•¥æå–æ—¶æœº</strong></td><td>æœ€åä¸€æ­¥æå–æœ€ä¼˜ç­–ç•¥</td><td>æ¯è½®ç­–ç•¥æ”¹è¿›éƒ½ä¼šæ›´æ–°ç­–ç•¥</td></tr><tr><td><strong>è®¡ç®—é‡</strong></td><td>æ›´æ–°æ¯ä¸ªçŠ¶æ€æ—¶éƒ½è€ƒè™‘æ‰€æœ‰åŠ¨ä½œï¼ˆè®¡ç®—é‡å¤§ä½†æ”¶æ•›å¿«ï¼‰</td><td>æ¯æ¬¡å®Œæ•´è¯„ä¼°ç­–ç•¥å†æ”¹è¿›ç­–ç•¥ï¼Œå¯èƒ½éœ€è¦å¤šæ¬¡è¯„ä¼°ï¼Œä½†æ”¹è¿›æ¬¡æ•°è¾ƒå°‘</td></tr><tr><td><strong>ç­–ç•¥æ›´æ–°</strong></td><td>ä»å€¼å‡½æ•°æå–ç­–ç•¥ï¼ˆç¦»çº¿ç­–ç•¥ï¼‰</td><td>æ¯æ¬¡æ”¹è¿›ç«‹å³ç”Ÿæˆæ–°ç­–ç•¥ï¼ˆåœ¨çº¿ç­–ç•¥ï¼‰</td></tr></tbody></table><h3 id="Model-Free-Prediction"><a href="#Model-Free-Prediction" class="headerlink" title="Model-Free Prediction"></a>Model-Free Prediction</h3><h4 id="1-Monte-Carlo-Reinforcement-Learning"><a href="#1-Monte-Carlo-Reinforcement-Learning" class="headerlink" title="1. Monte-Carlo Reinforcement Learning"></a>1. Monte-Carlo Reinforcement Learning</h4><p>ç‰¹ç‚¹ï¼šno bootstrapping(bootstrappingæ˜¯æŒ‡ç”¨ç°æœ‰çš„ä¼°è®¡å€¼æ¥æ›´æ–°å½“å‰çš„ä¼°è®¡å€¼)ï¼Œå³ä¸ä¾èµ–æœªæ¥çŠ¶æ€çš„ä¼°è®¡å€¼ï¼Œæ¯æ¬¡åªç”¨çœŸå®çš„ç»éªŒå›æŠ¥æ¥æ›´æ–°ç­–ç•¥ã€‚<br>bootstrappingï¼ˆQ-learningã€SARSAï¼‰: æ›´æ–°å€¼ä¾èµ–äºæœªæ¥çŠ¶æ€çš„ä¼°è®¡å€¼<br>$Q(s,a) \leftarrow Q(s,a) + \alpha(r + \gamma Q(sâ€™,aâ€™) -Q(s,a))$   è¿™é‡Œçš„Q(sâ€™,aâ€™)å°±æ˜¯å¯¹æœªæ¥çš„ä¼°è®¡å€¼<br>no bootstrapping(Monte Carlo): å®Œå…¨åŸºäºçœŸå®çš„å®Œæ•´å›æŠ¥ğºæ›´æ–°ï¼Œä¸ä¾èµ–æœªæ¥çŠ¶æ€çš„ä¼°è®¡<br>$Q(s,a) \leftarrow Q(s,a) + \alpha(G-Q(s,a))$ å…¶ä¸­$G&#x3D;\sum_{tâ€™&#x3D;t}^T \gamma^{tâ€™-t}r_{tâ€™}$</p><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>No Bootstrapping</strong></th><th><strong>Bootstrapping</strong></th></tr></thead><tbody><tr><td><strong>ä»£è¡¨ç®—æ³•</strong></td><td>Monte Carlo, REINFORCE</td><td>Q-learning, SARSA, TD(0)</td></tr><tr><td><strong>æ›´æ–°ä¾èµ–</strong></td><td>å®Œæ•´å›æŠ¥</td><td>æœªæ¥çŠ¶æ€çš„ä¼°è®¡å€¼</td></tr><tr><td><strong>è¯¯å·®æ¥æº</strong></td><td>é«˜æ–¹å·®</td><td>æœ‰åå·®ï¼ˆå› ä¾èµ–ä¼°è®¡å€¼ï¼‰</td></tr><tr><td><strong>æ”¶æ•›é€Ÿåº¦</strong></td><td>æ…¢ï¼ˆæ–¹å·®å¤§ã€æ•°æ®éœ€æ±‚å¤šï¼‰</td><td>å¿«ï¼ˆä½†å¯èƒ½æ”¶æ•›åˆ°æ¬¡ä¼˜è§£ï¼‰</td></tr><tr><td><strong>å®æ—¶æ€§</strong></td><td>å¿…é¡»ç­‰å®Œæ•´è½¨è¿¹ç»“æŸæ‰æ›´æ–°</td><td>å¯ä»¥åœ¨çº¿æ›´æ–°ï¼Œæ¯ä¸€æ­¥éƒ½èƒ½è°ƒæ•´</td></tr></tbody></table><p>step: ä¸ºäº†ä¼°è®¡çŠ¶æ€sï¼Œæ¯ä¸€æ¬¡é‡‡æ ·è·¯å¾„ç»è¿‡çŠ¶æ€sæ—¶ï¼Œ$N(s) \leftarrow N(s)+1$,åŒæ—¶å¢åŠ ç´¯ç§¯å›æŠ¥ $S(s) \leftarrow S(s) + G_t$ã€‚æœ€ç»ˆï¼Œé‡‡ç”¨å¹³å‡ä¼°è®¡çš„æ–¹å¼å¾—åˆ°çŠ¶æ€ä»·å€¼V(s)&#x3D;S(s)&#x2F;N(s)ã€‚æ¥ä¸‹æ¥æ›´æ–°ç­–ç•¥$V(s) \leftarrow V_{\pi}(s)$ï¼Œç›´åˆ°$N(s) \leftarrow \infty$</p><p>æ ¹æ®$\mu_k &#x3D; \frac{1}{k}\sum_{j&#x3D;1}^k x_j&#x3D;\mu_{k-1}+\frac{1}{k}(x_k-\mu_{k-1})$<br>$V(S_t) \leftarrow V(S_t) + \frac{1}{N(S_t)}(G_t -V(S_t))$<br>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è¿™é‡Œçš„$\frac{1}{N(S_t)}$æ›¿æ¢ä¸ºæŠ˜æŸå› å­\alphaï¼Œå³$V(S_t) \leftarrow V(S_t) + \alpha(G_t -V(S_t))$</p><h4 id="2-Temporal-Difference-Learning"><a href="#2-Temporal-Difference-Learning" class="headerlink" title="2. Temporal Difference Learning"></a>2. Temporal Difference Learning</h4><p>åˆ©ç”¨Bellmanæ–¹ç¨‹çš„æ–¹å¼æ¥æ³›åŒ–ä¼°è®¡$G_t$ï¼Œå³$V(S_t) \leftarrow V(S_t) + \alpha(R_{t+1} + \gamma V(S_{t+1})-V(S_t))$<br>å…¶ä¸­$R_{t+1} + \gamma V(S_{t+1})$ä¸ºTD Target, $\delta_t&#x3D;R_{t+1} + \gamma V(S_{t+1}) - V(S_t)$ä¸ºTD Error</p><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>TD Learning</strong></th><th><strong>Monte Carlo (MC)</strong></th></tr></thead><tbody><tr><td><strong>æ›´æ–°æ—¶æœº</strong></td><td>æ¯ä¸€æ­¥æ›´æ–°ï¼ˆåœ¨çº¿å­¦ä¹ ï¼‰</td><td>å®Œæ•´è½¨è¿¹ç»“æŸåå†æ›´æ–°</td></tr><tr><td><strong>å›æŠ¥ä¼°è®¡</strong></td><td>ä¾èµ–å½“å‰ç»éªŒ + æœªæ¥ä¼°è®¡å€¼ï¼ˆbootstrappingï¼‰</td><td>ä¾èµ–å®Œæ•´å›æŠ¥ï¼ˆno bootstrappingï¼‰</td></tr><tr><td><strong>åå·® vs. æ–¹å·®</strong></td><td>æœ‰åä½†æ–¹å·®å°ï¼ˆå› ä¸ºä¼°è®¡ä¾èµ–æœªæ¥çŠ¶æ€çš„å€¼ï¼‰</td><td>æ— åä½†æ–¹å·®å¤§ï¼ˆå› ä¸ºå›æŠ¥æ³¢åŠ¨å¤§ï¼‰</td></tr><tr><td><strong>æ”¶æ•›é€Ÿåº¦</strong></td><td>å¿«ï¼Œèƒ½æ›´å¿«è°ƒæ•´å€¼å‡½æ•°</td><td>æ…¢ï¼Œå› ä¸ºè¦ç­‰å¾…å®Œæ•´å›æŠ¥</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>é€‚ç”¨äºè¿ç»­æˆ–åœ¨çº¿ä»»åŠ¡</td><td>é€‚ç”¨äºå›åˆå¼ä»»åŠ¡ï¼ˆå¦‚æ¸¸æˆï¼‰</td></tr></tbody></table><h4 id="3-N-Step-Prediction-TD-Learningçš„å˜ä½“"><a href="#3-N-Step-Prediction-TD-Learningçš„å˜ä½“" class="headerlink" title="3. N-Step Prediction(TD Learningçš„å˜ä½“)"></a>3. N-Step Prediction(TD Learningçš„å˜ä½“)</h4><p>å°†TD targetè®¾å®šä¸ºæœªæ¥næ­¥çš„å¥–åŠ±å’Œè½¬ç§»çŠ¶æ€æœŸæœ›ï¼Œç›¸å½“äºTDå’ŒMCçš„æŠ˜ä¸­,è¿­ä»£næ­¥å†æ›´æ–°<br>Consider the following n-step returns for n&#x3D;1,2â€¦,\infty<br>n&#x3D;1 (TD) $G_t^{(1)}&#x3D;R_{t+1}+\gamma V(S_{t+1})$<br>n&#x3D;2 (2-Step) $G_t^{(2)}&#x3D;R_{t+1}+\gamma R_{t+2} + \gamma^2 V(S_{t+2})$<br>â€¦ â€¦ â€¦<br>n&#x3D;\infty (MC) $G_t^\infty&#x3D;R_{t+1}+\gamma R_{t+2} + â€¦ + \gamma^{T-1}R_T$<br>å› æ­¤ï¼Œå¯¹äºn-step temporal-difference learning: $V(S_t) \leftarrow V(S_t) + \alpha(G_t^{(n)}-V(S_t))$</p><h4 id="4-Lamda-Return-N-Step-Predictionçš„å˜ä½“"><a href="#4-Lamda-Return-N-Step-Predictionçš„å˜ä½“" class="headerlink" title="4. Lamda Return(N-Step Predictionçš„å˜ä½“)"></a>4. Lamda Return(N-Step Predictionçš„å˜ä½“)</h4><p>è€ƒè™‘äº†çŸ­æ­¥å›æŠ¥å’Œé•¿æ­¥å›æŠ¥çš„ä¸åŒæ”¶ç›Šï¼š $G_t^\lambda&#x3D; (1-\lambda)\sum_{n&#x3D;1}^\infty \lambda^{n-1}G_t^{(n)}$<br>$V(S_t) \leftarrow V(S_t) + \alpha (G_t^\lambda- V(S_t))$<br>Î» è¶Šå°ï¼Œæ›´ä¾èµ–å½“å‰çš„ TD ä¼°è®¡ï¼Œå¿«é€Ÿè°ƒæ•´ä½†å¯èƒ½æŠ–åŠ¨å¤§; Î» è¶Šå¤§ï¼Œæ›´ä¾èµ–é•¿æ—¶é—´çš„å›æŠ¥ï¼Œç¨³å®šä½†æ›´æ–°æ…¢</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>Monte Carlo Backup<br><img src="/../article_img/Reinforcement/img2-1.png" alt="Monte Carlo Backup"><br>Temporal-Difference Backup<br><img src="/../article_img/Reinforcement/img2-2.png" alt="Temporal-Difference Backup"><br>Dynamic Programming Backup(Policy&#x2F;Value Iteration)<br><img src="/../article_img/Reinforcement/img2-3.png" alt="Dynamic Programming Backup"></p>]]></content>
    
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ ç³»åˆ—ï¼ˆä¸€ï¼‰:åŸºç¡€æ¦‚å¿µ</title>
    <link href="/2025/03/05/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2025/03/05/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸‰è¦ç´ ï¼š"><a href="#ä¸‰è¦ç´ ï¼š" class="headerlink" title="ä¸‰è¦ç´ ï¼š"></a>ä¸‰è¦ç´ ï¼š</h2><p><strong>rewards, actions, states</strong><br><img src="/article_img/Reinforcement/img1-1.png" alt="RL framework"></p><h2 id="é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼š"><a href="#é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼š" class="headerlink" title="é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼š"></a>é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹ï¼š</h2><p>é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹å¯ä»¥è¡¨ç¤ºä¸º $&lt;S,P,R,\gamma&gt;$ï¼Œå…¶ä¸­ï¼š</p><ul><li>$S$ ä¸ºçŠ¶æ€é›†åˆï¼›</li><li>$P$ ä¸ºçŠ¶æ€è½¬ç§»çŸ©é˜µï¼Œ$P_{ssâ€™}&#x3D;P[S_{t+1}&#x3D;sâ€™|S_t&#x3D;s]$ï¼›</li><li>$R$ ä¸ºå¥–åŠ±å‡½æ•°ï¼Œ$R_s&#x3D;E[R_{t+1}|S_t&#x3D;s]$ï¼›</li><li>$\gamma$ ä¸ºæŠ˜æ‰£å› å­ï¼Œ$\gamma \in [0,1]$ã€‚</li></ul><h3 id="æ€»æŠ˜æ‰£å¥–åŠ±ï¼š"><a href="#æ€»æŠ˜æ‰£å¥–åŠ±ï¼š" class="headerlink" title="æ€»æŠ˜æ‰£å¥–åŠ±ï¼š"></a>æ€»æŠ˜æ‰£å¥–åŠ±ï¼š</h3><p>å›æŠ¥ï¼ˆReturnï¼‰$G_t$ è¡¨ç¤ºä»æ—¶åˆ» $t$ å¼€å§‹çš„æ€»æŠ˜æ‰£å¥–åŠ±ï¼š<br>$$<br>G_t&#x3D;R_{t+1}+\gamma R_{t+2}+â€¦&#x3D;\sum_{k&#x3D;0}^\infty \gamma^k R_{t+k+1}<br>$$</p><ul><li><strong>çŠ¶æ€ä»·å€¼å‡½æ•°</strong>ï¼š$v(s)&#x3D;E[G_t|S_t&#x3D;s]$  </li><li><strong>è¡Œä¸ºä»·å€¼å‡½æ•°</strong>ï¼š$q(s,a)&#x3D;E[G_t|S_t&#x3D;s,A_t&#x3D;a]$</li></ul><h2 id="Bellman-æ–¹ç¨‹ï¼š"><a href="#Bellman-æ–¹ç¨‹ï¼š" class="headerlink" title="Bellman æ–¹ç¨‹ï¼š"></a>Bellman æ–¹ç¨‹ï¼š</h2><p>Bellman æ–¹ç¨‹è¡¨ç¤ºçŠ¶æ€ä»·å€¼å‡½æ•°çš„é€’å½’å½¢å¼ï¼š<br>$$<br>v(s)&#x3D;E[G_t|S_t&#x3D;s]&#x3D;E[R_{t+1}+\gamma R_{t+2}+â€¦|S_t&#x3D;s]&#x3D;E[R_{t+1}+\gamma G_{t+1}|S_t&#x3D;s]&#x3D;E[R_{t+1}+\gamma v(S_{t+1})|S_t&#x3D;s]<br>$$</p><p>æ ¹æ®ä¸‹æ–¹çš„<strong>çŠ¶æ€ä»·å€¼è¿­ä»£ç¤ºæ„å›¾</strong>ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š<br>$$<br>v(s)&#x3D;R_s + \gamma \sum_{sâ€™ \in S}P_{ssâ€™}v(sâ€™)<br>$$<br><img src="/article_img/Reinforcement/img1-2.png" alt="çŠ¶æ€ä»·å€¼è¿­ä»£ç¤ºæ„å›¾"></p><p>æ ¹æ®<strong>è¡Œä¸ºä»·å€¼è¿­ä»£ç¤ºæ„å›¾</strong>ï¼Œå¯ä»¥å¾—åˆ°ï¼š<br>$$<br>q(s,a)&#x3D;R_s^a + \gamma \sum_{sâ€™ \in S}P_{ssâ€™}^a v(sâ€™)<br>$$<br><img src="/article_img/Reinforcement/img1-3.png" alt="è¡Œä¸ºä»·å€¼è¿­ä»£ç¤ºæ„å›¾"></p><h2 id="é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼š"><a href="#é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼š" class="headerlink" title="é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼š"></a>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼š</h2><p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰è¡¨ç¤ºä¸º $&lt;S,A,P,R,\gamma&gt;$ï¼Œå…¶ä¸­ï¼š</p><ul><li>$S$ æ˜¯çŠ¶æ€é›†åˆï¼›</li><li>$A$ ä¸ºåŠ¨ä½œé›†åˆï¼›</li><li>$P$ ä¸ºçŠ¶æ€è½¬ç§»çŸ©é˜µï¼Œ$P_{ssâ€™}^a&#x3D;P[S_{t+1}&#x3D;sâ€™|S_t&#x3D;s, A_t&#x3D;a]$ï¼›</li><li>$R$ ä¸ºå¥–åŠ±å‡½æ•°ï¼Œ$R_s^a&#x3D;E[R_{t+1}|S_t&#x3D;s, A_t&#x3D;a]$ã€‚</li></ul><p>çŠ¶æ€çš„è½¬ç§»åŸºäºå†³ç­–ç­–ç•¥ï¼ˆpolicyï¼‰$\pi$ æ‰€äº§ç”Ÿçš„åŠ¨ä½œï¼Œ$\pi$ ç”¨æ¥åŸºäºå½“å‰çŠ¶æ€ç»™å‡ºä¸‹ä¸€æ­¥è¡ŒåŠ¨çš„è§„åˆ’ï¼š<br>$$<br>\pi(a|s)&#x3D;P[A_t&#x3D;a|S_t&#x3D;s]<br>$$</p><h3 id="ä»·å€¼å‡½æ•°ï¼š"><a href="#ä»·å€¼å‡½æ•°ï¼š" class="headerlink" title="ä»·å€¼å‡½æ•°ï¼š"></a>ä»·å€¼å‡½æ•°ï¼š</h3><p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ç­–ç•¥ $\pi$ ä¸‹çš„çŠ¶æ€ä»·å€¼å‡½æ•°å’Œè¡Œä¸ºä»·å€¼å‡½æ•°ï¼š<br>$$<br>v_{\pi}(s)&#x3D;E_{\pi}[G_t|S_t&#x3D;s]<br>$$<br>$$<br>q_{\pi}(s,a)&#x3D;E_{\pi}[G_t|S_t&#x3D;s, A_t&#x3D;a]<br>$$</p><p>ä½¿ç”¨å³æ—¶å¥–åŠ±çš„å½¢å¼ï¼Œå¯ä»¥è½¬æ¢ä¸ºï¼š<br>$$<br>v_{\pi}(s)&#x3D;E_{\pi}[R_{t+1}+\gamma v_{\pi}(S_{t+1})|S_t&#x3D;s]<br>$$<br>$$<br>q_{\pi}(s,a)&#x3D;E_{\pi}[R_{t+1}+\gamma q_{\pi}(S_{t+1},A_{t+1})|S_t&#x3D;s, A_t&#x3D;a]<br>$$</p><h3 id="æœ€ä¼˜ä»·å€¼å‡½æ•°ï¼š"><a href="#æœ€ä¼˜ä»·å€¼å‡½æ•°ï¼š" class="headerlink" title="æœ€ä¼˜ä»·å€¼å‡½æ•°ï¼š"></a>æœ€ä¼˜ä»·å€¼å‡½æ•°ï¼š</h3><p>$$<br>v_*(s)&#x3D;\max_{\pi}v_{\pi}(s)<br>$$<br>$$<br>q_*(s,a)&#x3D;\max_{\pi}q_{\pi}(s,a)<br>$$</p><p><strong>å®šç†</strong>ï¼šå¦‚æœå¯¹äºä»»æ„çš„çŠ¶æ€ $s$ï¼Œéƒ½æœ‰ $v_{\pi}(s) \geq v_{\piâ€™}(s)$ï¼Œåˆ™ç­–ç•¥ $\pi$ ä¼˜äºç­–ç•¥ $\piâ€™$ã€‚</p><h2 id="Q-Aï¼š"><a href="#Q-Aï¼š" class="headerlink" title="Q&amp;Aï¼š"></a>Q&amp;Aï¼š</h2><p><strong>Quesï¼š</strong> å¥–åŠ±æ˜¯ç”±çŠ¶æ€å˜åŒ–äº§ç”Ÿçš„è¿˜æ˜¯ç”±è¡ŒåŠ¨äº§ç”Ÿçš„ï¼Ÿ<br><strong>Ansï¼š</strong> å¥–åŠ±ï¼ˆRewardï¼‰é€šå¸¸æ˜¯ç”± <strong>è¡ŒåŠ¨ï¼ˆActionï¼‰</strong> äº§ç”Ÿçš„ï¼Œè€Œä¸æ˜¯ç”±çŠ¶æ€å˜åŒ–ç›´æ¥äº§ç”Ÿçš„ã€‚åœ¨å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰ä¸­ï¼Œå¥–åŠ±çš„å®šä¹‰æ˜¯æ™ºèƒ½ä½“ï¼ˆAgentï¼‰åœ¨ç¯å¢ƒï¼ˆEnvironmentï¼‰ä¸­æ‰§è¡ŒæŸä¸ª <strong>åŠ¨ä½œ</strong> åå¾—åˆ°çš„åé¦ˆï¼Œå®ƒè¡¨ç¤ºæ™ºèƒ½ä½“åœ¨é‡‡å–è¯¥åŠ¨ä½œåè·å¾—çš„å³æ—¶å›æŠ¥ã€‚çŠ¶æ€å˜åŒ–æ˜¯è¡Œä¸ºå¯¼è‡´çš„ç»“æœã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Solidityæ™ºèƒ½åˆçº¦</title>
    <link href="/2025/03/01/FundMe/"/>
    <url>/2025/03/01/FundMe/</url>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…Remix-ide"><a href="#å®‰è£…Remix-ide" class="headerlink" title="å®‰è£…Remix-ide"></a>å®‰è£…Remix-ide</h3><p>å…ˆæ’ä¸ªé›·ï¼Œç›®å‰å®˜æ–¹æä¾›çš„remix-ide desktopç‰ˆèƒ½å®‰è£…ï¼Œä½†æ˜¯è·‘ä¸èµ·æ¥ï¼Œæˆ‘åœ¨github releaseåˆ—è¡¨ä¸‹äº†latest version,å¯åŠ¨åå°±æ˜¯æ¼«é•¿çš„ç™½å±ï¼Œç½‘ä¸Šç»™çš„è§£é‡Šæ˜¯éœ€è¦ä¿®æ”¹ä»£ç†pingé€šgithubï¼Œä½†æ˜¯æˆ‘è¿™è¾¹æ˜¯èƒ½pingé€šçš„ï¼Œå¤šæ¬¡å°è¯•æ— æœåæˆ‘é€‰æ‹©ä½¿ç”¨Remix-Ethereum IDE + æœ¬åœ° remixdã€‚remixdæ˜¯Remix IDEæä¾›çš„ä¸€ä¸ªè¾…åŠ©å·¥å…·ï¼Œä¸»è¦ç”¨äº Solidity æ™ºèƒ½åˆçº¦å¼€å‘æ—¶ï¼Œè®©æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå’Œ Remix Web IDE ä¹‹é—´å»ºç«‹è¿æ¥ã€‚<br>å®‰è£…æ–¹å¼ï¼šnpm install -g @remix-project&#x2F;remixd<br>å¯åŠ¨å‘½ä»¤ï¼šremixd -s .&#x2F; â€“remix-ide <a href="https://remix.ethereum.org/">https://remix.ethereum.org</a></p><h3 id="vscode-solc"><a href="#vscode-solc" class="headerlink" title="vscode + solc"></a>vscode + solc</h3><p>éœ€è¦åœ¨vscodeä¸­å®‰è£…solidityæ’ä»¶ï¼Œå¦å¤–ä¹Ÿå¯å®‰è£…remix-lightæ’ä»¶ç”¨äºè½»é‡åŒ–ç¼–è¯‘ã€éƒ¨ç½²ã€‚ä½¿ç”¨solidityæ’ä»¶å¯¹solç¼–è¯‘çš„æ–¹å¼æ˜¯å³é”®é€‰æ‹©Solidityï¼šCompile Contractã€‚å¦‚æœç¼–è¯‘å™¨ç‰ˆæœ¬ä¸åŒ¹é…çš„è¯ï¼Œsolidityæ’ä»¶æ”¯æŒä¸‰ç§ä¸åŒçš„æ›´æ¢ç‰ˆæœ¬æ–¹å¼ï¼š<br>ï¼ˆ1ï¼‰è¿œç¨‹ä¸‹è½½: ä½¿ç”¨è¿œç¨‹ç‰ˆæœ¬è¿›è¡Œç¼–è¯‘ï¼Œéœ€è¦æ›´æ”¹solidity settingä¸­çš„solidity.compileUsingRemoteVersionï¼Œè®¾ç½®ä¸ºç›¸åº”çš„ç‰ˆæœ¬å·<br>ï¼ˆ2ï¼‰ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼šæ›´æ”¹solidity settingä¸­çš„solidity.compileUsingLocalVersionï¼Œè®¾ç½®ä¸ºsolcæ–‡ä»¶æœ¬åœ°è·¯å¾„<br>ï¼ˆ3ï¼‰Npm&#x2F;èŠ‚ç‚¹å®‰è£…ï¼šå¯ä»¥åœ¨solidityé¡¹ç›®æ–‡ä»¶å¤¹ä¸­æœ¬åœ°å®‰è£…solcï¼ˆnpm install solcï¼‰<br>ä¼˜å…ˆé¡ºåºï¼šé¦–å…ˆä½¿ç”¨npm&#x2F;èŠ‚ç‚¹å®‰è£…ï¼Œç„¶åä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼Œæœ€åä½¿ç”¨è¿œç¨‹</p><p>Ques: ç®€è¿°Solidityçš„ç¼–è¯‘å’Œéƒ¨ç½²éƒ½å¹²äº†ä»€ä¹ˆäº‹å„¿<br>Ansï¼šSolidityçš„ç¼–è¯‘æ˜¯å°†äººç±»å¯è¯»çš„æ™ºèƒ½åˆçº¦ä»£ç è½¬åŒ–æˆEVMï¼ˆä»¥å¤ªåŠè™šæ‹Ÿæœºï¼‰èƒ½ç†è§£çš„å­—èŠ‚ç ï¼›Solidityéƒ¨ç½²æ˜¯å°†åˆçº¦ä»£ç æ­£å¼å‘å¸ƒåˆ°åŒºå—é“¾ä¸Šï¼Œä»è€Œæ‹¥æœ‰ç‹¬ç«‹çš„åœ°å€ï¼ˆåˆçº¦åœ°å€ï¼‰ï¼Œç”¨æ¥ç®¡ç†èµ„äº§ï¼Œæ”¯æŒæ”¶æ¬¾ä¸æ”¯ä»˜</p><h3 id="åŒºå—é“¾äº¤æ˜“æ˜ç»†"><a href="#åŒºå—é“¾äº¤æ˜“æ˜ç»†" class="headerlink" title="åŒºå—é“¾äº¤æ˜“æ˜ç»†"></a>åŒºå—é“¾äº¤æ˜“æ˜ç»†</h3><ul><li>äº¤æ˜“å“ˆå¸Œï¼ˆTransaction Hashï¼‰ï¼šè¿™ä¸ªæ˜¯åœ¨è¿™ä¸ªåŒºå—é“¾ä¸Šè¿™ç¬”äº¤æ˜“çš„å”¯ä¸€IDï¼Œè¿™ä¸ªäº¤æ˜“å“ˆå¸Œæ ‡è¯†äº†å‘é€äº†0.25ä¸ªä»¥å¤ªå¸åˆ°æˆ‘ä»¬çš„åœ°å€çš„æ“ä½œã€‚</li><li>çŠ¶æ€ï¼ˆStatusï¼‰ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº¤æ˜“çŠ¶æ€æ˜¯æˆåŠŸçš„ï¼Œå®ƒæ²¡æœ‰å› æŸç§æƒ…å†µè€Œå¤±è´¥ã€‚</li><li>åŒºå—ï¼ˆBlockï¼‰ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªäº¤æ˜“æ‰€åœ¨çš„åŒºå—é«˜åº¦ã€‚</li><li>æ—¶é—´æˆ³ï¼ˆTimestampï¼‰ï¼šè¿™é‡Œæ˜¯æ—¶é—´æˆ³ï¼Œä»£è¡¨è¿™ä¸ªäº¤æ˜“æ˜¯ä½•æ—¶å‘ç”Ÿçš„ã€‚</li><li>å‘é€è€…ï¼ˆFromï¼‰ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªäº¤æ˜“æ˜¯ç”±è°å‘é€çš„ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥åœ¨æ–°çš„æ ‡ç­¾é¡µæ‰“å¼€å®ƒï¼Œä½ å°±èƒ½çœ‹åˆ°å‘é€äº¤æ˜“çš„è´¦æˆ·ä¿¡æ¯ã€‚</li><li>æ¥å—è€…ï¼ˆToï¼‰ï¼šæ¥å—äº†äº¤æ˜“çš„ç”¨æˆ·ï¼Œè¿™é‡Œå°±æ˜¯æˆ‘ä»¬è‡ªå·±ã€‚</li><li>ä»·å€¼ï¼ˆValueï¼‰ï¼šäº¤æ˜“çš„èµ„äº§ä»·å€¼æ˜¯0.25ä¸ªä»¥å¤ªå¸ã€‚</li><li>äº¤æ˜“æ‰‹ç»­è´¹ï¼ˆTransaction Feeï¼‰ï¼šäº¤æ˜“çš„æ‰‹ç»­è´¹ï¼Œä»˜ç»™çŸ¿å·¥å¤„ç†è¿™ç¬”äº¤æ˜“çš„è´¹ç”¨ã€‚</li><li>Gasä»·æ ¼ï¼ˆGas Priceï¼‰ï¼šGasçš„ä»·æ ¼ï¼ŒGasä»·æ ¼æ˜¯äº¤æ˜“ä¸­æ¯ä¸ªæ‰§è¡Œå•å…ƒçš„èŠ±è´¹ï¼ˆç”¨etherå’Œgweiåšå•ä½ï¼‰ï¼ŒGasä»·æ ¼è¶Šé«˜ï¼Œè¢«å†™åˆ°åŒºå—ä¸­çš„æœºä¼šè¶Šå¤§ã€‚</li></ul><h3 id="åŒºåˆ†ETHä»£å¸å’ŒLinkä»£å¸"><a href="#åŒºåˆ†ETHä»£å¸å’ŒLinkä»£å¸" class="headerlink" title="åŒºåˆ†ETHä»£å¸å’ŒLinkä»£å¸"></a>åŒºåˆ†ETHä»£å¸å’ŒLinkä»£å¸</h3><p>Linkä»£å¸çš„åŠŸèƒ½ï¼š</p><ul><li>æ”¯ä»˜æ•°æ®æœåŠ¡è´¹ï¼šç”¨ LINK ä»£å¸æ”¯ä»˜è·å–é“¾ä¸‹æ•°æ®çš„è´¹ç”¨ï¼Œæ¯”å¦‚ä»·æ ¼ã€å¤©æ°”ç­‰</li><li>èŠ‚ç‚¹è´¨æŠ¼æ‹…ä¿ï¼šèŠ‚ç‚¹éœ€è¦è´¨æŠ¼ LINK ä½œä¸ºæ‹…ä¿ï¼Œä½œæ¶ä¼šè¢«ç½šæ‰</li><li>èŠ‚ç‚¹å¥–åŠ±æ¿€åŠ±ï¼šèŠ‚ç‚¹æä¾›é«˜è´¨é‡æ•°æ®ï¼Œè·å¾— LINK å¥–åŠ±</li><li>è·¨é“¾æ•°æ®ä¼ è¾“è´¹ï¼šç”¨äºæ”¯ä»˜è·¨é“¾æ•°æ®é€šä¿¡çš„æˆæœ¬ï¼Œæ¯”å¦‚åœ¨ä¸åŒé“¾ä¹‹é—´åŒæ­¥ä¿¡æ¯</li><li>DeFi æŠµæŠ¼å“ï¼šåœ¨ä¸€äº› DeFi åè®®ä¸­å¯ä»¥ä½œä¸ºæŠµæŠ¼å“ï¼Œå€Ÿè´·ç¨³å®šå¸ç­‰<br>ä¸‹é¢æ˜¯Ethçš„ä»£å¸å’ŒLinkä»£å¸çš„å¯¹æ¯”æ€»ç»“ï¼š<table><thead><tr><th><strong>ç‰¹ç‚¹</strong></th><th><strong>ETHï¼ˆä»¥å¤ªåŠï¼‰</strong></th><th><strong>LINKï¼ˆChainlinkï¼‰</strong></th></tr></thead><tbody><tr><td><strong>é¡¹ç›®ç±»å‹</strong></td><td>æ™ºèƒ½åˆçº¦å¹³å°</td><td>å»ä¸­å¿ƒåŒ–é¢„è¨€æœºç½‘ç»œ</td></tr><tr><td><strong>ä»£å¸åŠŸèƒ½</strong></td><td>æ”¯ä»˜äº¤æ˜“è´¹ã€è´¨æŠ¼ã€DApp</td><td>æ”¯ä»˜èŠ‚ç‚¹è´¹ç”¨ã€è´¨æŠ¼ã€å¥–åŠ±</td></tr><tr><td><strong>æŠ€æœ¯å±‚çº§</strong></td><td>Layer 1 ä¸»é“¾</td><td>ERC-20 ä»£å¸ï¼ˆåŸºäºä»¥å¤ªåŠï¼‰</td></tr><tr><td><strong>å¸‚åœºå®šä½</strong></td><td>â€œåŒºå—é“¾ç‡ƒæ–™â€ã€å¹³å°ä»£å¸</td><td>â€œæ•°æ®æ¡¥æ¢â€ã€é¢„è¨€æœºé¢†åŸŸé¾™å¤´</td></tr><tr><td><strong>ä»£è¡¨åœºæ™¯</strong></td><td>DeFiã€NFTã€DAOã€Staking</td><td>æ•°æ®å–‚ä»·ã€è·¨é“¾æ•°æ®ä¼ è¾“</td></tr></tbody></table></li></ul><h3 id="ç¼–å†™FundMeä»£ç åœ¨é“¾ä¸Šç­¹æ¬¾"><a href="#ç¼–å†™FundMeä»£ç åœ¨é“¾ä¸Šç­¹æ¬¾" class="headerlink" title="ç¼–å†™FundMeä»£ç åœ¨é“¾ä¸Šç­¹æ¬¾"></a>ç¼–å†™FundMeä»£ç åœ¨é“¾ä¸Šç­¹æ¬¾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs solidity">// Get funds from users<br>// Withdraw funds<br>// Set a minimum funding value in ETH<br><br>// SPDX-License-Identifier: MIT<br>pragma solidity ^0.8.22;<br><br>contract FundMe &#123;<br><br>    uint256 public minimumETH = 0.01 * 1e18; // 1 * 10 ** 18<br><br>    address[] public funders;<br>    mapping(address =&gt; uint256) public addressToAmountFunded;<br>    <br>    function fund() public payable &#123;<br>        // Want to be able to set a minimum fund amount in currency<br>        // 1. How do we send ETH to this contract?<br>        require(msg.value &gt;= minimumETH, &quot;Didn&#x27;t send enough!&quot;);<br>        funders.push(msg.sender);<br>        addressToAmountFunded[msg.sender] = msg.value;<br>    &#125;<br><br>    function withdraw() public &#123;<br>        /* starting index, ending index, step amount */<br>        for (uint256 funderIndex = 0; funderIndex &lt; funders.length; funderIndex++) &#123;<br>            // code<br>            address funder = funders[funderIndex];<br>            addressToAmountFunded[funder] = 0;<br>        &#125;<br>        // resret the array<br>        funders = new address[](0);<br>        (bool callSuccess, ) =  payable(msg.sender).call&#123;value: address(this).balance&#125;(&quot;&quot;);<br>        require(callSuccess, &quot;Call failed&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Web3</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒºå—é“¾å…¥é—¨æŒ‡å—</title>
    <link href="/2025/03/01/Web3/"/>
    <url>/2025/03/01/Web3/</url>
    
    <content type="html"><![CDATA[<h1 id="åŒºå—é“¾ä¸åŠ å¯†è´§å¸å…¥é—¨æŒ‡å—"><a href="#åŒºå—é“¾ä¸åŠ å¯†è´§å¸å…¥é—¨æŒ‡å—" class="headerlink" title="åŒºå—é“¾ä¸åŠ å¯†è´§å¸å…¥é—¨æŒ‡å—"></a>åŒºå—é“¾ä¸åŠ å¯†è´§å¸å…¥é—¨æŒ‡å—</h1><h2 id="åŸºç¡€ç¯‡ï¼šåŒºå—é“¾ä¸åŠ å¯†è´§å¸åŸºç¡€"><a href="#åŸºç¡€ç¯‡ï¼šåŒºå—é“¾ä¸åŠ å¯†è´§å¸åŸºç¡€" class="headerlink" title="åŸºç¡€ç¯‡ï¼šåŒºå—é“¾ä¸åŠ å¯†è´§å¸åŸºç¡€"></a>åŸºç¡€ç¯‡ï¼šåŒºå—é“¾ä¸åŠ å¯†è´§å¸åŸºç¡€</h2><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><ul><li>ç†è§£åŒºå—é“¾åŸºæœ¬åŸç†</li><li>æŒæ¡åŠ å¯†è´§å¸åŸºç¡€çŸ¥è¯†</li><li>äº†è§£DeFiç”Ÿæ€ç³»ç»Ÿ</li><li>å°è¯•é“¾ä¸Šäº¤äº’</li></ul><h3 id="æ ¸å¿ƒå­¦ä¹ èµ„æº"><a href="#æ ¸å¿ƒå­¦ä¹ èµ„æº" class="headerlink" title="æ ¸å¿ƒå­¦ä¹ èµ„æº"></a>æ ¸å¿ƒå­¦ä¹ èµ„æº</h3><h3 id="1-å…¥é—¨"><a href="#1-å…¥é—¨" class="headerlink" title="1. å…¥é—¨"></a>1. å…¥é—¨</h3><ul><li><strong>è§†é¢‘æ•™ç¨‹</strong>:Â <a href="https://www.youtube.com/watch?v=bBC-nXj3Ng4">3Blue1Brownçš„â€æ¯”ç‰¹å¸å’ŒåŒºå—é“¾æ˜¯å¦‚ä½•å·¥ä½œçš„â€</a>Â - é€šè¿‡å¯è§†åŒ–æ–¹å¼è§£é‡ŠåŒºå—é“¾çš„åŸºæœ¬åŸç†</li><li><strong>åœ¨çº¿è¯¾ç¨‹</strong>:Â <a href="https://www.coursera.org/learn/blockchain-basics">Coursera - åŒºå—é“¾åŸºç¡€çŸ¥è¯†</a> &amp; <a href="https://space.bilibili.com/586660955/lists/894352">PKUå­¦ç”ŸåŒºå—é“¾ä¸­å¿ƒWEB3æ–°äººå…¬å¼€è¯¾</a></li><li><strong>ä¹¦ç±</strong>: ã€Šç²¾é€šæ¯”ç‰¹å¸ã€‹(Mastering Bitcoin) - Andreas Antonopoulosè‘—</li><li><strong>æŒ‡å—</strong>:Â <a href="https://yeasy.gitbook.io/blockchain_guide/">åŒºå—é“¾æŠ€æœ¯æŒ‡å—</a>Â - å®Œæ•´çš„ä¸­æ–‡åŒºå—é“¾å…¥é—¨èµ„æ–™</li><li><a href="https://www.youtube.com/watch?v=HNDkNXD0m20">DeFi å·¥å…·æ‰«ç›²</a></li></ul><h3 id="2-ç™½çš®ä¹¦"><a href="#2-ç™½çš®ä¹¦" class="headerlink" title="2. ç™½çš®ä¹¦"></a>2. ç™½çš®ä¹¦</h3><ul><li><strong>å®˜æ–¹æ–‡æ¡£</strong>:Â <a href="https://bitcoin.org/bitcoin.pdf">æ¯”ç‰¹å¸ç™½çš®ä¹¦</a>Â - äº†è§£æ¯”ç‰¹å¸çš„è®¾è®¡ç†å¿µ</li><li><strong>è§†é¢‘ï¼š</strong><a href="https://www.youtube.com/c/WhiteboardCrypto">Whiteboard Crypto</a>Â - ç®€åŒ–çš„åŠ å¯†è´§å¸æ•™å­¦</li></ul><h3 id="4-å®è·µé¡¹ç›®"><a href="#4-å®è·µé¡¹ç›®" class="headerlink" title="4. å®è·µé¡¹ç›®"></a>4. å®è·µé¡¹ç›®</h3><ol><li><strong>åˆ›å»ºå’Œç®¡ç†åŠ å¯†é’±åŒ…</strong><ul><li>OKX é’±åŒ…  &#x2F; Metamask &#x2F; â€¦</li><li>å­¦ä¹ ç§é’¥ç®¡ç†å’Œå®‰å…¨</li><li>åœ¨æµ‹è¯•ç½‘ç»œè·å–æµ‹è¯•ä»£å¸</li></ul></li><li><strong>ä½“éªŒåŸºæœ¬çš„åŒºå—é“¾äº¤äº’</strong><ul><li>åœ¨æµ‹è¯•ç½‘ç»œä¸Šå‘é€äº¤æ˜“</li><li>ä½¿ç”¨åŒºå—æµè§ˆå™¨å¦‚<a href="https://etherscan.io/">Etherscan</a>æŸ¥çœ‹äº¤æ˜“</li><li>å‚ä¸ç®€å•çš„ä»£å¸äº¤æ¢(ä½¿ç”¨Uniswapæµ‹è¯•ç½‘)</li></ul></li></ol><h2 id="è¿›é˜¶ç¯‡ï¼šæ™ºèƒ½åˆçº¦ä¸DeFi"><a href="#è¿›é˜¶ç¯‡ï¼šæ™ºèƒ½åˆçº¦ä¸DeFi" class="headerlink" title="è¿›é˜¶ç¯‡ï¼šæ™ºèƒ½åˆçº¦ä¸DeFi"></a>è¿›é˜¶ç¯‡ï¼šæ™ºèƒ½åˆçº¦ä¸DeFi</h2><h3 id="æ ¸å¿ƒå­¦ä¹ èµ„æº-1"><a href="#æ ¸å¿ƒå­¦ä¹ èµ„æº-1" class="headerlink" title="æ ¸å¿ƒå­¦ä¹ èµ„æº"></a>æ ¸å¿ƒå­¦ä¹ èµ„æº</h3><h3 id="1-æ™ºèƒ½åˆçº¦å¼€å‘"><a href="#1-æ™ºèƒ½åˆçº¦å¼€å‘" class="headerlink" title="1. æ™ºèƒ½åˆçº¦å¼€å‘"></a>1. æ™ºèƒ½åˆçº¦å¼€å‘</h3><h4 id="ETH"><a href="#ETH" class="headerlink" title="ETH"></a>ETH</h4><ul><li><a href="https://docs.soliditylang.org/">Solidityæ–‡æ¡£</a>Â - æ™ºèƒ½åˆçº¦çš„ç¼–ç¨‹è¯­è¨€</li><li><strong>å®è·µæŒ‡å—</strong>:Â <a href="https://cryptozombies.io/">CryptoZombies</a>Â - Solidity äº’åŠ¨å¼æ™ºèƒ½åˆçº¦å¼€å‘è¯¾ç¨‹</li></ul><h4 id="Solana"><a href="#Solana" class="headerlink" title="Solana"></a>Solana</h4><ul><li>Solana å®˜æ–¹æ–‡æ¡£</li></ul><h3 id="2-DeFiåè®®è§£æ"><a href="#2-DeFiåè®®è§£æ" class="headerlink" title="2. DeFiåè®®è§£æ"></a>2. DeFiåè®®è§£æ</h3><ul><li><strong>Uniswap</strong>:Â <a href="https://docs.uniswap.org/">Uniswapæ–‡æ¡£</a>Â - å­¦ä¹ AMMåŸç†</li><li><strong>Aave</strong>:Â <a href="https://docs.aave.com/developers/">Aaveå¼€å‘è€…æ–‡æ¡£</a>Â - äº†è§£å€Ÿè´·åè®®</li><li><a href="https://www.youtube.com/c/Finematics">Finematics</a> - ä¸“æ³¨DeFiæ•™å­¦çš„YouTubeé¢‘é“</li><li><a href="https://www.youtube.com/watch?v=HNDkNXD0m20">3Dçš„é¢‘é“ä¸­çš„å„ä¸ªåè®®</a></li></ul><h3 id="3-åŒºå—é“¾æ•°æ®åˆ†æ"><a href="#3-åŒºå—é“¾æ•°æ®åˆ†æ" class="headerlink" title="3. åŒºå—é“¾æ•°æ®åˆ†æ"></a>3. åŒºå—é“¾æ•°æ®åˆ†æ</h3><ul><li><strong>å­¦ä¹ èµ„æº</strong>:Â <a href="https://github.com/SixdegreeLab/MasteringChainAnalytics">ç²¾é€šé“¾ä¸Šæ•°æ®åˆ†æ</a>Â - ä»å…¥é—¨åˆ°é«˜çº§çš„é“¾ä¸Šæ•°æ®åˆ†ææ•™ç¨‹</li><li><strong>åˆ†æå¹³å°</strong>:Â <a href="https://dune.com/">Dune Analytics</a>Â - åŒºå—é“¾æ•°æ®å¯è§†åŒ–å¹³å°</li></ul><h2 id="ä»é›¶åˆ°æ— ç©·å¤§"><a href="#ä»é›¶åˆ°æ— ç©·å¤§" class="headerlink" title="ä»é›¶åˆ°æ— ç©·å¤§"></a>ä»é›¶åˆ°æ— ç©·å¤§</h2><h3 id="æ ¸å¿ƒå­¦ä¹ èµ„æº-2"><a href="#æ ¸å¿ƒå­¦ä¹ èµ„æº-2" class="headerlink" title="æ ¸å¿ƒå­¦ä¹ èµ„æº"></a>æ ¸å¿ƒå­¦ä¹ èµ„æº</h3><h3 id="1-MEV"><a href="#1-MEV" class="headerlink" title="1. MEV"></a>1. MEV</h3><ul><li><a href="https://github.com/33357/smartcontract-apps">æ™ºèƒ½åˆçº¦åº”ç”¨æŒ‡å—</a> åŒ…å«äº†å¸¸è§çš„å¥—åˆ©æ€è·¯</li><li><a href="https://docs.flashbots.net/">Flashbots</a>Â - ETH æ°‘ä¸»åŒ– MEV</li></ul><h3 id="2-å¼€æºå®ç°å‚è€ƒ"><a href="#2-å¼€æºå®ç°å‚è€ƒ" class="headerlink" title="2. å¼€æºå®ç°å‚è€ƒ"></a>2. å¼€æºå®ç°å‚è€ƒ</h3><ul><li><a href="https://github.com/duckdegen/apebot">ApeBot</a>Â å·²å¤±æ•ˆçš„ new listing snipper</li><li><a href="https://hummingbot.io/">Hummingbot</a></li></ul><h3 id="3-å®è·µé¡¹ç›®"><a href="#3-å®è·µé¡¹ç›®" class="headerlink" title="3. å®è·µé¡¹ç›®"></a>3. å®è·µé¡¹ç›®</h3><ol><li><strong>ä¿¡æ¯æœé›†</strong><ul><li>æ–°é—»çˆ¬å–ï¼Œæ–°é—»äº¤æ˜“</li><li>ç¤¾åŒºæƒ…ç»ªåˆ†æ</li><li>å¸‚åœºçƒ­ç‚¹æ”¶é›†ä¸åˆ†æ</li></ul></li><li><strong>é“¾ä¸Šæ•°æ®</strong><ul><li>ä½¿ç”¨Dune Analyticsåˆ›å»ºDeFiæ•°æ®çœ‹æ¿</li><li>è·Ÿè¸ªåè®®TVLã€äº¤æ˜“é‡ç­‰å…³é”®æŒ‡æ ‡</li><li>å®ç°ç®€å•çš„é“¾ä¸Šè¡Œä¸ºåˆ†æã€‚è€é¼ ä»“ï¼ˆå†…å¹•äº¤æ˜“ï¼‰ï¼Œå·¨é²¸æ£€æµ‹ã€‚botç›ˆåˆ©ã€ç­–ç•¥åˆ†æ</li><li>å¥—åˆ©æœºä¼šæ£€æµ‹ã€é£é™©ç›‘æ§</li></ul></li><li><strong>é“¾ä¸Šå¥—åˆ©</strong><ul><li><a href="https://github.com/33357/smartcontract-apps">æ™ºèƒ½åˆçº¦åº”ç”¨æŒ‡å—</a> æ¶µç›–äº†å¸¸è§çš„å¥—åˆ©æ€è·¯ï¼Œæ¯”è¾ƒç®€ç•¥</li><li><a href="https://github.com/antaintan/uniswap-arbitrage-analysis">Uniswapå¥—åˆ©åˆ†æ</a> ç»å…¸å®æˆ˜æ¡ˆä¾‹åˆ†æ</li></ul></li><li><strong>DeFiåè®®åˆ†æ</strong><ul><li>åˆ†æUniswapçš„æ™ºèƒ½åˆçº¦ä»£ç </li><li>ç†è§£å€Ÿè´·åè®®çš„é£é™©æ¨¡å‹</li><li>ç ”ç©¶æµåŠ¨æ€§æŒ–çŸ¿æœºåˆ¶</li></ul></li><li><strong>MEVç ”ç©¶</strong><ul><li>æ£€æµ‹å’Œç›‘æ§ MEV è¡Œä¸º</li></ul></li><li><strong>å·¥å…·ä¸èµ„æº</strong>:<ul><li><a href="https://www.tradingview.com/">TradingView</a></li><li>dune</li><li><a href="https://defillama.com/">DeFi Llama</a> - DeFiåè®®è·Ÿè¸ªä¸åˆ†æ</li><li><a href="https://messari.io/">Messari</a> - åŒä¸Š</li><li>geckoterminal - DEX æ•°æ®æŸ¥çœ‹å™¨</li><li>solscan, etherscan â€¦</li></ul></li></ol><h2 id="æŒç»­å­¦ä¹ èµ„æº"><a href="#æŒç»­å­¦ä¹ èµ„æº" class="headerlink" title="æŒç»­å­¦ä¹ èµ„æº"></a>æŒç»­å­¦ä¹ èµ„æº</h2><h3 id="æ–°é—»"><a href="#æ–°é—»" class="headerlink" title="æ–°é—»"></a>æ–°é—»</h3><ul><li><a href="https://www.theblock.co/">The Block</a>Â - åŒºå—é“¾æ–°é—»</li><li>æ¨ç‰¹<ul><li>AggrNews</li><li>BWENews (æ–¹ç¨‹å¼æ–°é—»)</li><li>â€¦</li></ul></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Web3</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‘½åå®ä½“è¯†åˆ«&amp;å…³ç³»æŠ½å– å°ç»“</title>
    <link href="/2025/02/21/%E5%91%BD%E5%90%8D%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB&amp;%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%20%E5%B0%8F%E7%BB%93/"/>
    <url>/2025/02/21/%E5%91%BD%E5%90%8D%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB&amp;%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%20%E5%B0%8F%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h4 id="BIOæ ‡è®°æ³•"><a href="#BIOæ ‡è®°æ³•" class="headerlink" title="BIOæ ‡è®°æ³•"></a>BIOæ ‡è®°æ³•</h4><p><strong>B-ï¼ˆBeginï¼‰</strong>ï¼šè¡¨ç¤ºä¸€ä¸ªå®ä½“çš„<strong>å¼€å§‹</strong>ï¼ˆé¦–ä¸ª tokenï¼‰ã€‚</p><p><strong>I-ï¼ˆInsideï¼‰</strong>ï¼šè¡¨ç¤ºå®ä½“çš„<strong>å†…éƒ¨</strong>ï¼ˆé™¤é¦–ä¸ª token ä»¥å¤–çš„éƒ¨åˆ†ï¼‰ã€‚</p><p><strong>O-ï¼ˆOutsideï¼‰</strong>ï¼šè¡¨ç¤º<strong>éå®ä½“</strong>çš„ tokenã€‚</p><p>ä¾‹å¦‚ï¼š**â€Apple Inc. is based in California.â€</p><p>BIO æ ‡æ³¨ï¼š</p><table><thead><tr><th>Token</th><th>BIO æ ‡ç­¾</th></tr></thead><tbody><tr><td>Apple</td><td><strong>B-ORG</strong></td></tr><tr><td>Inc.</td><td><strong>I-ORG</strong></td></tr><tr><td>is</td><td><strong>O</strong></td></tr><tr><td>based</td><td><strong>O</strong></td></tr><tr><td>in</td><td><strong>O</strong></td></tr><tr><td>California</td><td><strong>B-LOC</strong></td></tr><tr><td>.</td><td><strong>O</strong></td></tr></tbody></table><p><strong>å¸¸è§çš„å®ä½“ç±»åˆ«</strong></p><table><thead><tr><th>å®ä½“ç±»åˆ«</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>PER</strong> (Person)</td><td>äººåï¼ˆä¾‹å¦‚ï¼šElon Musk, Bill Gatesï¼‰</td></tr><tr><td><strong>ORG</strong> (Organization)</td><td>ç»„ç»‡åï¼ˆä¾‹å¦‚ï¼šApple, Google, NASAï¼‰</td></tr><tr><td><strong>LOC</strong> (Location)</td><td>åœ°åï¼ˆä¾‹å¦‚ï¼šCalifornia, Beijing, Parisï¼‰</td></tr><tr><td><strong>MISC</strong> (Miscellaneous)</td><td>å…¶ä»–ï¼ˆä¾‹å¦‚ï¼šå“ç‰Œåã€äº‹ä»¶åç­‰ï¼‰</td></tr></tbody></table><p>åœ¨ <strong>NER ä»»åŠ¡</strong> ä¸­ï¼ŒBIO æ ‡ç­¾å¸¸ä½œä¸º<strong>åºåˆ—æ ‡æ³¨æ¨¡å‹</strong>ï¼ˆå¦‚ BiLSTM-CRFã€Transformerï¼‰è®­ç»ƒçš„ç›®æ ‡</p><p><strong>è®­ç»ƒæ¨¡å‹</strong></p><ul><li><strong>è¾“å…¥</strong>ï¼šWord Embeddingsï¼ˆå¦‚ BERT, GloVeï¼‰</li><li><strong>æ¨¡å‹</strong>ï¼šBiLSTM + CRF &#x2F; Transformer</li><li><strong>è¾“å‡º</strong>ï¼šBIO æ ‡æ³¨åºåˆ—</li></ul><p><strong>é¢„æµ‹æ–°æ–‡æœ¬</strong></p><p>è¾“å…¥æ–°æ–‡æœ¬åï¼Œæ¨¡å‹é¢„æµ‹å¯¹åº”çš„ BIO æ ‡ç­¾ï¼Œä»è€Œ<strong>æå–å®ä½“</strong>ã€‚</p><h4 id="RE-Relation-Extraction-è®­ç»ƒé›†"><a href="#RE-Relation-Extraction-è®­ç»ƒé›†" class="headerlink" title="RE(Relation Extraction)è®­ç»ƒé›†"></a>RE(Relation Extraction)è®­ç»ƒé›†</h4><p><strong>spo:</strong> subject-predicate-object å¤´å®ä½“-å…³ç³»-å°¾å®ä½“</p><p><strong>è®­ç»ƒé›†ä¸­çš„Predicateåˆ—è¡¨</strong></p><p>â€‹{<br>      â€œOâ€: 0,<br>      â€œIâ€: 1,<br>      â€œæ³¨å†Œèµ„æœ¬â€: 2,<br>      â€œä½œè€…â€: 3,<br>      â€œæ‰€å±ä¸“è¾‘â€: 4,<br>      â€œæ­Œæ‰‹â€: 5,<br>      â€¦<br>      â€œä¸Šæ˜ æ—¶é—´_@valueâ€: 8,<br>      â€œä¸Šæ˜ æ—¶é—´_@areaâ€: 9,<br>      â€¦<br>â€‹}</p><p>å¯¹äºåŒä¸€ä¸ªS-Pï¼Œå¥å­ä¸­æ˜¯å¯èƒ½å­˜åœ¨å¤šä¸ªä¸åŒçš„åˆæ³•Oçš„ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæˆ–å¤šä¸ªä¸åŒçš„S-Pæ¥å¯¹åº”è¿™äº›ä¸åŒçš„Oã€‚ä¸€ç§æœ€å¸¸è§çš„æ–¹æ³•å°±æ˜¯å¯¹På†è¿›è¡Œç»†åˆ†ã€‚å¦‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„â€œä¸Šæ˜ æ—¶é—´_@valueâ€å’Œâ€ä¸Šæ˜ æ—¶é—´_@areaâ€œ</p><p><strong>è®­ç»ƒé›†ä¸­çš„spoåˆ—è¡¨</strong></p><p>â€‹{<br>      â€œpredicateâ€: [â€œemptyâ€, â€œemptyâ€, â€œæ³¨å†Œèµ„æœ¬â€, â€œä½œè€…â€, â€œæ‰€å±ä¸“è¾‘â€, â€¦],<br>      â€œsubject_typeâ€: [â€œemptyâ€, â€œemptyâ€, â€œä¼ä¸šâ€, â€œå›¾ä¹¦ä½œå“â€, â€œæ­Œæ›²â€, â€¦],<br>      â€œobject_typeâ€: [â€œemptyâ€, â€œemptyâ€, â€œNumberâ€, â€œäººç‰©â€, â€œéŸ³ä¹ä¸“è¾‘â€, â€¦]<br>â€‹}</p><p>å‰ä¸¤ä¸ªemptyæ˜¯ä¸ºäº†Oå’ŒIæ ‡ç­¾ç•™çš„,å› ä¸ºä¹‹å‰å®šä¹‰çš„predicateåˆ—è¡¨ä¸­çš„å‰2ä¸ªæ ‡ç­¾åˆ†åˆ«ä¸ºOã€Iï¼Œè¿™ä¸¤ä¸ªæ ‡ç­¾ä¸ä¼šèµ·åˆ°è¿æ¥é¦–å°¾å®ä½“çš„ä½œç”¨ï¼Œå› æ­¤éœ€è¦ç½®ä¸ºemptyã€‚</p><h4 id="NERæ¨¡å‹çš„è®­ç»ƒåŸç†"><a href="#NERæ¨¡å‹çš„è®­ç»ƒåŸç†" class="headerlink" title="NERæ¨¡å‹çš„è®­ç»ƒåŸç†"></a>NERæ¨¡å‹çš„è®­ç»ƒåŸç†</h4><p>å°†å®ä½“æŠ½å–é—®é¢˜è½¬åŒ–ä¸ºToken Classficationé—®é¢˜ã€‚</p><p>Quesï¼šå¦‚ä½•å®ç°å…³ç³»æŠ½å–ï¼Ÿ </p><p>Ansï¼šåœ¨å­—ç¬¦ç±»åˆ«ä¸­æ·»åŠ å…¥ã€Œå…³ç³»æ ‡ç­¾ã€ï¼Œå³è¯¥å­—ç¬¦æ˜¯å¦èƒ½å’Œè¿™å¥è¯å½“ä¸­çš„å…¶ä»–å­—ç¬¦äº§ç”Ÿå…³è”å…³ç³»ã€‚</p><p><img src="/article_img/NER/NER.png" alt="NER model"></p><p>å¯¹æ¯ä¸ªtokenï¼Œlabelä¸€å…±æœ‰ï¼ˆ2N + 2ï¼‰ç»´ï¼Œå…¶ä¸­ N ä¸º Predicate çš„ç±»åˆ«ä¸ªæ•°</p><p>æŸå¤±å‡½æ•°ä¸€èˆ¬ä½¿ç”¨BCE Loss</p>]]></content>
    
    
    
    <tags>
      
      <tag>NER</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GraphRAGç»¼è¿°</title>
    <link href="/2025/02/20/GraphRAG%E7%BB%BC%E8%BF%B0/"/>
    <url>/2025/02/20/GraphRAG%E7%BB%BC%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h4 id="Sec-1-ä¼ ç»ŸRAGç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜"><a href="#Sec-1-ä¼ ç»ŸRAGç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜" class="headerlink" title="Sec.1 ä¼ ç»ŸRAGç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜"></a>Sec.1 ä¼ ç»ŸRAGç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜</h4><p><strong>å¤æ‚çš„æŸ¥è¯¢ç†è§£ï¼š</strong>ä¼ ç»Ÿçš„ RAG æ–¹æ³•ä¾èµ–äºç®€å•çš„å…³é”®å­—åŒ¹é…å’Œå‘é‡ç›¸ä¼¼æ€§æŠ€æœ¯ï¼Œä¸è¶³ä»¥æ•æ‰å‡†ç¡®å’Œå…¨é¢æ‰€éœ€çš„æ·±å±‚è¯­ä¹‰ç»†å¾®å·®åˆ«å’Œå¤šæ­¥éª¤æ¨ç†è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œå½“è¯¢é—®æ¦‚å¿µ A å’Œæ¦‚å¿µ D ä¹‹é—´çš„è”ç³»æ—¶ï¼Œè¿™äº›ç³»ç»Ÿé€šå¸¸åªæ£€ç´¢ç›´æ¥ç›¸å…³çš„ä¿¡æ¯ï¼Œè€Œé”™è¿‡äº†åƒ B å’Œ C è¿™æ ·å¯ä»¥å¼¥åˆå…³ç³»çš„å…³é”®ä¸­é—´æ¦‚å¿µã€‚è¿™ç§ç‹­çª„çš„æ£€ç´¢èŒƒå›´é™åˆ¶äº† RAG çš„èƒ½åŠ›ï¼Œä½¿å…¶æ— æ³•è¿›è¡Œå¹¿æ³›çš„ä¸Šä¸‹æ–‡ç†è§£å’Œå¤æ‚çš„æ¨ç†</p><p><strong>é›†æˆæ¥è‡ªåˆ†å¸ƒå¼æºçš„é¢†åŸŸçŸ¥è¯†ï¼š</strong>æ£€ç´¢åˆ°çš„çŸ¥è¯†é€šå¸¸æ˜¯æ‰å¹³çš„ã€å¹¿æ³›çš„å’Œé”™ç»¼å¤æ‚çš„ï¼Œè€Œé¢†åŸŸæ¦‚å¿µé€šå¸¸åˆ†æ•£åœ¨å¤šä¸ªæ–‡æ¡£ä¸­ï¼Œä¸åŒæ¦‚å¿µä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„å±‚æ¬¡ç»“æ„å…³ç³»ã€‚å°½ç®¡ RAG ç³»ç»Ÿè¯•å›¾é€šè¿‡å°†æ–‡æ¡£åˆ’åˆ†ä¸ºè¾ƒå°çš„å—ä»¥å®ç°æœ‰æ•ˆå’Œé«˜æ•ˆçš„ç´¢å¼•æ¥ç®¡ç†è¿™ç§å¤æ‚æ€§ï¼Œä½†è¿™ç§æ–¹æ³•æ— æ„ä¸­ç‰ºç‰²äº†å…³é”®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¸¥é‡æŸå®³äº†æ£€ç´¢å‡†ç¡®æ€§å’Œä¸Šä¸‹æ–‡ç†è§£ã€‚è¿™ç§é™åˆ¶é˜»ç¢äº†åœ¨ç›¸å…³çŸ¥è¯†ç‚¹ä¹‹é—´å»ºç«‹å¼ºå¤§è”ç³»çš„èƒ½åŠ›ï¼Œå¯¼è‡´ç†è§£ç¢ç‰‡åŒ–ï¼Œå¹¶é™ä½åˆ©ç”¨ç‰¹å®šé¢†åŸŸä¸“ä¸šçŸ¥è¯†çš„æ•ˆç‡ã€‚</p><p><strong>LLMçš„å›ºæœ‰çº¦æŸï¼š</strong>å—åˆ°å…¶å›ºå®šä¸Šä¸‹æ–‡çª—å£çš„é™åˆ¶ï¼ŒLLMæ— æ³•å®Œå…¨æ•è·å¤æ‚æ–‡æ¡£ä¸­çš„é•¿è·ç¦»ä¾èµ–å…³ç³»ã€‚åœ¨ä¸“ä¸šé¢†åŸŸä¸­ï¼Œåœ¨å¹¿æ³›çš„çŸ¥è¯†èƒŒæ™¯ä¸‹ä¿æŒè¿è´¯æ€§çš„æŒ‘æˆ˜å˜å¾—è¶Šæ¥è¶Šæ£˜æ‰‹ï¼Œå› ä¸ºå…³é”®ä¿¡æ¯å¯èƒ½ä¼šåœ¨ä¸Šä¸‹æ–‡çª—å£æˆªæ–­æœŸé—´ä¸¢å¤±ã€‚</p><p><strong>ç³»ç»Ÿæ•ˆç‡å’Œå¯æ‹“å±•æ€§ï¼š</strong>RAG ç³»ç»Ÿåœ¨è®¡ç®—ä¸Šå¯èƒ½æ—¢æ˜‚è´µåˆè€—æ—¶ ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§è§„æ¨¡çŸ¥è¯†æºæ—¶ï¼Œå› ä¸ºæ¨¡å‹éœ€è¦æœç´¢å¤§é‡éç»“æ„åŒ–æ–‡æœ¬ä»¥æŸ¥æ‰¾ç›¸å…³ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œå®æ—¶æ£€ç´¢å’Œè·¨æ–‡æ¡£æ¨ç†å¯èƒ½ä¼šå¸¦æ¥ç›¸å½“å¤§çš„å»¶è¿Ÿï¼Œä»è€Œå¯¹ç”¨æˆ·ä½“éªŒäº§ç”Ÿè´Ÿé¢å½±å“ã€‚æ­¤å¤–ï¼Œå®æ—¶æ£€ç´¢å’Œè·¨æ–‡æ¡£æ¨ç†å¯èƒ½ä¼šå¸¦æ¥ç›¸å½“å¤§çš„å»¶è¿Ÿï¼Œä»è€Œå¯¹ç”¨æˆ·ä½“éªŒäº§ç”Ÿè´Ÿé¢å½±å“ï¼Œä»è€Œé™åˆ¶äº†å®ƒåœ¨å¹¿æ³›å’ŒåŠ¨æ€çš„ä¸“ä¸šç¯å¢ƒä¸­çš„å®é™…éƒ¨ç½²</p><h4 id="Sec-2-ç°æœ‰çš„GraphRAGåˆ†ç±»"><a href="#Sec-2-ç°æœ‰çš„GraphRAGåˆ†ç±»" class="headerlink" title="Sec.2 ç°æœ‰çš„GraphRAGåˆ†ç±»"></a>Sec.2 ç°æœ‰çš„GraphRAGåˆ†ç±»</h4><p><strong>åŸºäºçŸ¥è¯†çš„GraphRAG:</strong> å®ƒä½¿ç”¨å›¾ä½œä¸ºçŸ¥è¯†è½½ä½“ï¼Œä¸“æ³¨äºå°†éç»“æ„åŒ–æ–‡æœ¬æ–‡æ¡£è½¬æ¢ä¸ºæ˜¾å¼å’Œç»“æ„åŒ–çš„ KGï¼Œå…¶ä¸­nodeä»£è¡¨é¢†åŸŸæ¦‚å¿µï¼Œedgeæ•è·å®ƒä»¬ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ï¼Œä»è€Œæ›´å¥½åœ°è¡¨ç¤ºåˆ†å±‚å…³ç³»å’Œå¤æ‚çš„çŸ¥è¯†ä¾èµ–å…³ç³»</p><p><strong>åŸºäºç´¢å¼•çš„GraphRAG:</strong> ä½¿ç”¨å›¾ä½œä¸ºç´¢å¼•å·¥å…·ä»è¯­æ–™åº“ä¸­æ£€ç´¢ç›¸å…³çš„åŸå§‹æ–‡æœ¬ï¼Œå®ƒä¿ç•™äº†åŸå§‹æ–‡æœ¬å½¢å¼ï¼ŒåŒæ—¶ä¸»è¦å°†å›¾å½¢ç»“æ„ç”¨ä½œç´¢å¼•æœºåˆ¶æ¥æœ‰æ•ˆåœ°ç»„ç»‡å’Œæ£€ç´¢ç›¸å…³æ–‡æœ¬å—ã€‚é€šè¿‡å°†å›¾å½¢ç»“æ„åˆå¹¶åˆ°æ–‡æœ¬ç´¢å¼•ä¸­ï¼ŒåŸºäºç´¢å¼•çš„ GraphRAG æ–¹æ³•åœ¨æ–‡æœ¬å—ä¹‹é—´å»ºç«‹è¯­ä¹‰è¿æ¥ï¼Œä»¥å®ç°é«˜æ•ˆçš„æŸ¥æ‰¾ä½œå’Œæ£€ç´¢</p><p><strong>åŸºäºçŸ¥è¯†çš„ GraphRAG æ—¨åœ¨é€šè¿‡åŸºäºå›¾çš„æ¨ç†èƒ½åŠ›åˆ›å»ºç»“æ„åŒ–çš„çŸ¥è¯†è¡¨ç¤ºï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£å¤æ‚çš„å…³ç³»ï¼›è€ŒåŸºäºç´¢å¼•çš„ GraphRAG åˆ™ä¾§é‡äºé€šè¿‡åŸºäºå›¾çš„ç´¢å¼•ç­–ç•¥ä¼˜åŒ–ç›¸å…³æ–‡æœ¬ä¿¡æ¯çš„æ£€ç´¢å’Œå¯è®¿é—®æ€§</strong></p><h4 id="Sec-3-Overview-the-Framework-of-RAG"><a href="#Sec-3-Overview-the-Framework-of-RAG" class="headerlink" title="Sec.3 Overview the Framework of RAG"></a>Sec.3 Overview the Framework of RAG</h4><p>RAGæ¡†æ¶ä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼ŒKnowledge Organization,Knowledge Retrieval,Knowledge Integrationã€‚ä¸‹å›¾å±•ç¤ºäº†ä¼ ç»ŸRAGã€åŸºäºçŸ¥è¯†çš„GraphRAGå’ŒåŸºäºç´¢å¼•çš„GraphRAGåœ¨è¿™ä¸‰éƒ¨åˆ†çš„å„è‡ªå®ç°æ–¹å¼ã€‚</p><p><img src="/../article_img/20250220/img1.png" alt="ä¼ ç»Ÿ RAG å’Œä¸¤ä¸ªå…¸å‹ GraphRAG å·¥ä½œæµç¨‹çš„å…¨é¢æ¦‚è¿°ã€‚ä¼ ç»Ÿ RAG å°†è¯­æ–™åº“ç»„ç»‡æˆå—ï¼ŒæŒ‰ç›¸ä¼¼æ€§å¯¹å®ƒä»¬è¿›è¡Œæ’åï¼Œå¹¶æ£€ç´¢æœ€ç›¸å…³çš„æ–‡æœ¬ä»¥ç”Ÿæˆå“åº”ã€‚åŸºäºçŸ¥è¯†çš„ GraphRAG ä½¿ç”¨å®ä½“è¯†åˆ«å’Œå…³ç³»æå–ä»è¯­æ–™åº“ä¸­æå–è¯¦ç»†çš„çŸ¥è¯†å›¾è°±ï¼Œæä¾›ç²¾ç»†çš„ã€ç‰¹å®šäºé¢†åŸŸçš„ä¿¡æ¯ã€‚åŸºäºç´¢å¼•çš„ GraphRAG å°†è¯­æ–™åº“æ€»ç»“ä¸ºé«˜çº§ä¸»é¢˜èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹é“¾æ¥ä»¥å½¢æˆç´¢å¼•å›¾ï¼Œè€Œäº‹å®é“¾æ¥å°†ä¸»é¢˜æ˜ å°„åˆ°æ–‡æœ¬ã€‚è¿™ç§ä¸¤å±‚ç»“æ„å°†é«˜æ•ˆçš„ä¸»é¢˜æ£€ç´¢ä¸è¯¦ç»†çš„æ–‡æœ¬çŸ¥è¯†ç›¸ç»“åˆï¼Œä¸åŸºäºçŸ¥è¯†çš„ GraphRAG ç›¸æ¯”ï¼Œæä¾›äº†å¯æ‰©å±•æ€§å’Œæ€§èƒ½"></p><p><strong>Knowledge Organization:  è¯¥éƒ¨åˆ†å…³æ³¨å¤–éƒ¨çŸ¥è¯†åº“çš„æ„å»º</strong></p><p><strong>ä¼ ç»ŸRAG</strong>ï¼šä¼ ç»ŸRAGä¸»è¦é‡‡ç”¨å°†å¤§è§„æ¨¡æ–‡æœ¬è¯­æ–™åº“æ‹†åˆ†ä¸ºå¯ç®¡ç†å—çš„ç­–ç•¥ï¼Œç„¶åä½¿ç”¨åµŒå…¥æ¨¡å‹å°†è¿™äº›å—è½¬æ¢ä¸ºåµŒå…¥ï¼Œå…¶ä¸­åµŒå…¥ç”¨ä½œå‘é‡æ•°æ®åº“ä¸­åŸå§‹æ–‡æœ¬å—çš„é”®ã€‚æ­¤è®¾ç½®é€šè¿‡åœ¨è¯­ä¹‰ç©ºé—´ä¸­åŸºäºè·ç¦»çš„æœç´¢å®ç°é«˜æ•ˆçš„æŸ¥æ‰¾ä½œå’Œæ£€ç´¢ç›¸å…³å†…å®¹ã€‚å¸¸è§çš„ä¼˜åŒ–æ–¹æ³•ï¼š<strong>ç²’åº¦ä¼˜åŒ–</strong>å’Œ<strong>ç´¢å¼•ä¼˜åŒ–</strong>ã€‚</p><p><strong>GraphRAG:</strong> åŸºäºå›¾çš„æ–¹æ³•æ„å»ºå¤–éƒ¨ä¿¡æ¯ï¼Œé€šè¿‡æ˜¾å¼çŸ¥è¯†è¡¨ç¤ºï¼ˆä½œä¸ºçŸ¥è¯†è½½ä½“çš„å›¾ï¼‰æˆ–ç´¢å¼•æœºåˆ¶ï¼ˆç”¨äºçŸ¥è¯†ç´¢å¼•çš„å›¾ï¼‰ã€‚è¿™äº›æ–¹æ³•å¯å®ç°é«˜æ•ˆçš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥ä¿¡æ¯æ£€ç´¢ã€‚</p><p><strong>Knowledge Retrieval: è¯¥éƒ¨åˆ†å…³æ³¨å¦‚ä½•æ›´ç²¾å‡†é«˜æ•ˆçš„è¿›è¡Œæ£€ç´¢</strong></p><p><strong>ä¼ ç»ŸRAG</strong>: å¸¸æ¶‰åŠçš„æ£€ç´¢æ–¹æ³•ï¼šKNNã€TF-IDFã€BM25ã€‚ä¸ºäº†æé«˜æ£€ç´¢çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ï¼Œä¸€æ–¹é¢å¯ä»¥åœ¨æ£€ç´¢å‰é€šè¿‡ä¼˜åŒ–è¡¨ç¤ºæˆ–é‡æ’åºç­‰æŠ€æœ¯æ¥æé«˜æ£€ç´¢æ¨¡å‹çš„å‡†ç¡®æ€§ï¼Œä¾‹å¦‚<a href="https://arxiv.org/pdf/2009.08553">GAR</a>ã€<a href="https://arxiv.org/pdf/2305.17080">EAR</a>ç­‰ï¼›å¦ä¸€æ–¹é¢ï¼Œå¯¹æ£€ç´¢æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œä¾‹å¦‚<a href="https://arxiv.org/pdf/2301.12652">Replug</a>ï¼Œ<a href="https://www.jmlr.org/papers/volume24/23-0037/23-0037.pdf">Atlas</a>ï¼Œ<a href="https://arxiv.org/pdf/2305.06983">Flare</a>ç­‰ã€‚</p><p><strong>GraphRAG:</strong> GraphRAG æ¨¡å‹ä½¿ç”¨åŸºäºå›¾çš„è§„åˆ’å™¨ï¼ˆå¯å­¦ä¹ çš„è§„åˆ’å™¨æˆ–åŸºäºå›¾ç®—æ³•çš„è§„åˆ’å™¨ï¼‰æ ¹æ®è¾“å…¥æŸ¥è¯¢æ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚è¿™äº›æ£€ç´¢æŠ€æœ¯ä¸ä»…è€ƒè™‘äº†æŸ¥è¯¢å’Œæ¯ä¸ªæ–‡æœ¬å—ä¹‹é—´çš„è¯­ä¹‰ç›¸ä¼¼æ€§ï¼Œè¿˜è€ƒè™‘äº†æŸ¥è¯¢ç±»å‹å’Œæ£€ç´¢åˆ°çš„å­å›¾ä¹‹é—´çš„é€»è¾‘è¿è´¯æ€§</p><p><strong>Knowledge Integration:  è¯¥éƒ¨åˆ†å…³æ³¨å¦‚ä½•å°†æ£€ç´¢ç»“æœå’Œç”¨æˆ·æŸ¥è¯¢é«˜è´¨é‡æ•´åˆ</strong></p><p><strong>ä¼ ç»ŸRAG</strong>:æé«˜æ£€ç´¢åˆ°çš„å†…å®¹çš„è´¨é‡ï¼šå¼ºåŒ–å­¦ä¹ æ–¹æ³•<a href="https://www.sciencedirect.com/science/article/pii/S294971912400013X">LeanContext</a> LLMè‡ªè¯„ä¼°æ–¹æ³•<a href="https://arxiv.org/pdf/2310.11511">Self-RAG</a>  <a href="https://arxiv.org/pdf/2307.03027">è¯„ä¼°æ£€ç´¢å†…å®¹é‡è¦æ€§</a>ã€‚æ­¤å¤–ï¼Œè€ƒè™‘åˆ°å¯¹å¤§é‡æ£€ç´¢åˆ°çš„æ®µè½è¿›è¡Œç¼–ç æ˜¯èµ„æºå¯†é›†å‹çš„ï¼Œè¿™ä¼šå¯¼è‡´å¤§é‡çš„è®¡ç®—å’Œå†…å­˜å¼€é”€ï¼Œç›¸å…³ä¼˜åŒ–æ–¹æ³•ï¼š<a href="https://arxiv.org/pdf/2404.12457">RAGCache</a> <a href="https://arxiv.org/pdf/2310.15556">TCRA-LLM</a></p><p><strong>GraphRAG:</strong> ä¸€æ—¦æ£€ç´¢åˆ°ç›¸å…³çŸ¥è¯†ï¼ŒGraphRAG æ¨¡å‹å°±ä¼šå°†å…¶ä¸ç”¨æˆ·æŸ¥è¯¢æ•´åˆèµ·æ¥ä½œä¸ºLLM inputã€‚é›†æˆè¿‡ç¨‹çš„ç›®æ ‡æ˜¯å°†æ£€ç´¢åˆ°çš„çŸ¥è¯†æ— ç¼åˆå¹¶åˆ°ç”Ÿæˆçš„æ–‡æœ¬ä¸­ï¼Œä»è€Œæé«˜å…¶è´¨é‡å’Œä¿¡æ¯é‡ã€‚ä¸€ä¸ªå…³é”®çš„è®¾è®¡è€ƒè™‘å› ç´ æ˜¯ï¼Œå¦‚ä½•åœ¨æœ€ç»ˆçš„åŸºäºæ–‡æœ¬çš„æç¤ºä¸­ä¿ç•™æ£€ç´¢åˆ°çš„å­å›¾ä¿¡æ¯çš„ä¸°å¯Œæ€§ï¼Œè€Œä¸ä¼šå¼•å…¥å†—ä½™æˆ–é”™è¯¯åœ°å¼ºè°ƒæ–‡æœ¬æè¿°ä¸­ä¸å¤ªå…³é”®çš„æ–¹é¢</p><h4 id="Sec-4-Knowledge-Organization-in-GraphRAG"><a href="#Sec-4-Knowledge-Organization-in-GraphRAG" class="headerlink" title="Sec.4 Knowledge Organization in GraphRAG"></a>Sec.4 Knowledge Organization in GraphRAG</h4><p>é¦–å…ˆæ„å»ºä¸€ä¸ªå›¾ç»“æ„æ¥ç»„ç»‡çŸ¥è¯†ï¼Œç„¶åæ£€ç´¢å’Œé›†æˆä¸æŸ¥è¯¢ç›¸å…³çš„ä¿¡æ¯ã€‚ä¸‹é¢å¯¹Sec.2 æåˆ°çš„èŒƒå¼å±•å¼€å…·ä½“ä»‹ç»ã€‚</p><p><strong>Graphs for Knowledge Indexing</strong></p><p>â€‹åŸºäºç´¢å¼•çš„ GraphRAG æ–¹æ³•åˆ©ç”¨å›¾ç»“æ„æ¥ç´¢å¼•å’Œæ£€ç´¢ç›¸å…³çš„åŸå§‹æ–‡æœ¬å—ï¼Œç„¶åå°†å…¶é¦ˆé€åˆ° LLM ä¸­ä»¥è¿›è¡ŒçŸ¥è¯†æ³¨å…¥å’Œä¸Šä¸‹æ–‡ç†è§£ã€‚è¿™äº›ç´¢å¼•å›¾åº”ç”¨è¯­ä¹‰ç›¸ä¼¼æ€§æˆ–ç‰¹å®šäºåŸŸçš„å…³ç³»ç­‰åŸåˆ™æ¥æœ‰æ•ˆåœ°æ¡¥æ¥å•ç‹¬æ–‡æœ¬æ®µè½ä¹‹é—´çš„è¿æ¥ã€‚ä¸ä»…å°†å›¾ç”¨ä½œçŸ¥è¯†è½½ä½“ç›¸æ¯”ï¼Œè¿™ç§æŠ€æœ¯é€šè¿‡ç›´æ¥æ€»ç»“ä¸æŸ¥è¯¢ç›¸å…³çš„åŸå§‹æ–‡æœ¬å—ä¸­çš„ä¿¡æ¯æ¥æä¾›æ›´ä¸°å¯Œçš„ç­”æ¡ˆã€‚</p><p>â€‹é¢ä¸´çš„æŒ‘æˆ˜ï¼šï¼ˆ1ï¼‰ <strong>ç®€æ´æ€§å’Œç›¸å…³æ€§</strong>ï¼šç¡®ä¿æ„å»ºçš„å›¾ä»…æ•è·ç›¸å…³å…³ç³»ï¼Œè€Œä¸ä¼šå› ä¸å¿…è¦çš„è¿æ¥è€Œè¿‡è½½ï¼Œè¿™æ˜¯ä¸€é¡¹é‡å¤§æŒ‘æˆ˜ï¼Œä»è€Œæœ‰åŠ©äºæœ‰æ•ˆè°ƒç”¨ç›¸å…³æ–‡æœ¬å—è€Œä¸ä¼šäº§ç”Ÿå†—ä½™ ï¼ˆ2ï¼‰<strong>ä¸€è‡´æ€§å’Œå†²çªè§£å†³ï¼š</strong>ä¸åŒçš„æ•°æ®å—å¯èƒ½ä¼šå¼•å…¥å†²çªçš„ä¿¡æ¯ã€‚è§£å†³è¿™äº›å†²çªå¹¶ç¡®ä¿å›¾ä¿æŒä¸€è‡´ã€å¯é å’Œç»“æ„è‰¯å¥½è‡³å…³é‡è¦ã€‚</p><p><strong>Graphs for Knowledge Carriers</strong></p><p>â€‹ä¼˜åŠ¿ï¼š1ï¼‰é«˜æ•ˆæ£€ç´¢ä¸æŸ¥è¯¢ç›¸å…³çš„çŸ¥è¯† 2ï¼‰é•¿è·¨åº¦çš„è¿è´¯å¤šæ­¥æ¨ç†  </p><p>â€‹å±€é™æ€§ï¼šï¼ˆ1ï¼‰ <strong>ç¼ºä¹é«˜è´¨é‡çš„ KGï¼š</strong>å¯¹äºç›´æ¥ä½¿ç”¨KGä½œä¸ºå¤–éƒ¨çŸ¥è¯†åº“ï¼Œè¿™ä¸€ç ”ç©¶æ–¹å‘å—åˆ°é«˜è´¨é‡KGå¯ç”¨æ€§çš„é™åˆ¶ã€‚æ„å»ºKGæ˜¯èµ„æºå¯†é›†å‹çš„ï¼Œä½†å¤§å¤šæ•°å…¬å¼€å¯ç”¨çš„KGä»ç„¶è¿œéå…¨é¢ï¼ˆ2ï¼‰ <strong>æ•ˆç‡å’Œæœ‰æ•ˆæ€§ä¹‹é—´çš„æƒè¡¡ï¼š</strong>å½“ä»æ–‡æœ¬è¯­æ–™åº“æ„å»º KG æ—¶ï¼Œæå–çŸ¥è¯†çš„ç²’åº¦åœ¨å¹³è¡¡æ•ˆç‡å’Œæœ‰æ•ˆæ€§æ–¹é¢èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚ä¿ç•™ç»†ç²’åº¦ä¿¡æ¯ä¼šå¯¼è‡´æ›´å¤§ã€æ›´è¯¦ç»†çš„ KGï¼Œè¿™å¯èƒ½ä¼šé˜»ç¢è®¡ç®—æ•ˆç‡ã€‚ç›¸åï¼Œç´§å‡‘çš„ KG å¯èƒ½ä¼šç‰ºç‰²é‡è¦çš„ç»†èŠ‚ï¼Œä»è€Œå¯¼è‡´æ½œåœ¨çš„ä¿¡æ¯ä¸¢å¤±ã€‚</p><h4 id="Sec-5-Knowledge-Retrieval-Process"><a href="#Sec-5-Knowledge-Retrieval-Process" class="headerlink" title="Sec.5 Knowledge Retrieval Process"></a>Sec.5 Knowledge Retrieval Process</h4><p>â€‹åŸºäºå›¾çš„çŸ¥è¯†æ£€ç´¢ä¸€èˆ¬åˆ†ä¸ºPreprocess&#x2F;Matching&#x2F;Pruningä¸‰ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/../article_img/20250220/img2.png" alt="Retrieval Process"></p><p><strong>Query&#x2F;Graph Preprocess</strong> é¢„å¤„ç†é˜¶æ®µåŒæ—¶å¯¹æŸ¥è¯¢æ•°æ®åº“å’Œå›¾å½¢æ•°æ®åº“è¿è¡Œï¼Œä»¥ä¾¿ä¸ºé«˜æ•ˆæ£€ç´¢åšå¥½å‡†å¤‡ã€‚å¯¹äºæŸ¥è¯¢é¢„å¤„ç†ï¼Œç³»ç»Ÿé€šè¿‡çŸ¢é‡åŒ–æˆ–å…³é”®æœ¯è¯­æå–å°†è¾“å…¥é—®é¢˜è½¬æ¢ä¸ºç»“æ„åŒ–è¡¨ç¤ºã€‚è¿™äº›è¡¨ç¤ºå½¢å¼ç”¨ä½œåç»­æ£€ç´¢ä½œçš„æœç´¢ç´¢å¼•ã€‚åœ¨å›¾æ–¹é¢ï¼Œå›¾æ•°æ®åº“ç»è¿‡æ›´å…¨é¢çš„å¤„ç†ï¼Œå…¶ä¸­é¢„è®­ç»ƒçš„è¯­è¨€æ¨¡å‹å°†å›¾å…ƒç´ ï¼ˆå®ä½“ã€å…³ç³»å’Œä¸‰å…ƒç»„ï¼‰è½¬æ¢ä¸ºå¯†é›†çš„å‘é‡è¡¨ç¤ºï¼Œä½œä¸ºæ£€ç´¢é”šç‚¹ ã€‚æ­¤å¤–ï¼Œä¸€äº›é«˜çº§æ£€ç´¢æ¨¡å‹åœ¨å›¾æ•°æ®åº“ä¸Šåº”ç”¨å›¾ç¥ç»ç½‘ç»œ ï¼ˆGNNï¼‰ æ¥æå–é«˜çº§ç»“æ„ç‰¹å¾ï¼Œè€Œä¸€äº›æ–¹æ³•ç”šè‡³é‡‡ç”¨è§„åˆ™æŒ–æ˜ç®—æ³•ç”Ÿæˆè§„åˆ™åº“ï¼Œä½œä¸ºå›¾çŸ¥è¯†çš„ä¸°å¯Œã€å¯æœç´¢çš„ç´¢å¼•</p><p><strong>Matching</strong> åŒ¹é…é˜¶æ®µåœ¨é¢„å¤„ç†çš„æŸ¥è¯¢å’Œç´¢å¼•å›¾æ•°æ®åº“ä¹‹é—´å»ºç«‹è¿æ¥ã€‚æ­¤è¿‡ç¨‹å°†æŸ¥è¯¢è¡¨ç¤ºå½¢å¼ä¸å›¾ç´¢å¼•è¿›è¡Œæ¯”è¾ƒï¼Œä»¥è¯†åˆ«ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µã€‚åŒ¹é…ç®—æ³•åŒæ—¶è€ƒè™‘å›¾ä¸­çš„<strong>è¯­ä¹‰ç›¸ä¼¼æ€§å’Œç»“æ„å…³ç³»</strong>ã€‚æ ¹æ®åŒ¹é…åˆ†æ•°ï¼Œç³»ç»Ÿæ£€ç´¢ä¸æŸ¥è¯¢é«˜åº¦ç›¸å…³çš„è¿é€šç»„ä»¶å’Œå­å›¾ï¼Œä»è€Œåˆ›å»ºä¸€ç»„åˆå§‹çš„å€™é€‰çŸ¥è¯†ã€‚</p><p><strong>Knowledge Pruning</strong> ä¿®å‰ªé˜¶æ®µä¼šä¼˜åŒ–æœ€åˆæ£€ç´¢çš„çŸ¥è¯†ï¼Œä»¥æé«˜å…¶è´¨é‡å’Œç›¸å…³æ€§ã€‚æ­¤ä¼˜åŒ–è¿‡ç¨‹è§£å†³äº†æ£€ç´¢è¿‡å¤šæˆ–ä¸ç›¸å…³ä¿¡æ¯çš„å¸¸è§æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚æŸ¥è¯¢æˆ–å¤§å‹å›¾æ•°æ®åº“æ—¶ã€‚å‰ªæç®—æ³•åº”ç”¨ä¸€ç³»åˆ—ç»†åŒ–ä½œæ¥æ•´åˆå’Œæ€»ç»“æ£€ç´¢åˆ°çš„çŸ¥è¯†ã€‚å…·ä½“æ¥è¯´ï¼Œç³»ç»Ÿé¦–å…ˆåˆ é™¤æ˜æ˜¾ä¸ç›¸å…³æˆ–å˜ˆæ‚çš„ä¿¡æ¯ã€‚ç„¶åï¼Œå®ƒæ•´åˆäº†ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µï¼Œå¹¶ç”Ÿæˆäº†å¤æ‚å›¾çŸ¥è¯†çš„ç®€æ˜æ‘˜è¦ã€‚é€šè¿‡æä¾›ç²¾ç‚¼å’Œé‡ç‚¹çªå‡ºçš„æ‘˜è¦ï¼ŒLLM èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ä¿¡æ¯çš„ä¸Šä¸‹æ–‡å’Œç»†å¾®å·®åˆ«ï¼Œä»è€Œåšå‡ºæ›´å‡†ç¡®å’Œæœ‰æ„ä¹‰çš„å›ç­”ã€‚</p><h4 id="Sec-6-Knowledge-Retrieval-Techniques"><a href="#Sec-6-Knowledge-Retrieval-Techniques" class="headerlink" title="Sec.6 Knowledge Retrieval Techniques"></a>Sec.6 Knowledge Retrieval Techniques</h4><p><strong>åŸºäºè¯­ä¹‰ç›¸ä¼¼æ€§çš„æ£€ç´¢å™¨</strong> é€šè¿‡æµ‹é‡ç¦»æ•£è¯­è¨€ç©ºé—´æˆ–è¿ç»­å‘é‡ç©ºé—´ä¸­çš„æŸ¥è¯¢ä¸çŸ¥è¯†åº“ä¹‹é—´çš„ç›¸ä¼¼æ€§æ¥è¿›è¡Œé€‚å½“çš„ç­”æ¡ˆæ£€ç´¢ ï¼ˆ1ï¼‰ç¦»æ•£ç©ºé—´å»ºæ¨¡ã€‚ç¦»æ•£ç©ºé—´å»ºæ¨¡æ–¹æ³•ä¸»è¦åˆ©ç”¨è¯­è¨€ç¦»æ•£ç»Ÿè®¡çŸ¥è¯†ç›´æ¥å¯¹æ–‡æœ¬å­—ç¬¦ä¸²è¿›è¡Œå»ºæ¨¡ã€‚ä¾‹å¦‚å­å­—ç¬¦ä¸²åŒ¹é…ã€æ­£åˆ™è¡¨è¾¾å¼å’Œç²¾ç¡®çŸ­è¯­åŒ¹é…ç­‰ç®—æ³•  ï¼ˆ2ï¼‰åµŒå…¥ç©ºé—´å»ºæ¨¡ã€‚åˆ©ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹å’Œè¯åµŒå…¥ç­‰æ–¹æ³•ï¼Œä¾‹å¦‚ TF-IDFã€Word2Vec å’Œ GloVe</p><p><strong>åŸºäºé€»è¾‘æ¨ç†çš„æ£€ç´¢å™¨</strong> é‡‡ç”¨ç¬¦å·æ¨ç†ä»å›¾çŸ¥è¯†åº“ä¸­æ¨æ–­å’Œæå–ç›¸å…³ä¿¡æ¯ã€‚æ­¤æ–¹æ³•åŒ…æ‹¬åˆ›å»ºé€»è¾‘è§„åˆ™å’Œçº¦æŸï¼Œä»¥é˜æ˜çŸ¥è¯†åº“å›ºæœ‰çš„å…³ç³»å’Œå±‚æ¬¡ç»“æ„ï¼Œä¾‹å¦‚ è§„åˆ™æŒ–æ˜ ã€å½’çº³é€»è¾‘ç¼–ç¨‹ å’Œ çº¦æŸæ»¡è¶³ ç­‰æŠ€æœ¯</p><p><strong>åŸºäº GNN çš„ Retriever</strong> ä¸»è¦åˆ©ç”¨å›¾ç¥ç»ç½‘ç»œå¯¹æ„å»ºçš„å›¾åº“ä¸­çš„èŠ‚ç‚¹è¿›è¡Œç¼–ç ã€‚æ£€ç´¢ä¸»è¦ä¾èµ–äºåŒæ—¶åŒ…å«æƒ…æ„Ÿæ„ä¹‰å’Œç»“æ„å…³ç³»ç†è§£çš„èŠ‚ç‚¹è¡¨å¾çš„ç¼–ç ç›¸ä¼¼æ€§ã€‚åŸºäº GNN çš„æ£€ç´¢å™¨éœ€è¦è®­ç»ƒ GNN ç¼–ç å™¨ã€‚æ­¤å¤–ï¼Œç”±äºç¼ºä¹æ˜ç¡®æ ‡æ³¨çš„æ•°æ®ï¼Œ<strong>è®­ç»ƒçš„é‡ç‚¹æ˜¯è®¾è®¡ä¸€ä¸ªåˆé€‚çš„æŸå¤±å‡½æ•°ï¼Œä½¿ GNN èƒ½å¤Ÿå­¦ä¹ é€šè¿‡è¡¨ç¤ºç¼–ç å‡†ç¡®å®šä½ç›®æ ‡çŸ¥è¯†</strong></p><p><strong>åŸºäº LLM çš„æ£€ç´¢å™¨</strong> å…³äºæ„å»ºçš„å›¾åº“ï¼ŒåŸºäº LLM çš„çŸ¥è¯†æ£€ç´¢å™¨ä¸»è¦ä¾§é‡äºåˆ©ç”¨ LLM æ¥ç†è§£å›¾å¹¶è¯†åˆ«å…³é”®å­å›¾ã€‚</p><p><strong>åŸºäºå¼ºåŒ–å­¦ä¹ çš„æ£€ç´¢å™¨</strong> å¼ºåŒ–å­¦ä¹  ä¸º GraphRAG ç³»ç»Ÿä¸­çš„æ£€ç´¢æä¾›äº†ä¸€ç§è‡ªé€‚åº”å’ŒåŠ¨æ€ç­–ç•¥ã€‚é€šè¿‡å°†æ£€ç´¢è¿‡ç¨‹æ„å»ºä¸ºé¡ºåºå†³ç­–æŒ‘æˆ˜ï¼ŒåŸºäº RL çš„æ–¹æ³•ä½¿ä»£ç†èƒ½å¤Ÿåœ¨ç¯å¢ƒåé¦ˆçš„æŒ‡å¯¼ä¸‹å­¦ä¹ å’Œéå†å›¾åº“ï¼Œä»¥å¯»æ‰¾æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚</p><p>è¿™ç§æ–¹æ³•èµ‹äºˆç³»ç»Ÿé€šè¿‡ä¸»åŠ¨äº¤äº’å’Œç§¯ç´¯ç»éªŒä¸æ–­æé«˜å…¶æ£€ç´¢æ€§èƒ½çš„èƒ½åŠ›ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æè¿°å¦‚ä¸‹ï¼šç›¸å…³çš„æ¨ç†èƒŒæ™¯åœ¨äºä¸€ä¸ªç‰¹å®šäºé—®é¢˜çš„å­å›¾ $G_{sub}$ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰æºå®ä½“ $Q_s$ã€ç›®æ ‡å®ä½“ $Q_t$ åŠå…¶é‚»å±…ã€‚ç†æƒ³çš„å­å›¾ $G_{sub}$ åº”å…·æœ‰ä»¥ä¸‹å±æ€§ï¼šï¼ˆiï¼‰ $G_{sub}$ åŒ…å«å°½å¯èƒ½å¤šçš„æºå®ä½“å’Œç›®æ ‡å®ä½“;ï¼ˆiiï¼‰ $G_{sub}$ ä¸­çš„å®ä½“å’Œå…³ç³»ä¸é—®é¢˜ä¸Šä¸‹æ–‡å…·æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§;ï¼ˆiiiï¼‰ $G_{sub}$ ç®€æ´æ˜äº†ï¼Œå‡ ä¹æ²¡æœ‰å†—ä½™ä¿¡æ¯ï¼Œå› æ­¤å¯ä»¥è¾“å…¥åˆ°é•¿åº¦æœ‰é™çš„ LLM ä¸­ã€‚ç›¸å…³æ–¹æ³•ï¼š<a href="https://arxiv.org/pdf/2405.16420">Deep QNetworks</a>, <a href="https://arxiv.org/pdf/2401.06800">Policy Gradients</a>, and <a href="https://arxiv.org/pdf/2410.10584">Actor-Critic</a></p><h4 id="Sec-7-Knowledge-Integration"><a href="#Sec-7-Knowledge-Integration" class="headerlink" title="Sec.7 Knowledge Integration"></a>Sec.7 Knowledge Integration</h4><p><strong>å¾®è°ƒæŠ€æœ¯ï¼š</strong>åˆ©ç”¨å„ç§å›¾å½¢ä¿¡æ¯çš„å¾®è°ƒè¿‡ç¨‹å¯ä»¥æ ¹æ®è¾“å…¥ç›®æ ‡çš„ç²’åº¦åˆ†ä¸ºä¸‰ä¸ªä¸åŒçš„ç±»åˆ«ï¼šï¼ˆiï¼‰ èŠ‚ç‚¹çº§çŸ¥è¯†ï¼šå…³æ³¨å›¾å½¢ä¸­çš„å„ä¸ªèŠ‚ç‚¹ã€‚ï¼ˆiiï¼‰ è·¯å¾„çº§çŸ¥è¯†ï¼šä¸“æ³¨äºèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å’Œåºåˆ—ã€‚ï¼ˆiiiï¼‰ å­å›¾çº§çŸ¥è¯†ï¼šè€ƒè™‘ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆçš„è¾ƒå¤§ç»“æ„åŠå…¶äº’è¿ã€‚æˆ‘ä»¬å°†è¯¦ç»†æ¢è®¨è¿™äº›æ–¹é¢ä¸­çš„æ¯ä¸€ä¸ªã€‚ </p><p>ä½¿ç”¨ Node çº§çŸ¥è¯†è¿›è¡Œå¾®è°ƒã€‚åœ¨è®¸å¤šåŸºäºå›¾çš„ RAG ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½é“¾æ¥åˆ°ä¸€ä¸ªæ–‡æ¡£ï¼Œä¾‹å¦‚å¼•æ–‡ç½‘ç»œä¸­çš„æ‘˜è¦ã€‚ç”±äºç‰¹å®šé¢†åŸŸçš„æ•°æ®å¾ˆå°‘å‡ºç°åœ¨é¢„è®­ç»ƒè¯­æ–™åº“ä¸­ï¼Œå› æ­¤ä¸€äº›ç ”ç©¶åœ¨è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒä¹‹å‰é‡‡ç”¨æŒ‡ä»¤è°ƒä¼˜æ¥åŠ å¼ºå¯¹ç‰¹å®šé¢†åŸŸçš„çŸ¥è¯†ç†è§£ã€‚ä¸€ç§ç®€å•çš„å¾®è°ƒæ–¹æ³•åŒ…æ‹¬å°†èŠ‚ç‚¹å’Œç›¸é‚»æ–‡æœ¬ä½œä¸ºä¸Šä¸‹æ–‡ä¿¡æ¯é¦ˆé€åˆ° LLM ä¸­ï¼Œä»¥å¸®åŠ©é¢„æµ‹ <a href="https://openreview.net/forum?id=x5FfUvsLIE">1</a>ã€<a href="https://arxiv.org/pdf/2406.10393">2</a>ã€<a href="https://arxiv.org/pdf/2402.07483">3</a>ã€‚é‰´äºæ£€ç´¢åˆ°çš„æ–‡æ¡£å¯èƒ½å¾ˆå¹¿æ³›ï¼Œç ”ç©¶äººå‘˜å¯ä»¥åˆ©ç”¨ LLM å°†è¿™äº›æ–‡æœ¬æç‚¼æˆå•ä¸ªåµŒå…¥ <a href="https://proceedings.neurips.cc/paper/2020/file/6b493230205f780e1bc26945df7481e5-Paper.pdf">4</a>ã€‚å°½ç®¡ç¼ºä¹è¯æ±‡å¤–æ ‡è®°çš„é¢„è®­ç»ƒæ•°æ®ï¼Œä½† LLM èƒ½å¤Ÿåœ¨å®è·µä¸­è¯†åˆ«è¿™äº›åµŒå…¥ä¸­çš„ä¿¡æ¯ã€‚</p><p>ä½¿ç”¨ Path-level Knowledge è¿›è¡Œå¾®è°ƒã€‚è¯­è¨€ä»»åŠ¡é€šå¸¸æ¶‰åŠå¤æ‚çš„æ¨ç†ï¼Œéœ€è¦å¯¹äº‹å®å…³ç³»æœ‰æ¸…æ™°çš„ç†è§£ã€‚åˆ©ç”¨çŸ¥è¯†å›¾è°±è·¯å¾„ï¼ŒLLM é€šè¿‡å…³ç³»å’Œå®ä½“çš„å¼•å¯¼å¢å¼ºè‡ªèº«æ¨ç†èƒ½åŠ›ã€‚è¿™äº›è·¯å¾„å¯ä»¥æ˜¯ä»é—®é¢˜å®ä½“åˆ°ç­”æ¡ˆå®ä½“çš„æœ€ç›´æ¥è·¯çº¿ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ å›¾æ£€ç´¢æ¨¡å‹ æˆ– å¯å‘å¼æ–¹æ³• è¿›è¡ŒæŒ–æ˜ã€‚å®ƒä»¬å¯ä»¥ç”¨ä½œè¾“å…¥å’Œè¾“å‡ºï¼Œä½†æ˜¯å½“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å­˜åœ¨å¤šæ¡è·¯å¾„æ—¶ï¼Œè¿‡æ»¤æ‰å˜ˆæ‚çš„è·¯å¾„åŒæ—¶ä¿ç•™çŸ¥è¯†å›¾è°±ä¸­çš„å…³ç³»è‡³å…³é‡è¦ã€‚ä¸ºäº†ä¿æŒå®ä½“è¡¨ç¤ºçš„å®Œæ•´æ€§åŠå…¶æ²¿è·¯å¾„çš„å…³ç³»ï¼Œä¸€äº›æ–¹æ³•ä¾§é‡äºå°†è¿™äº›è·¯å¾„ä½œä¸ºè®­ç»ƒç›®æ ‡ï¼Œé¢„æµ‹ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å’Œå…³ç³»<a href="https://arxiv.org/pdf/2303.03922">5</a>ï¼Œç”šè‡³è·¨å¤šä¸ªè·¯å¾„<a href="https://arxiv.org/pdf/2310.01061">6</a>ã€‚è¿™ä½¿ LLM èƒ½å¤Ÿè¿›è¡ŒPathçº§æ¨ç†å¹¶äº§ç”Ÿå¯é çš„è¾“å‡ºã€‚</p><p>ä½¿ç”¨ Subgraph çº§çŸ¥è¯†è¿›è¡Œå¾®è°ƒã€‚ä¸è·¯å¾„æ•°æ®çš„çº¿æ€§æ‹“æ‰‘ä¸åŒï¼Œå­å›¾æ•°æ®è¡¨ç°å‡ºæ›´å¤æ‚ã€æ›´ä¸è§„åˆ™çš„æ‹“æ‰‘ã€‚ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨å›¾ç¼–ç å™¨å°†å­å›¾çº§ä¿¡æ¯å‹ç¼©åˆ°è¯»å‡ºåµŒå…¥ä¸­ã€‚æˆ–è€…ï¼Œå°†å›¾æ•°æ®è½¬æ¢ä¸ºåºåˆ—ã€‚ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•å¾€å¾€å¿½ç•¥äº†å­å›¾ä¸­ä¸°å¯Œçš„æ–‡æœ¬å†…å®¹ï¼Œæ— æ³•ä½¿ LLM è®¤è¯†åˆ°åº•å±‚çš„å›¾ç»“æ„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€äº›å·¥ä½œä¸“æ³¨äºè°ƒæ•´ transformer æ¶æ„ä»¥æ›´å¥½åœ°å¤„ç†ç»“æ„åŒ–æ•°æ®ï¼Œä¾‹å¦‚<a href="https://arxiv.org/pdf/2212.01588">7</a>ã€<a href="https://arxiv.org/pdf/2402.11709">8</a>ï¼Œè€Œå¦ä¸€äº›åˆ™å°†èŠ‚ç‚¹å’Œè¾¹çš„æè¿°ç›´æ¥åˆå¹¶åˆ°æç¤ºä¸­ï¼Œä¾‹å¦‚<a href="https://aclanthology.org/2024.findings-eacl.132.pdf">9</a>ã€<a href="https://arxiv.org/pdf/2402.08170">10</a>ã€‚ç„¶è€Œï¼Œç°æœ‰æ–¹æ³•ä»ç„¶å­˜åœ¨æŒ‘æˆ˜ã€‚å‰è€…å¯èƒ½ä¼šå› æ¶æ„æ›´æ”¹è€Œä¸¢å¤±åœ¨é¢„è®­ç»ƒæœŸé—´è·å¾—çš„çŸ¥è¯†ï¼Œè€Œåè€…å¯èƒ½éš¾ä»¥å¤„ç†å…·æœ‰å¤§é‡èŠ‚ç‚¹å’Œè¾¹çš„å¯†é›†å›¾ã€‚</p><h4 id="ç›¸å…³å·¥ä½œæ€»ç»“"><a href="#ç›¸å…³å·¥ä½œæ€»ç»“" class="headerlink" title="ç›¸å…³å·¥ä½œæ€»ç»“"></a>ç›¸å…³å·¥ä½œæ€»ç»“</h4><p>å‚è€ƒæ–‡çŒ®ï¼š<a href="https://arxiv.org/pdf/2501.13958">https://arxiv.org/pdf/2501.13958</a></p><p><img src="/../article_img/20250220/img3.png" alt="å‚è€ƒæ–‡çŒ®"></p>]]></content>
    
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>RAG</tag>
      
      <tag>Graph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Path-Level GNN-Based Retrievers</title>
    <link href="/2025/02/20/GraphRAG/"/>
    <url>/2025/02/20/GraphRAG/</url>
    
    <content type="html"><![CDATA[<p>1.<a href="https://arxiv.org/abs/2405.20139">GNN-RAG: Graph Neural Retrieval for Large Language Model Reasoning</a></p><p>å¼€æºä»£ç ï¼š<a href="https://github.com/cmavro/GNN-RAG">https://github.com/cmavro/GNN-RAG</a></p><p>Motivation: å°†GNNçš„æ¨ç†èƒ½åŠ›å’ŒLLMçš„è¯­è¨€ç†è§£èƒ½åŠ›ç›¸ç»“åˆç”¨äºçŸ¥è¯†å›¾è°±é—®ç­”</p><p>Methodologyï¼šé¦–å…ˆï¼ŒGNN å¯¹å¯†é›†çš„ KG å­å›¾è¿›è¡Œæ¨ç†ï¼Œä»¥æ£€ç´¢ç»™å®šé—®é¢˜çš„ç­”æ¡ˆå€™é€‰è€…ã€‚å…¶æ¬¡ï¼Œæå– KG ä¸­è¿æ¥é—®é¢˜å®ä½“å’Œç­”æ¡ˆå€™é€‰é¡¹çš„æœ€çŸ­è·¯å¾„ä»¥è¡¨ç¤º KG æ¨ç†è·¯å¾„ã€‚æå–çš„è·¯å¾„è¢«æ–‡æœ¬åŒ–å¹¶ä½œä¸ºä½¿ç”¨ RAG è¿›è¡Œ LLM æ¨ç†çš„è¾“å…¥ã€‚åœ¨GNN-RAG æ¡†æ¶ä¸­ï¼ŒGNN å……å½“å¯†é›†çš„å­å›¾æ¨ç†å™¨æ¥æå–æœ‰ç”¨çš„å›¾ä¿¡æ¯ï¼Œè€Œ LLM åˆ™åˆ©ç”¨å…¶è‡ªç„¶è¯­è¨€å¤„ç†èƒ½åŠ›è¿›è¡Œæœ€ç»ˆçš„ KGQAï¼ˆçŸ¥è¯†å›¾è°±é—®ç­”ï¼‰</p><p><img src="/../article_img/PathGNN/GNN-RAG.png" alt="GNN-RAG"></p><p><strong>GNNçš„è®­ç»ƒè¿‡ç¨‹ï¼š</strong>å°†çŸ¥è¯†å›¾è°±é—®ç­”KGQAä»»åŠ¡è§†ä¸ºèŠ‚ç‚¹åˆ†ç±»ï¼Œä½¿ç”¨question-answer pairsè®­ç»ƒé›†ï¼Œå°†KG entitiesè¢«åˆ†ä¸ºanswerså’Œnon-answersï¼Œ</p><p>$h_v^{(l)}&#x3D;\psi(h_v^{(l-1)}, \sum_{vâ€™\in N_v}\omega(q,r)\cdot m_{vvâ€™}^{(l)})$    Equ.1</p><p>å…¶ä¸­å‡½æ•°$\omega(\cdot)$ç”¨æ¥è®¡ç®—ä¸‰å…ƒç»„(v,r,vâ€™)ä¸­å…³ç³»rå’Œç”¨æˆ·æŸ¥è¯¢qä¹‹é—´çš„ç›¸å…³æ€§ã€‚ç»è¿‡å¤šè·³ä¼ æ’­åï¼Œæ‰€æœ‰èŠ‚ç‚¹æ ¹æ®æœ€ç»ˆè¡¨ç¤ºè¢«åˆ†ä¸ºanswerå’Œnon-answerä¸¤ç±»ã€‚</p><p>æ­¤å¤–ï¼Œè€ƒè™‘åˆ°ä¸åŒçš„GNNä¼šäº§ç”Ÿä¸åŒçš„æ¨ç†è·¯å¾„ï¼Œå¦‚å…¬å¼Equ.1æ‰€ç¤ºï¼ŒGNNçš„æ¨ç†ä¾èµ–äºquestion-relationåŒ¹é…å‡½æ•°$\omega(q,r)$ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ–¹å¼ä¸º$\phi(q^{(k)}\odot r)$ï¼Œå…¶ä¸­$q^{(k)}$å’Œ$r$ä½¿ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹æ¥è¿›è¡Œç¼–ç ï¼Œ$q^{(k)}&#x3D;\gamma_k(LM(q)), r&#x3D;\gamma_c(LM(r))$ã€‚</p><p><strong>GNNçš„æ¨ç†è¿‡ç¨‹ï¼š</strong>å…·æœ‰æœ€é«˜æ¦‚ç‡åˆ†æ•°çš„èŠ‚ç‚¹ï¼ˆä¾‹å¦‚ï¼Œé«˜äºæ¦‚ç‡é˜ˆå€¼ï¼‰å°†ä½œä¸ºå€™é€‰ç­”æ¡ˆè¿”å›ï¼Œä»¥åŠå°†é—®é¢˜å®ä½“ä¸å€™é€‰ç­”æ¡ˆè¿æ¥èµ·æ¥çš„æœ€çŸ­è·¯å¾„ï¼ˆæ¨ç†è·¯å¾„ï¼‰ã€‚æ£€ç´¢åˆ°çš„æ¨ç†è·¯å¾„ç”¨ä½œåŸºäº LLM çš„ RAG çš„è¾“å…¥ã€‚</p><p>ä¸ºäº†ç¡®ä¿æ¨ç†è·¯å¾„çš„å¤šæ ·æ€§ï¼Œè¿™é‡Œä½œè€…å¹¶æ²¡æœ‰é‡‡ç”¨ä¸åŒçš„GNNæ¶æ„ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸åŒçš„LMé€šè¿‡æ›´æ”¹$\omega$å‡½æ•°æ¥å¼•å¯¼å•ä¸€çš„GNNè·å–ä¸åŒçš„èŠ‚ç‚¹è¡¨ç¤º</p><p><strong>LLM</strong>ï¼šæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œprompt-tuning </p><p>prompt: â€œBased on the reasoning paths, please answer the given question.\n Reasoning Paths: {Reasoning Paths} \n Question: {Question}â€. </p><p>Reasoning paths ç”¨è¯­è¨€æè¿°ä¸º â€œ{question entity} â†’ {relation} â†’ {entity} â†’ Â· Â· Â· â†’ {relation} â†’ {answer entity} \nâ€</p><p>2.<a href="https://arxiv.org/abs/2310.01061">Reasoning on Graphs: Faithful and Interpretable Large Language Model Reasoning</a></p><p>å¼€æºä»£ç ï¼š<a href="https://github.com/RManLuo/reasoning-on-graphs">https://github.com/RManLuo/reasoning-on-graphs</a></p><p>Motivation: ç°æœ‰çš„åŸºäº KG çš„ LLM æ¨ç†æ–¹æ³•ä»…å°† KG è§†ä¸ºäº‹å®çŸ¥è¯†åº“ï¼Œè€Œå¿½è§†äº†å…¶ç»“æ„ä¿¡æ¯å¯¹æ¨ç†çš„é‡è¦æ€§ã€‚ä½œè€…æå‡ºäº†ä¸€ç§ç§°ä¸ºå›¾æ¨ç†ï¼ˆTOGï¼‰çš„æ–¹æ³•ï¼Œå¹¶è®¾è®¡äº†ä¸€ç§è§„åˆ’æ£€ç´¢æ¨ç†æ¡†æ¶ï¼Œä»¥å®ç°å¿ å®å’Œå¯è§£é‡Šçš„æ¨ç†</p><p><img src="/../article_img/PathGNN/RoG.png" alt="RoG"></p><p>Methodologyï¼šRoGåŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šï¼ˆ1ï¼‰<strong>è§„åˆ’æ¨¡å—ï¼š</strong>åŸºäºç”¨æˆ·æŸ¥è¯¢ç”Ÿæˆå…³ç³»è·¯å¾„ä½œä¸ºKGçš„æ£€ç´¢è§„åˆ’ï¼ˆ2) <strong>æ£€ç´¢æ¨ç†æ¨¡å—ï¼š</strong>æ ¹æ®è§„åˆ’æ¨¡å—çš„å…³ç³»è·¯å¾„ä»KGä¸­æ£€ç´¢æœ‰æ•ˆçš„æ¨ç†è·¯å¾„ã€‚RoGé€šè¿‡ä¸¤é¡¹ä»»åŠ¡è¿›è¡Œä¼˜åŒ–ï¼šï¼ˆ1ï¼‰<strong>è§„åˆ’ä¼˜åŒ–</strong>ï¼Œç”±äºLLMå¯¹KGä¸­åŒ…å«çš„å…³ç³»ä¸€æ— æ‰€çŸ¥ï¼Œè¯¥æ¨¡å—çš„è®­ç»ƒç›®æ ‡æ˜¯è®©LLMç”Ÿæˆçš„å…³ç³»è·¯å¾„å°½å¯èƒ½è¿‘ä¼¼äºKGçš„æœ‰æ•ˆè·¯å¾„ã€‚ä½œè€…ä½¿ç”¨å…³ç³»è·¯å¾„Qï¼ˆzï¼‰çš„åéªŒåˆ†å¸ƒæœ€å°åŒ–KLå‘æ•£æ¥å®ç°ï¼Œè¯¥åéªŒåˆ†å¸ƒå¯ä»¥é€šè¿‡KGsä¸­çš„æœ‰æ•ˆå…³ç³»è·¯å¾„æ¥è¿‘ä¼¼ï¼ˆ2ï¼‰<strong>æ£€ç´¢-æ¨ç†ä¼˜åŒ–</strong>ï¼Œç»™å®šé—®é¢˜qå’Œä½œä¸ºè§„åˆ’zçš„å…³ç³»è·¯å¾„ï¼Œæ£€ç´¢æ¨¡å—æ—¨åœ¨ä»KGå›¾Gæ£€ç´¢è¿™ä¸ªæ¨ç†è·¯å¾„$W_z$ã€‚æ£€ç´¢è¿‡ç¨‹åŒ…æ‹¬åœ¨Gä¸­æŸ¥æ‰¾è·¯å¾„ï¼Œå…¶ä»é—®é¢˜å®ä½“$e_q$å¼€å§‹å¹¶éµå¾ªå…³ç³»è·¯å¾„zã€‚é‡‡ç”¨ä¸€ä¸ªçº¦æŸçš„å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰æ¥æ£€ç´¢æ¥è‡ªKGsçš„æ¨ç†è·¯å¾„$W_z$ã€‚å®éªŒä¸­ï¼Œæ‰€æœ‰æ£€ç´¢çš„è·¯å¾„éƒ½ç”¨äºæ¨ç†ã€‚</p><p><img src="/../article_img/PathGNN/Algorithm.png" alt="Optimization Algorithm"></p><p>æ€»ç»“ï¼šLLMç”¨æ¥ç”Ÿæˆå…³ç³»è·¯å¾„ï¼Œåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å°½å¯èƒ½çš„å»æ‹ŸåˆKGä¸­çš„çœŸå®è·¯å¾„ã€‚æ¨ç†æ—¶é¦–å…ˆè®©LLMæ ¹æ®ç”¨æˆ·æŸ¥è¯¢ç”Ÿæˆè·¯å¾„è§„åˆ’ï¼Œç„¶åå†KGæŸ¥è¯¢å¯¹åº”çš„æœ‰æ•ˆè·¯å¾„ï¼Œä½œä¸ºæ£€ç´¢ç»“æœï¼Œä¸ç”¨æˆ·æŸ¥è¯¢ä¸€èµ·ä½œä¸ºLLMè¾“å…¥ç”¨æˆ·ç”Ÿæˆå›å¤ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>RAG</tag>
      
      <tag>Graph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Graph + RAG</title>
    <link href="/2025/02/18/20250218/"/>
    <url>/2025/02/18/20250218/</url>
    
    <content type="html"><![CDATA[<h1 id="Graph-RAG"><a href="#Graph-RAG" class="headerlink" title="Graph + RAG"></a>Graph + RAG</h1><p>å›¾RAGç›¸æ¯”äºä¼ ç»ŸRAGçš„ä¼˜åŠ¿ï¼š</p><ol><li>å¤šè·³æ¨ç†èƒ½åŠ› 2. å…³ç³»å»ºæ¨¡èƒ½åŠ› 3. é«˜æ•ˆçš„çŸ¥è¯†æ›´æ–°ä¸ç®¡ç† 4. å‡å°‘æ£€ç´¢çš„å™ªå£°å’Œç”Ÿæˆçš„å¹»è§‰</li></ol><p>æœ€è¿‘çœ‹äº†å‡ ç¯‡å›¾RAGçš„è®ºæ–‡ï¼š</p><h3 id="G-Retriever-Retrieval-Augmented-Generation-for-Textual-Graph-Understanding-and-Question-Answeringï¼ˆhttps-arxiv-org-pdf-2402-07630ï¼‰"><a href="#G-Retriever-Retrieval-Augmented-Generation-for-Textual-Graph-Understanding-and-Question-Answeringï¼ˆhttps-arxiv-org-pdf-2402-07630ï¼‰" class="headerlink" title="G-Retriever: Retrieval-Augmented Generation for Textual Graph Understanding and Question Answeringï¼ˆhttps://arxiv.org/pdf/2402.07630ï¼‰"></a>G-Retriever: Retrieval-Augmented Generation for Textual Graph Understanding and Question Answeringï¼ˆ<a href="https://arxiv.org/pdf/2402.07630%EF%BC%89">https://arxiv.org/pdf/2402.07630ï¼‰</a></h3><p>Motivation: å¼•å…¥æ–‡æœ¬å›¾è¿›è¡Œæ£€ç´¢å¢å¼º</p><p>å¼€æºä»£ç ï¼š<a href="https://github.com/XiaoxinHe/G-Retriever">https://github.com/XiaoxinHe/G-Retriever</a></p><p>é¦–å…ˆæ ¹æ®å·²æœ‰çš„å¤–éƒ¨çŸ¥è¯†æ„å»ºçŸ¥è¯†å›¾è°±ï¼Œå¹¶å¯¹æ¯ä¸ªèŠ‚ç‚¹å’Œå…³ç³»ï¼Œåˆ©ç”¨å…¶å›ºæœ‰çš„æ–‡æœ¬å±æ€§è¿›è¡Œç‰¹å¾ç¼–ç ã€‚é’ˆå¯¹ç”¨æˆ·çš„queryï¼Œè¿›è¡Œç›¸ä¼¼åº¦æ£€ç´¢ï¼Œå¾—åˆ°èŠ‚ç‚¹å’Œè¾¹çš„topkå­é›†ã€‚ç„¶åè®¾è®¡äº†ä¸€ç§å¼ºåŒ–å­¦ä¹ ç­–ç•¥åŸºäºæ£€ç´¢å¾—åˆ°çš„å­é›†æ„å»ºsubgraphã€‚åœ¨ç”Ÿæˆé˜¶æ®µï¼ŒLLMçš„å‚æ•°è¢«å†»ç»“ï¼Œé™¤äº†ç”¨æˆ·çš„queryä»¥å¤–ï¼Œè¿˜æœ‰æ£€ç´¢å­å›¾çš„æ–‡æœ¬å±æ€§æ‰€æ„æˆçš„hard promptå’ŒåŸºäºå¯è®­ç»ƒgraph encoderå¾—åˆ°çš„soft prompt <img src="/article_img/20250218/20250218_01.png" alt="G-Retriever"></p><h3 id="Knowledge-Graph-Retrieval-Augmented-Generation-For-LLM-Based-Recommendation-https-arxiv-org-pdf-2501-02226"><a href="#Knowledge-Graph-Retrieval-Augmented-Generation-For-LLM-Based-Recommendation-https-arxiv-org-pdf-2501-02226" class="headerlink" title="Knowledge Graph Retrieval-Augmented Generation For LLM-Based Recommendation(https://arxiv.org/pdf/2501.02226)"></a>Knowledge Graph Retrieval-Augmented Generation For LLM-Based Recommendation(<a href="https://arxiv.org/pdf/2501.02226">https://arxiv.org/pdf/2501.02226</a>)</h3><p>Motivation: ä¼ ç»Ÿçš„RAGæ–¹æ³•å¿½è§†äº†çŸ¥è¯†çš„ç»“æ„å…³ç³»ï¼Œå€ŸåŠ©å¤–éƒ¨çŸ¥è¯†æ„å»ºKGï¼Œå¯¹æ¨èè¿›è¡Œæ£€ç´¢å¢å¼ºï¼›</p><p>æ£€ç´¢é˜¶æ®µï¼Œé¦–å…ˆè®­ç»ƒä¸€ä¸ªGNNç½‘ç»œç”¨æ¥å¯¹item-entityçŸ¥è¯†å›¾è°±çš„æ¯ä¸ªèŠ‚ç‚¹å’Œå…³ç³»è¿›è¡Œç¼–ç ï¼Œå¹¶ä»¥æ¯ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸­å¿ƒèŠ‚ç‚¹ç”Ÿæˆçš„å¤šè·³ç‰¹å¾è¡¨ç¤ºæ”¶é›†èµ·æ¥ï¼Œæ„å»ºå‘é‡æ•°æ®åº“ã€‚å¯¹äºå¾…é¢„æµ‹çš„ç”¨æˆ·èŠ‚ç‚¹ï¼Œæ ¹æ®å…¶äº¤äº’å†å²ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œåˆ©ç”¨å…¶æ–‡æœ¬ç‰¹å¾ä»KG VecDBä¸­æ£€ç´¢ç›¸å…³å­å›¾ï¼Œå¹¶å¯¹æ£€ç´¢å¾—åˆ°çš„æ‰€æœ‰å­å›¾è¿›è¡Œé‡æ’åºç”¨äºæ„å»ºsoft promptï¼Œä»è€Œå¢å¼ºLLMçš„æ¨èèƒ½åŠ›ã€‚<img src="/article_img/20250218/20250218_02.png" alt="K-RagRec"></p><h3 id="KG-Retriever-Efficient-Knowledge-Indexing-for-Retrieval-Augmented-Large-Language-Modelsï¼ˆhttps-arxiv-org-pdf-2412-05547ï¼‰"><a href="#KG-Retriever-Efficient-Knowledge-Indexing-for-Retrieval-Augmented-Large-Language-Modelsï¼ˆhttps-arxiv-org-pdf-2412-05547ï¼‰" class="headerlink" title="KG-Retriever: Efficient Knowledge Indexing for Retrieval-Augmented Large Language Modelsï¼ˆhttps://arxiv.org/pdf/2412.05547ï¼‰"></a>KG-Retriever: Efficient Knowledge Indexing for Retrieval-Augmented Large Language Modelsï¼ˆ<a href="https://arxiv.org/pdf/2412.05547%EF%BC%89">https://arxiv.org/pdf/2412.05547ï¼‰</a></h3><p>Motivation: å¯¹ç»“æ„ä¿¡æ¯åˆ†å±‚æ£€ç´¢ï¼Œä»æ ¹æœ¬ä¸Šç¼“è§£ä¿¡æ¯ç¢ç‰‡åŒ–çš„é—®é¢˜</p><p>è®¾è®¡äº†Docå±‚(Document-level Graph)å’ŒKGå±‚(Entity-level Graph)åˆ†åˆ«ç”¨äºå»ºç«‹æ–‡æ¡£å†…å’Œæ–‡æ¡£é—´çš„è¿æ¥ï¼ŒDoc Graphçš„æ„å»ºæ˜¯å¯¹æ¯ä¸ªæ–‡æ¡£è¿›è¡Œæ–‡æœ¬ç¼–ç ï¼Œå¹¶åŸºäºè¯­ä¹‰ç›¸ä¼¼æ€§è·å¾—æ¯ä¸ªèŠ‚ç‚¹çš„Kè¿‘é‚»å±…ï¼›KG Graphçš„æ„å»ºæ˜¯å¯¹æ¯ä¸ªæ–‡æ¡£è¿›è¡Œä¿¡æ¯æŠ½å–ï¼Œä»è€Œè·å¾—å¯¹åº”çš„çŸ¥è¯†å›¾è°±ã€‚æ£€ç´¢ç­–ç•¥ä¸Šï¼Œä½œè€…è€ƒè™‘äº†ä¸¤çº§æ£€ç´¢ï¼šæ–‡æ¡£çº§æ£€ç´¢å’Œå®ä½“çº§æ£€ç´¢ï¼Œå‰è€…é™¤äº†è€ƒè™‘ç”¨æˆ·æŸ¥è¯¢å’Œæ¯ä¸ªæ–‡æ¡£çš„è¯­ä¹‰ç›¸ä¼¼æ€§ä»¥å¤–ï¼Œè¿˜æ ¹æ®Doc Graphè·å–è¿™äº›topNæ–‡æ¡£çš„one-hopé‚»å±…ï¼›åè€…åˆ™é’ˆå¯¹ä¸Šä¸€é˜¶æ®µæ£€ç´¢çš„æ‰€æœ‰æ–‡æ¡£æ‰€å¯¹åº”çš„kgå›¾æ£€ç´¢è¯­ä¹‰ç›¸å…³çš„å®ä½“é›†ï¼Œå’Œqueryä¸€èµ·ä½œä¸ºæœ€ç»ˆLLMçš„è¾“å…¥<br><img src="/article_img/20250218/20250218_03.png" alt="KG-Retriever"></p>]]></content>
    
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>RAG</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºæ¨¡å‹paddingå·¦å¯¹é½å’Œå³å¯¹é½çš„é—®é¢˜</title>
    <link href="/2025/02/17/LLM%20padding/"/>
    <url>/2025/02/17/LLM%20padding/</url>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å¾®è°ƒæ¨¡å‹è¿›è¡ŒåŸå› é¢„æµ‹ä»»åŠ¡è®­ç»ƒçš„æ—¶å€™ï¼Œåœ¨evalé˜¶æ®µè¿›è¡Œæ¨ç†ç”Ÿæˆæ—¶é‡åˆ°äº†ä¸€ä¸ªè­¦å‘Šï¼šâ€œA decoder-only architecture is being used, but right-padding was detected! For correct generation results, please set <code>padding_side=&#39;left&#39;</code> when initializing the tokenizer.â€ï¼Œæˆ‘å°†tokenizeråˆå§‹åŒ–çš„å®šä¹‰è®¾ç½®ä¸ºå·¦å¡«å……ä¾ç„¶å‡ºç°è¯¥è­¦å‘Šï¼Œé—®äº†ä¸‹èº«è¾¹å¯¹å¤§æ¨¡å‹æ¯”è¾ƒäº†è§£çš„åŒå­¦ï¼Œå‘ç°æ˜¯tokenåºåˆ—ç»“å°¾åŠ äº†eosç¬¦å·å¯¼è‡´å‡ºç°çš„warningï¼Œä¸‹é¢æ˜¯transformersåº“ä¸­è¯¥è­¦å‘Šå‡ºç°çš„æ¡ä»¶ï¼š</p><p><img src="/article_img/LLM%20padding/warning.png" alt="warning"></p><p>ä¸ºä»€ä¹ˆæ¨¡å‹è®­ç»ƒé€‰æ‹©å³å¡«å……ï¼Œæ¨ç†æ—¶é€‰æ‹©å·¦å¡«å……ï¼›ä¸ºä»€ä¹ˆè®­ç»ƒæ—¶éœ€è¦åœ¨ç»“å°¾æ·»åŠ <eos>æ ‡è®°ç¬¦ï¼Œè€Œæ¨ç†æ—¶åˆ™ä¸éœ€è¦ï¼Œä¸‹é¢ç»™å‡ºè§£é‡Šè¯´æ˜ï¼š</p><p>è®­ç»ƒï¼šQ+A[EOS]  </p><p>æ¨¡å‹è®­ç»ƒæ—¶ï¼Œå¯¹äºè¾“å…¥çš„tokenåºåˆ—ï¼Œæˆ‘ä»¬çŸ¥é“å…¶çœŸå®æ ‡ç­¾ï¼ˆQueséƒ¨åˆ†å¯ç›´æ¥ç”¨-100ä½œä¸º <strong>mask</strong> å¡«å……æˆ–æ— æ•ˆæ ‡ç­¾ï¼Œä»¥ç¡®ä¿è¿™äº›ä½ç½®ä¸ä¼šå½±å“æŸå¤±è®¡ç®—ï¼‰ï¼Œé‡‡ç”¨å³å¡«å……æ˜¯ä¸ºäº†è®©æ¯ä¸ªbatchå†…çš„æ ·æœ¬é•¿åº¦å¯¹é½ã€‚åœ¨ç»“å°¾æ·»åŠ eosæ ‡è®°ç¬¦æ˜¯ä¸ºäº†å‘Šè¯‰æ¨¡å‹è¾“å…¥åºåˆ—çš„ç»“æŸä½ç½®ï¼Œå¦‚æœæ²¡æœ‰ EOS tokenï¼Œæ¨¡å‹å¯èƒ½ä¼šå°†åºåˆ—å½“ä½œæ˜¯æ²¡æœ‰ç»“æŸçš„ï¼Œè¿›è€Œå¯èƒ½ä¼šè¯•å›¾æ— é™åˆ¶åœ°ç”Ÿæˆä¸‹ä¸€ä¸ª tokenï¼Œå¯¼è‡´è®­ç»ƒä¸ç¨³å®šæˆ–ç”Ÿæˆè¡Œä¸ºä¸æ­£ç¡®</p><p>æ¨ç†ï¼šQ</p><p>è‡ªå›å½’æ¨¡å‹åœ¨æ¨ç†æ—¶ï¼Œä»bosæ ‡è®°ç¬¦å¼€å§‹ä»å·¦åˆ°å³ä¾æ¬¡é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ¥ç”Ÿæˆå†…å®¹ï¼Œå¦‚ä¸‹é¢çš„å›¾æ‰€ç¤ºï¼š</p><p><img src="/article_img/LLM%20padding/padding.png" alt="padding"></p><p>å¦‚æœé‡‡ç”¨å³å¡«å……ï¼Œ<pad>å°†è¢«æ”¾ç½®åœ¨In-Contextçš„å³ç«¯ï¼Œä»è€Œæ”¹å˜äº†In-Contextå†…å®¹ï¼Œè¿™å°†å¯¼è‡´ç”Ÿæˆæ—¶æ¨¡å‹çš„ä¸Šä¸‹æ–‡ç†è§£å‡ºç°åå·®ï¼Œç»“æœå¯èƒ½ä¼šå½±å“åˆ°ç”Ÿæˆçš„è´¨é‡æˆ–è¿è´¯æ€§ã€‚æ­¤å¤–ï¼Œå¦‚æœåœ¨In-Contextçš„ç»“å°¾å¤„åŠ å…¥eosæ ‡è®°ç¬¦ï¼Œè¿™å°†å¯¼è‡´æ¨¡å‹åœæ­¢ç”Ÿæˆã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://zhuanlan.zhihu.com/p/4581421783">æ¨¡å‹è®­ç»ƒé€‰æ‹©rightå¡«å……ï¼Œæ¨ç†é€‰æ‹©leftå¡«å……ï¼Œä¸ºä»€ä¹ˆï¼Ÿ - çŸ¥ä¹</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Bug</tag>
      
      <tag>Code</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤§æ¨¡å‹æ˜¾å­˜å ç”¨è®¡ç®—</title>
    <link href="/2025/02/17/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%98%BE%E5%AD%98%E5%8D%A0%E7%94%A8%E8%AE%A1%E7%AE%97/"/>
    <url>/2025/02/17/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%98%BE%E5%AD%98%E5%8D%A0%E7%94%A8%E8%AE%A1%E7%AE%97/</url>
    
    <content type="html"><![CDATA[<h2 id="1-æ˜¾å­˜å•ä½æ¢ç®—"><a href="#1-æ˜¾å­˜å•ä½æ¢ç®—" class="headerlink" title="1. æ˜¾å­˜å•ä½æ¢ç®—"></a>1. æ˜¾å­˜å•ä½æ¢ç®—</h2><p>åœ¨è®¨è®ºæ˜¾å­˜å ç”¨æ—¶ï¼Œé¦–å…ˆè¦æ˜ç™½â€œBâ€å’Œâ€œGâ€çš„å«ä¹‰ã€‚é€šå¸¸ï¼Œâ€œBâ€æŒ‡çš„æ˜¯åäº¿ï¼ˆ1B &#x3D; 10^9ï¼‰ï¼Œè€Œâ€œGâ€åˆ™è¡¨ç¤ºåƒå…†å­—èŠ‚ï¼ˆ1G &#x3D; 10^9å­—èŠ‚ï¼‰ã€‚ä¾‹å¦‚ï¼Œ1Bå‚æ•°æ„å‘³ç€æœ‰10äº¿ä¸ªå‚æ•°ã€‚æ˜¾å­˜çš„å•ä½é€šå¸¸ä»¥å­—èŠ‚è®¡ç®—ï¼Œè€Œ1ä¸ªå­—èŠ‚ç­‰äº8ä½ã€‚<br>ğŸˆå¦‚æœä½¿ç”¨å…¨ç²¾åº¦è®­ç»ƒï¼ˆfp32ï¼‰ï¼Œæ¯ä¸ªå‚æ•°éœ€è¦å ç”¨32ä½ï¼ˆå³4ä¸ªå­—èŠ‚ï¼‰ï¼Œå› æ­¤1Bçš„å‚æ•°éœ€è¦å ç”¨4GBçš„æ˜¾å­˜ã€‚<br>ğŸˆå¦‚æœä½¿ç”¨åŠç²¾åº¦ï¼ˆfp16æˆ–bf16ï¼‰ï¼Œåˆ™æ¯ä¸ªå‚æ•°å ç”¨2å­—èŠ‚ï¼Œ1Bçš„å‚æ•°åªéœ€å ç”¨2GBçš„æ˜¾å­˜ã€‚</p><h2 id="2-æ˜¾å­˜å¼€é”€çš„å…¶ä»–ç»„æˆéƒ¨åˆ†"><a href="#2-æ˜¾å­˜å¼€é”€çš„å…¶ä»–ç»„æˆéƒ¨åˆ†" class="headerlink" title="2. æ˜¾å­˜å¼€é”€çš„å…¶ä»–ç»„æˆéƒ¨åˆ†"></a>2. æ˜¾å­˜å¼€é”€çš„å…¶ä»–ç»„æˆéƒ¨åˆ†</h2><p>é™¤äº†æ¨¡å‹å‚æ•°æœ¬èº«å¤–ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­è¿˜ä¼šæ¶ˆè€—ä¸€å®šçš„æ˜¾å­˜ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š<br>ğŸˆæ¢¯åº¦ï¼šæ¯ä¸ªå‚æ•°å¯¹åº”ä¸€ä¸ªæ¢¯åº¦ï¼Œå› æ­¤æ¢¯åº¦çš„æ˜¾å­˜å ç”¨ä¸å‚æ•°é‡ç›¸åŒã€‚<br>ğŸˆä¼˜åŒ–å™¨çŠ¶æ€ï¼šä¼˜åŒ–å™¨ï¼Œå¦‚Adamï¼Œé€šå¸¸ä¼šä¸ºæ¯ä¸ªå‚æ•°ä¿å­˜ä¸€é˜¶åŠ¨é‡å’ŒäºŒé˜¶åŠ¨é‡ï¼Œå› æ­¤ä¼˜åŒ–å™¨çš„æ˜¾å­˜å¼€é”€ä¸ºå‚æ•°é‡çš„2å€ï¼ˆå¯¹äºAdamï¼‰ã€‚å¯¹äºå…¶ä»–ä¼˜åŒ–å™¨ï¼ˆå¦‚SGDï¼‰ï¼Œåˆ™å–å†³äºä¼˜åŒ–å™¨çš„å…·ä½“å®ç°ï¼Œè‹¥æ˜¯å¸¦åŠ¨é‡çš„SGDï¼Œåˆ™ä¸ºå‚æ•°é‡çš„1å€ã€‚</p><h2 id="3-æ˜¾å­˜æ€»å ç”¨è®¡ç®—"><a href="#3-æ˜¾å­˜æ€»å ç”¨è®¡ç®—" class="headerlink" title="3. æ˜¾å­˜æ€»å ç”¨è®¡ç®—"></a>3. æ˜¾å­˜æ€»å ç”¨è®¡ç®—</h2><p>å‡è®¾æˆ‘ä»¬è®­ç»ƒä¸€ä¸ªå‚æ•°é‡ä¸º1Bçš„æ¨¡å‹ï¼Œé‡‡ç”¨å…¨ç²¾åº¦ï¼ˆfp32ï¼‰å¹¶ä½¿ç”¨Adamä¼˜åŒ–å™¨ï¼Œæ˜¾å­˜çš„å ç”¨è®¡ç®—å¦‚ä¸‹ï¼š<br>ğŸˆå‚æ•°ï¼š1B Ã— 4GB &#x3D; 4GB<br>ğŸˆæ¢¯åº¦ï¼š1B Ã— 4GB &#x3D; 4GB<br>ğŸˆä¼˜åŒ–å™¨çŠ¶æ€ï¼š1B Ã— 8GB &#x3D; 8GB<br>å› æ­¤ï¼Œæ€»æ˜¾å­˜å ç”¨ä¸º16GBã€‚å¦‚æœä½¿ç”¨åŠç²¾åº¦ï¼ˆbf16ï¼‰ï¼Œåˆ™æ˜¾å­˜å ç”¨å‡åŠï¼Œä¸º8GBã€‚æ··åˆç²¾åº¦è®­ç»ƒåˆ™ä¼šæ ¹æ®å„éƒ¨åˆ†ç²¾åº¦è°ƒæ•´è®¡ç®—ç»“æœã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>Code</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äººå·¥æ™ºèƒ½ç«èµ›æ±‡æ€»</title>
    <link href="/2025/02/01/competition/"/>
    <url>/2025/02/01/competition/</url>
    
    <content type="html"><![CDATA[<h2 id="1-äººå·¥æ™ºèƒ½ç«èµ›å¹³å°-Biendataï¼šData-Competition-Community-Biendata"><a href="#1-äººå·¥æ™ºèƒ½ç«èµ›å¹³å°-Biendataï¼šData-Competition-Community-Biendata" class="headerlink" title="1.äººå·¥æ™ºèƒ½ç«èµ›å¹³å° Biendataï¼šData Competition Community - Biendata"></a><strong>1.äººå·¥æ™ºèƒ½ç«èµ›å¹³å° Biendataï¼š</strong><a href="https://link.zhihu.com/?target=https://www.biendata.xyz/">Data Competition Community - Biendata</a></h2><p><strong>ä»‹ç»ï¼š</strong></p><blockquote><p>2018 å¹´ 5 æœˆï¼Œäººå·¥æ™ºèƒ½å’Œå¤§æ•°æ®çš„ç«èµ›å¹³å° Biendata å®Œæˆå¤©ä½¿è½®èèµ„ï¼Œç”±DeepTechæ·±ç§‘æŠ€æŠ•èµ„ï¼Œæ—¨åœ¨æ‰“é€ ä¸­å›½äººå·¥æ™ºèƒ½èµ›äº‹é¡¶çº§ IPï¼Œèµ›äº‹ç›¸å…³åª’ä½“è¿è¥ã€‚Biendata çš„æ¯”èµ›å®¢æˆ·æ—¢åŒ…æ‹¬<strong>ä»Šæ—¥å¤´æ¡ã€çŸ¥ä¹ã€æ‘©æ‹œã€æœç‹ç­‰ä¼ä¸šï¼Œä¹ŸåŒ…æ‹¬äº† IEEEã€ACMã€ä¸­å›½è®¡ç®—æœºå­¦ä¼šã€ä¸­å›½äººå·¥æ™ºèƒ½å­¦ä¼š</strong>ç­‰å›½å†…å¤–é¡¶å°–å­¦æœ¯ç»„ç»‡ã€‚</p></blockquote><p>æ€»ä½“ä¸Šæ¥è¯´å°±æ˜¯ä¸€ä¸ªå„è‡ªAIæ¯”èµ›æ±‡æ€»çš„å¹³å°ï¼ˆé™¤äº†ä¸€äº›å¤§å‚æœ‰è‡ªå·±çš„å¤§è§„æ¨¡AIèµ›äº‹æ¯”å¦‚é˜¿é‡Œäº‘å¤©æ± ã€åä¸ºäº‘ã€ç™¾åº¦ã€è…¾è®¯ï¼‰ï¼Œç±»ä¼¼çš„åŠèµ›å¹³å°IPè¿˜æœ‰</p><ul><li><strong>datafountainï¼š</strong><a href="https://www.datafountain.cn/competitions">æ•°æ®ç§‘å­¦ç«èµ›&#x2F;å¤§æ•°æ® ç«èµ› - DataFountain</a></li><li><strong>Kaggle(å›½å¤–)ï¼š</strong><a href="https://www.kaggle.com/competitions">Kaggle Competitions</a></li></ul><p><strong>æ—¶é—´ï¼š</strong>åŸºæœ¬ä¸Šæ˜¯ä»€ä¹ˆæ—¶é—´éƒ½æœ‰ï¼Œéœ€è¦æŒç»­å…³æ³¨å®˜ç½‘ï¼ŒåŒä¸€ä¸ªä¼ä¸šåŸºæœ¬æ¯å¹´ä¸¾åŠçš„timelineä¸å˜</p><h2 id="2-é˜¿é‡Œäº‘å¤©æ± ï¼šç®—æ³•å¤§èµ›-å¤©æ± å¤§æ•°æ®ç«èµ›-å¤©æ± å¤§èµ›-é˜¿é‡Œäº‘å¤©æ± "><a href="#2-é˜¿é‡Œäº‘å¤©æ± ï¼šç®—æ³•å¤§èµ›-å¤©æ± å¤§æ•°æ®ç«èµ›-å¤©æ± å¤§èµ›-é˜¿é‡Œäº‘å¤©æ± " class="headerlink" title="2.é˜¿é‡Œäº‘å¤©æ± ï¼šç®—æ³•å¤§èµ›-å¤©æ± å¤§æ•°æ®ç«èµ›-å¤©æ± å¤§èµ›-é˜¿é‡Œäº‘å¤©æ± "></a><strong>2.é˜¿é‡Œäº‘å¤©æ± ï¼š</strong><a href="https://tianchi.aliyun.com/competition/gameList/algorithmList">ç®—æ³•å¤§èµ›-å¤©æ± å¤§æ•°æ®ç«èµ›-å¤©æ± å¤§èµ›-é˜¿é‡Œäº‘å¤©æ± </a></h2><p><strong>ä»‹ç»ï¼š</strong>è€ç‰Œï¼Œ2014å¹´å¯åŠï¼Œé¢å‘å…¨ä¸–ç•Œç§‘ç ”äººå‘˜å’Œé«˜æ ¡å¸ˆç”Ÿï¼Œä¸šåŠ¡åœºæ™¯ä¸°å¯Œï¼ˆ2B2Céƒ½æœ‰coverï¼‰ï¼Œå¥–é‡‘æ± ä¹Ÿä¸°å¯Œã€‚</p><p><strong>æ—¶é—´ï¼š</strong>åŸºæœ¬ä¸Šæ˜¯5æœˆä»½å¼€å§‹æŠ¥åâ€”â€”å¤å¤©åˆèµ›\å¤èµ›â€”â€”10æœˆå†³èµ›ç­”è¾©</p><h2 id="3-åä¸ºäº‘-ï¼šåä¸ºäº‘å¤§èµ›å¹³å°"><a href="#3-åä¸ºäº‘-ï¼šåä¸ºäº‘å¤§èµ›å¹³å°" class="headerlink" title="3.åä¸ºäº‘ ï¼šåä¸ºäº‘å¤§èµ›å¹³å°"></a><strong>3.åä¸ºäº‘ ï¼š</strong><a href="https://competition.huaweicloud.com/competitions">åä¸ºäº‘å¤§èµ›å¹³å°</a></h2><p><strong>ä»‹ç»ï¼š</strong>ä¼—æ‰€å‘¨çŸ¥åä¸ºå¯¹ç ”å‘æŠ•å…¥æ¯”ä¾‹å¾ˆå¤§ï¼Œä¹Ÿååˆ†é‡è§†åˆ›æ–°å¤§èµ›çš„ä¸¾åŠï¼Œä¼šè”åˆå„ç§é«˜æ ¡ã€äº§å“çº¿ã€å­¦æœ¯æœºæ„\ç»„ç»‡åŠèµ›ï¼Œæ¯å¹´ä»»ä½•æ—¶é—´èŠ‚ç‚¹éƒ½å¯èƒ½ä¼šæœ‰æ¯”èµ›ã€‚ç›¸å…³é¢†åŸŸçš„åŒå­¦éœ€è¦æŒç»­å…³æ³¨ã€‚</p><p><strong>æ—¶é—´ï¼š</strong>ä¸€å¹´ä¸­ä»»æ„æ—¶åˆ»</p><h2 id="4-ç™¾åº¦é£æ¡¨AI-Studioå¤§èµ›ï¼šé£æ¡¨AI-Studio-äººå·¥æ™ºèƒ½å­¦ä¹ ä¸å®è®­ç¤¾åŒº"><a href="#4-ç™¾åº¦é£æ¡¨AI-Studioå¤§èµ›ï¼šé£æ¡¨AI-Studio-äººå·¥æ™ºèƒ½å­¦ä¹ ä¸å®è®­ç¤¾åŒº" class="headerlink" title="4. ç™¾åº¦é£æ¡¨AI Studioå¤§èµ›ï¼šé£æ¡¨AI Studio - äººå·¥æ™ºèƒ½å­¦ä¹ ä¸å®è®­ç¤¾åŒº"></a><strong>4. ç™¾åº¦é£æ¡¨AI Studioå¤§èµ›ï¼š</strong><a href="https://aistudio.baidu.com/aistudio/competition/1/1">é£æ¡¨AI Studio - äººå·¥æ™ºèƒ½å­¦ä¹ ä¸å®è®­ç¤¾åŒº</a></h2><p><strong>ä»‹ç»ï¼š</strong>AI Studioæ˜¯åŸºäºç™¾åº¦æ·±åº¦å­¦ä¹ å¹³å°é£æ¡¨çš„äººå·¥æ™ºèƒ½å­¦ä¹ ä¸å®è®­ç¤¾åŒºï¼Œæ•´ä½“è·Ÿåä¸ºäº‘çš„å½¢å¼å·®å¼‚ä¸å¤§ï¼Œä½†èµ›ç¨‹å‘¨æœŸä¼šç´§å‡‘ä¸€äº›ï¼Œå†…å®¹ä¹Ÿå’Œç™¾åº¦çš„ä¸šåŠ¡å†…å®¹å¼ºç›¸å…³ï¼ˆå¦‚<strong>NLP</strong>\å›¾åƒæ£€æµ‹\å¯¼èˆªè·¯å¾„ï¼‰ã€‚ä¸ªäººæ„Ÿè§‰åœºæ™¯ä¼šæ›´ä¸“ç²¾äºNLPï¼Œæ¯”å¦‚äº‹ä»¶æŠ½å–\æœºå™¨ç¿»è¯‘\QA\é˜…è¯»ç†è§£\æƒ…æ„Ÿåˆ†æã€‚</p><p><strong>æ—¶é—´ï¼š</strong>æ¯å¹´3-5æœˆ</p><h2 id="5-è…¾è®¯ï¼š-2021è…¾è®¯å¹¿å‘Šç®—æ³•å¤§èµ›"><a href="#5-è…¾è®¯ï¼š-2021è…¾è®¯å¹¿å‘Šç®—æ³•å¤§èµ›" class="headerlink" title="5.è…¾è®¯ï¼š 2021è…¾è®¯å¹¿å‘Šç®—æ³•å¤§èµ›"></a><strong>5.è…¾è®¯ï¼š</strong> <a href="https://algo.qq.com/index.html%3Flang%3Dcn">2021è…¾è®¯å¹¿å‘Šç®—æ³•å¤§èµ›</a></h2><p><strong>ä»‹ç»ï¼š</strong>è…¾è®¯AIèµ›äº‹åšçš„ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œé™¤äº†å¹¿å‘Šç®—æ³•å¤§èµ›è¿˜æ¯”è¾ƒæˆè§„æ¨¡ï¼ˆåŸºæœ¬æ¯å¹´æœ‰å»¶ç»­ï¼‰ï¼Œå…¶ä»–çš„éƒ½å¾ˆåˆ†æ•£ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„å¹³å°ã€‚</p><blockquote><p>AI Labå¶å°”æœ‰äº›ç®—æ³•æŒ‘æˆ˜èµ›ï¼ŒAIæ¸©å®¤ç§ç•ªèŒ„ä»€ä¹ˆçš„: <a href="https://ai.tencent.com/ailab/zh/index">è…¾è®¯ AI Lab - è…¾è®¯äººå·¥æ™ºèƒ½å®éªŒå®¤å®˜ç½‘</a></p></blockquote><p><strong>æ—¶é—´ï¼š</strong>ä¸‰æœˆå¼€å§‹æŠ¥åâ€”â€”å¤å­£åˆèµ›\å¤èµ›â€”â€”å…«æœˆå†³èµ›ç­”è¾©</p><h2 id="6-AIOps-Challengeæ™ºèƒ½è¿ç»´æŒ‘æˆ˜èµ›ï¼šç«èµ›åˆ—è¡¨"><a href="#6-AIOps-Challengeæ™ºèƒ½è¿ç»´æŒ‘æˆ˜èµ›ï¼šç«èµ›åˆ—è¡¨" class="headerlink" title="6.AIOps Challengeæ™ºèƒ½è¿ç»´æŒ‘æˆ˜èµ›ï¼šç«èµ›åˆ—è¡¨"></a><strong>6.AIOps Challengeæ™ºèƒ½è¿ç»´æŒ‘æˆ˜èµ›</strong>ï¼š<a href="https://iops.ai/competition_list/">ç«èµ›åˆ—è¡¨</a></h2><p><strong>ä»‹ç»ï¼š</strong>è§„æ¨¡è¾ƒå°ï¼Œæ¯å¹´æ‰¿åŠæ–¹ä¼šæœ‰å˜åŒ–ï¼Œä½†æ˜¯ä¸»é¢˜å›´ç»•ç€AIOpsä¸å˜</p><p><strong>æ—¶é—´ï¼š</strong>åŸºæœ¬ä¸Šæ˜¯1æœˆå¹´åˆå¼€å§‹æŠ¥åâ€”â€”æ˜¥å­£åˆèµ›\å¤èµ›â€”â€”äº”æœˆå†³èµ›ç­”è¾©</p><h2 id="7-KDD-CUPï¼šKDD-2021-Singapore"><a href="#7-KDD-CUPï¼šKDD-2021-Singapore" class="headerlink" title="7.KDD CUPï¼šKDD 2021 | Singapore"></a><strong>7.KDD CUPï¼š</strong><a href="https://www.kdd.org/kdd2021/%23">KDD 2021 | Singapore</a></h2><p><strong>ä»‹ç»:</strong> å›½å¤–èµ›äº‹ï¼Œå•†ä¸šæ€§è´¨è¾ƒå¼±æ‰€ä»¥å¥–é‡‘æ± è¾ƒå°ï¼Œä¸»é¢˜æ˜¯å¤šæºæ•°æ®æ—¶åºå¼‚å¸¸æ£€æµ‹\OGB-LSC\åŸå¸‚å¤§è„‘æŒ‘æˆ˜ï¼Œå»¶ç»­æ€§æ¯”è¾ƒå¥½ã€‚</p><p><strong>æ—¶é—´ï¼š</strong>æ¯å¹´äº”æœˆ-å…«æœˆ</p>]]></content>
    
    
    
    <tags>
      
      <tag>Study</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Recsyså¤§ç‰›å®éªŒå®¤å®˜ç½‘é“¾æ¥</title>
    <link href="/2025/02/01/lab/"/>
    <url>/2025/02/01/lab/</url>
    
    <content type="html"><![CDATA[<p>Xiangnan Heï¼š<a href="https://hexiangnan.github.io/">https://hexiangnan.github.io/</a><br>Yuan Fang@SMU: <a href="https://www.yfang.site/">https://www.yfang.site/</a><br>Huang Chao: <a href="https://sites.google.com/view/chaoh">https://sites.google.com/view/chaoh</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Study</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»ºä»£ç†æœåŠ¡å™¨è®¿é—®å¤–ç½‘</title>
    <link href="/2025/02/01/buildvpn/"/>
    <url>/2025/02/01/buildvpn/</url>
    
    <content type="html"><![CDATA[<h1 id="buildVpn"><a href="#buildVpn" class="headerlink" title="buildVpn"></a>buildVpn</h1><h3 id="å›¾æ–‡æ•™ç¨‹æ­å»ºä¸€ä¸ªvpn"><a href="#å›¾æ–‡æ•™ç¨‹æ­å»ºä¸€ä¸ªvpn" class="headerlink" title="å›¾æ–‡æ•™ç¨‹æ­å»ºä¸€ä¸ªvpn"></a>å›¾æ–‡æ•™ç¨‹æ­å»ºä¸€ä¸ªvpn</h3><h3 id="å‡†å¤‡å·¥ä½œï¼šæœ‰æ”¯ä»˜å®è´¦æˆ·ï¼Œæœ‰ä¸€ä¸ªå¯ç”¨é‚®ç®±ï¼Œæœ‰10ç¾å…ƒã€‚ï¼ˆæ ¹æ®æˆ‘ä¸‹é¢çš„é“¾æ¥æ³¨å†Œï¼Œä¼šèµ é€300ç¾å…ƒçš„ä½“éªŒé‡‘ï¼Œå¯ä»¥è¯•ä¸€ä¸‹æ²¡æˆæœ¬ï¼Œå¦‚æœé•¿æœŸç”¨å¯ä»¥å†å»å……å€¼ï¼‰"><a href="#å‡†å¤‡å·¥ä½œï¼šæœ‰æ”¯ä»˜å®è´¦æˆ·ï¼Œæœ‰ä¸€ä¸ªå¯ç”¨é‚®ç®±ï¼Œæœ‰10ç¾å…ƒã€‚ï¼ˆæ ¹æ®æˆ‘ä¸‹é¢çš„é“¾æ¥æ³¨å†Œï¼Œä¼šèµ é€300ç¾å…ƒçš„ä½“éªŒé‡‘ï¼Œå¯ä»¥è¯•ä¸€ä¸‹æ²¡æˆæœ¬ï¼Œå¦‚æœé•¿æœŸç”¨å¯ä»¥å†å»å……å€¼ï¼‰" class="headerlink" title="å‡†å¤‡å·¥ä½œï¼šæœ‰æ”¯ä»˜å®è´¦æˆ·ï¼Œæœ‰ä¸€ä¸ªå¯ç”¨é‚®ç®±ï¼Œæœ‰10ç¾å…ƒã€‚ï¼ˆæ ¹æ®æˆ‘ä¸‹é¢çš„é“¾æ¥æ³¨å†Œï¼Œä¼šèµ é€300ç¾å…ƒçš„ä½“éªŒé‡‘ï¼Œå¯ä»¥è¯•ä¸€ä¸‹æ²¡æˆæœ¬ï¼Œå¦‚æœé•¿æœŸç”¨å¯ä»¥å†å»å……å€¼ï¼‰"></a>å‡†å¤‡å·¥ä½œï¼šæœ‰æ”¯ä»˜å®è´¦æˆ·ï¼Œæœ‰ä¸€ä¸ªå¯ç”¨é‚®ç®±ï¼Œæœ‰10ç¾å…ƒã€‚ï¼ˆæ ¹æ®æˆ‘ä¸‹é¢çš„é“¾æ¥æ³¨å†Œï¼Œä¼šèµ é€300ç¾å…ƒçš„ä½“éªŒé‡‘ï¼Œå¯ä»¥è¯•ä¸€ä¸‹æ²¡æˆæœ¬ï¼Œå¦‚æœé•¿æœŸç”¨å¯ä»¥å†å»å……å€¼ï¼‰</h3><h3 id="å‰è¨€ï¼šé¦–å…ˆæˆ‘ä»¬é€‰æ‹©Vulträ¾›åº”å•†æ¥è´­ä¹°æµ·å¤–VPSæœåŠ¡å™¨ï¼Œå…·æœ‰12ä¸ªåœ°åŒºå¯ä»¥é€‰æ‹©ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¾›åº”å•†ï¼Œä½†æ˜¯Vultrçš„ä¼˜ç‚¹åœ¨äºï¼Œæ‰€æœ‰æœåŠ¡å™¨åˆ›å»ºæˆåŠŸåå¼€å§‹è®¡è´¹ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§å°æ—¶æ¥è®¡è´¹çš„ï¼Œå¦‚æœä½ åˆ é™¤æ‰æœåŠ¡å™¨å°†ä¸å†è®¡è´¹ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œç›®å‰å›½å†…çš„VPNæ‰“å‡»ç‰¹åˆ«ä¸¥å‰ï¼Œå¾ˆå¤šVPNå·²ç»è¢«å°æ‰äº†ï¼Œæˆ‘ä»¬è´­ä¹°çš„æµ·å¤–æœåŠ¡å™¨ä¹Ÿæœ‰å¯èƒ½æ˜¯è¢«å¢™æ‰IPæˆ–è€…ç”¨ä¸€æ®µæ—¶é—´è¢«å¢™çš„ã€‚æ‰€ä»¥Vultrå¯ä»¥éšæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼ˆä¼šåˆ†é…ä¸€ä¸ªæ–°çš„ipï¼‰ï¼Œåˆ é™¤æ‰åŸæœ‰çš„ã€‚"><a href="#å‰è¨€ï¼šé¦–å…ˆæˆ‘ä»¬é€‰æ‹©Vulträ¾›åº”å•†æ¥è´­ä¹°æµ·å¤–VPSæœåŠ¡å™¨ï¼Œå…·æœ‰12ä¸ªåœ°åŒºå¯ä»¥é€‰æ‹©ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¾›åº”å•†ï¼Œä½†æ˜¯Vultrçš„ä¼˜ç‚¹åœ¨äºï¼Œæ‰€æœ‰æœåŠ¡å™¨åˆ›å»ºæˆåŠŸåå¼€å§‹è®¡è´¹ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§å°æ—¶æ¥è®¡è´¹çš„ï¼Œå¦‚æœä½ åˆ é™¤æ‰æœåŠ¡å™¨å°†ä¸å†è®¡è´¹ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œç›®å‰å›½å†…çš„VPNæ‰“å‡»ç‰¹åˆ«ä¸¥å‰ï¼Œå¾ˆå¤šVPNå·²ç»è¢«å°æ‰äº†ï¼Œæˆ‘ä»¬è´­ä¹°çš„æµ·å¤–æœåŠ¡å™¨ä¹Ÿæœ‰å¯èƒ½æ˜¯è¢«å¢™æ‰IPæˆ–è€…ç”¨ä¸€æ®µæ—¶é—´è¢«å¢™çš„ã€‚æ‰€ä»¥Vultrå¯ä»¥éšæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼ˆä¼šåˆ†é…ä¸€ä¸ªæ–°çš„ipï¼‰ï¼Œåˆ é™¤æ‰åŸæœ‰çš„ã€‚" class="headerlink" title="å‰è¨€ï¼šé¦–å…ˆæˆ‘ä»¬é€‰æ‹©Vulträ¾›åº”å•†æ¥è´­ä¹°æµ·å¤–VPSæœåŠ¡å™¨ï¼Œå…·æœ‰12ä¸ªåœ°åŒºå¯ä»¥é€‰æ‹©ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¾›åº”å•†ï¼Œä½†æ˜¯Vultrçš„ä¼˜ç‚¹åœ¨äºï¼Œæ‰€æœ‰æœåŠ¡å™¨åˆ›å»ºæˆåŠŸåå¼€å§‹è®¡è´¹ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§å°æ—¶æ¥è®¡è´¹çš„ï¼Œå¦‚æœä½ åˆ é™¤æ‰æœåŠ¡å™¨å°†ä¸å†è®¡è´¹ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œç›®å‰å›½å†…çš„VPNæ‰“å‡»ç‰¹åˆ«ä¸¥å‰ï¼Œå¾ˆå¤šVPNå·²ç»è¢«å°æ‰äº†ï¼Œæˆ‘ä»¬è´­ä¹°çš„æµ·å¤–æœåŠ¡å™¨ä¹Ÿæœ‰å¯èƒ½æ˜¯è¢«å¢™æ‰IPæˆ–è€…ç”¨ä¸€æ®µæ—¶é—´è¢«å¢™çš„ã€‚æ‰€ä»¥Vultrå¯ä»¥éšæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼ˆä¼šåˆ†é…ä¸€ä¸ªæ–°çš„ipï¼‰ï¼Œåˆ é™¤æ‰åŸæœ‰çš„ã€‚"></a>å‰è¨€ï¼šé¦–å…ˆæˆ‘ä»¬é€‰æ‹©Vulträ¾›åº”å•†æ¥è´­ä¹°æµ·å¤–VPSæœåŠ¡å™¨ï¼Œå…·æœ‰12ä¸ªåœ°åŒºå¯ä»¥é€‰æ‹©ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–çš„ä¾›åº”å•†ï¼Œä½†æ˜¯Vultrçš„ä¼˜ç‚¹åœ¨äºï¼Œæ‰€æœ‰æœåŠ¡å™¨åˆ›å»ºæˆåŠŸåå¼€å§‹è®¡è´¹ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§å°æ—¶æ¥è®¡è´¹çš„ï¼Œå¦‚æœä½ åˆ é™¤æ‰æœåŠ¡å™¨å°†ä¸å†è®¡è´¹ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œç›®å‰å›½å†…çš„VPNæ‰“å‡»ç‰¹åˆ«ä¸¥å‰ï¼Œå¾ˆå¤šVPNå·²ç»è¢«å°æ‰äº†ï¼Œæˆ‘ä»¬è´­ä¹°çš„æµ·å¤–æœåŠ¡å™¨ä¹Ÿæœ‰å¯èƒ½æ˜¯è¢«å¢™æ‰IPæˆ–è€…ç”¨ä¸€æ®µæ—¶é—´è¢«å¢™çš„ã€‚æ‰€ä»¥Vultrå¯ä»¥éšæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼ˆä¼šåˆ†é…ä¸€ä¸ªæ–°çš„ipï¼‰ï¼Œåˆ é™¤æ‰åŸæœ‰çš„ã€‚</h3><h3 id="åˆ›å»ºè´¦æˆ·åŠè´­ä¹°VPSæœåŠ¡å™¨"><a href="#åˆ›å»ºè´¦æˆ·åŠè´­ä¹°VPSæœåŠ¡å™¨" class="headerlink" title="åˆ›å»ºè´¦æˆ·åŠè´­ä¹°VPSæœåŠ¡å™¨"></a>åˆ›å»ºè´¦æˆ·åŠè´­ä¹°VPSæœåŠ¡å™¨</h3><p>ç¬¬ä¸€æ­¥ï¼šç™»å½•vultrå®˜ç½‘æ³¨å†Œä¸€ä¸ªè´¦æˆ·ï¼Œåªéœ€è¦ä¸€ä¸ªé‚®ç®±å’Œå¯†ç å³å¯ã€‚ç„¶ååˆ°ä½ æ³¨å†Œçš„é‚®ç®±ä¸­å»éªŒè¯ä½ çš„è´¦æˆ·ã€‚</p><h4 id="å®˜ç½‘æ¨å¹¿é“¾æ¥-https-www-vultr-com-ref-9695214-9J-è¿™ä¸ªé“¾æ¥æ˜¯å®˜ç½‘ä¸€ä¸ªæ¨èé“¾æ¥ï¼Œæœ‰300åˆ€ä½“éªŒé‡‘"><a href="#å®˜ç½‘æ¨å¹¿é“¾æ¥-https-www-vultr-com-ref-9695214-9J-è¿™ä¸ªé“¾æ¥æ˜¯å®˜ç½‘ä¸€ä¸ªæ¨èé“¾æ¥ï¼Œæœ‰300åˆ€ä½“éªŒé‡‘" class="headerlink" title="å®˜ç½‘æ¨å¹¿é“¾æ¥(https://www.vultr.com/?ref=9695214-9J) è¿™ä¸ªé“¾æ¥æ˜¯å®˜ç½‘ä¸€ä¸ªæ¨èé“¾æ¥ï¼Œæœ‰300åˆ€ä½“éªŒé‡‘"></a>å®˜ç½‘æ¨å¹¿é“¾æ¥(<a href="https://www.vultr.com/?ref=9695214-9J">https://www.vultr.com/?ref=9695214-9J</a>) è¿™ä¸ªé“¾æ¥æ˜¯å®˜ç½‘ä¸€ä¸ªæ¨èé“¾æ¥ï¼Œæœ‰300åˆ€ä½“éªŒé‡‘</h4><p>å®˜ç½‘é“¾æ¥(<a href="https://www.vultr.com/?ref=7348872">https://www.vultr.com/?ref=7348872</a>)        è¿™ä¸ªé“¾æ¥å°±æ˜¯æ™®é€šçš„æ¨èé“¾æ¥</p><p><img src="/article_img/buildvpn/20180307101419422.jpg" alt="ç¬¬ä¸€æ­¥"></p><p>ç¬¬äºŒæ­¥ï¼šç™»å½•ä½ çš„è´¦æˆ·ï¼Œç„¶ååœ¨å¦‚å›¾æ‰€ç¤ºåœ°æ–¹è¿›è¡Œå……å€¼ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾®ä¿¡æˆ–æ”¯ä»˜å®æ‰«ç æ”¯ä»˜ï¼Œå……å€¼æˆåŠŸåï¼Œå¯ä»¥å†å³ä¸Šè§’çœ‹åˆ°ä½ çš„è´¦æˆ·ä½™é¢ã€‚</p><p><img src="/article_img/buildvpn/20180307101506198.jpg" alt="ç¬¬äºŒæ­¥"></p><p>ç¬¬ä¸‰æ­¥ï¼šè´­ä¹°VPSæœåŠ¡å™¨ã€‚åœ¨Serversæ ‡ç­¾ä¸­çœ‹åˆ°ï¼Œæˆ‘ä»¬ç›®å‰è¿˜æ²¡æœ‰æœåŠ¡å™¨ï¼Œè¿™æ—¶é€‰æ‹©å³ä¸Šè§’çš„åŠ å·æ–°æ·»åŠ ä¸€ä¸ªæœåŠ¡å™¨ã€‚</p><p><img src="/article_img/buildvpn/20180307101543991.jpg" alt="ç¬¬ä¸‰æ­¥"></p><p>æˆ‘ä»¬é¦–å…ˆé€‰æ‹©æœåŠ¡å™¨æ‰€åœ¨åœ°åŒºï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©NewYorkçº½çº¦ï¼Œä¸€èˆ¬æ¥è¯´é€‰æ‹©æ—¥æœ¬ã€çº½çº¦ã€æ´›æ‰çŸ¶ã€ç¡…è°·éƒ½è¿˜å¯ä»¥ï¼ˆå…¨çœ‹äººå“ï¼‰ã€‚</p><p><img src="/article_img/buildvpn/20180307101558312.jpg" alt="ç¬¬å››æ­¥"></p><p>å…¶æ¬¡æˆ‘ä»¬é€‰æ‹©æœåŠ¡å™¨çš„ç³»ç»Ÿç‰ˆæœ¬ã€‚è¿™é‡Œæ³¨æ„é€‰æ‹©CentOS6 ï¼Œé»˜è®¤æ˜¯7ç”±äºé˜²ç«å¢™ç­‰åŸå› å¯èƒ½ä¼šå½±å“æ¥ä¸‹æ¥çš„æ“ä½œã€‚</p><p><img src="/article_img/buildvpn/20180307101612917.jpg" alt="ç¬¬äº”æ­¥"></p><p>æœ€åï¼Œæˆ‘ä»¬é€‰æ‹©æ¯ä¸ªæœˆ2.5åˆ€ï¼Œ500Gå¸¦å®½çš„å°±å¯ä»¥äº†ã€‚</p><p><img src="/article_img/buildvpn/20180307101629749.jpg" alt="ç¬¬å…­æ­¥"></p><p>å…¶ä»–çš„ä¸éœ€è¦é€‰æ‹©ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨IPv6å°±åœ¨ç¬¬å››éƒ¨é€‰æ‹©ã€‚è¿™é‡Œæˆ‘ä»¬ä¸é€‰æ‹©ï¼Œé»˜è®¤ä½¿ç”¨IPv4ï¼Œæœ€ä¸‹é¢æˆ‘ä»¬é€‰æ‹©Depliy Now æ–°å»ºæœåŠ¡å™¨ã€‚</p><p><img src="/article_img/buildvpn/20180307101643841.jpg" alt="ç¬¬ä¸ƒæ­¥"></p><p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å°±å·²ç»æˆåŠŸçš„åˆ›å»ºäº†ä¸€ä¸ªæµ·å¤–æœåŠ¡å™¨ã€‚ä½†æ˜¯è¿™ä¸ªæœåŠ¡å™¨æ˜¯å¦å¯ç”¨ï¼Œæœ‰æ²¡æœ‰è¢«å¢™æ‰å‘¢ï¼Ÿå½“æœåŠ¡å™¨å®‰è£…å®Œæˆä¹‹åï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p><p><img src="/article_img/buildvpn/20180307101656506.jpg" alt="ç¬¬å…«æ­¥"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»åœ¨è¿è¡Œçš„æœåŠ¡å™¨ipä¸º  45.63.7.251 ï¼Œæ¥ä¸‹æ¥å°±æµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿè¿æ¥ã€‚<br>Winï¼š win + Rå¿«æ·é”®æˆ–è€…åœ¨å¼€å§‹èœå•-é™„ä»¶-è¿è¡Œï¼Œè°ƒå‡ºè¿è¡Œçª—å£ï¼Œè¾“å…¥cmdï¼Œç„¶åè¾“å…¥ping  45.63.7.251 å¯ä»¥çœ‹åˆ°æ˜¯å¦è¢«å¢™ã€‚ï¼ˆå¤špingå‡ æ¬¡ï¼‰<br>Mac + Linuxï¼šç›´æ¥åœ¨å‘½ä»¤è¡Œçª—å£è¾“å…¥ping  45.63.7.251 ï¼ˆæŒ‰ctrl + c é€€å‡ºï¼‰<br>æˆ–è€…é€šè¿‡ç½‘ç«™pingæ£€æµ‹ï¼Œå¦‚æœå…¨æ˜¯è¶…æ—¶ä»£è¡¨è¢«å¢™äº†ã€‚<a href="http://ping.chinaz.com/">http://ping.chinaz.com/</a></p><p><img src="/article_img/buildvpn/20180307101706991.jpg" alt="ç¬¬ä¹æ­¥"></p><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°åˆšåˆšæ–°å»ºçš„æœåŠ¡å™¨æ˜¯è¢«å¢™æ‰çš„ã€‚æ— æ³•è®¿é—®ï¼Œè¿™æ—¶å°±å†æ–°å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œç„¶ååœ¨pingã€‚å¦‚æœåŒä¸€ä¸ªåœ°åŒºå¤šæ¬¡æ— æ³•pingé€šï¼Œå°±æ¢ä¸€ä¸ªåœ°åŒºè¯•è¯•ï¼Œè¿™é‡Œæ¨èæ—¥æœ¬ã€‚ï¼ˆæ¯æ¬¡æ–°å»ºæœåŠ¡å™¨ï¼ŒæŒ‰å°æ—¶é¦–ä»˜0.01åˆ€ï¼Œåˆ é™¤åä¸è®¡è´¹ï¼Œåæ¬¡ä¹Ÿæ‰ä¸åˆ°ä¸€å—é’±ï¼‰</p><p>å¦‚å›¾ï¼Œæˆ‘å†æ¬¡æ–°å»ºäº†ä¸€ä¸ªæœåŠ¡å™¨ï¼Œè¿™å›å¯ä»¥pingé€šï¼Œè¯´æ˜æ²¡æœ‰è¢«å¢™ã€‚å°±æ˜¯å»¶æ—¶é«˜ä¸€ç‚¹ï¼Œå»¶æ—¶ä¸ä½ çš„ç½‘ç»œå’Œå½“å‰çš„æ—¶é—´æ®µï¼Œä½¿ç”¨çš„äººæ•°æœ‰å…³ã€‚</p><p><img src="/article_img/buildvpn/20180307101717865.jpg" alt="ç¬¬ä¹æ­¥"></p><p><img src="/article_img/buildvpn/20180307101733164.jpg" alt="ç¬¬åæ­¥"></p><p>è¿™æ—¶æˆ‘ä»¬æŠŠä¹‹å‰è¢«å¢™æ‰çš„æœåŠ¡å™¨åˆ é™¤å°±å¯ä»¥äº†ã€‚æ–°å»ºå¯ç”¨çš„æœåŠ¡å™¨å·²ç»å…¨éƒ¨å®Œæˆäº†ã€‚</p><p><img src="/article_img/buildvpn/20180307101748789.jpg" alt="ç¬¬åä¸€æ­¥"></p><p>ç‚¹å‡»è¯¦æƒ…å¯ä»¥çœ‹åˆ°æœåŠ¡å™¨çš„ç”¨æˆ·åå’Œå¯†ç </p><p><img src="/article_img/buildvpn/20180307101802763.jpg" alt="ç¬¬åäºŒæ­¥"></p><p><img src="/article_img/buildvpn/20180307101812373.jpg" alt="ç¬¬åä¸‰æ­¥"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ­å»ºVPNäº†ã€‚è·ç¦»æˆåŠŸå·²ç»å¾ˆè¿‘äº†ã€‚</p><p>é¦–å…ˆå¦‚æœæˆ‘ä»¬æ˜¯Windowsç³»ç»Ÿéœ€è¦ä¸‹è½½ä¸€ä¸ªè½¯ä»¶ï¼ˆMac æˆ– Linuxä¸éœ€è¦ï¼‰ï¼ŒXshellæˆ–è€…SecureCRTã€‚è¿™é‡Œæˆ‘ç”¨çš„æ˜¯SecureCRTã€‚<br>å¡«å†™ä½ çš„IPåœ°å€ï¼Œç”¨æˆ·åä¸ºrootï¼Œç‚¹å‡»é“¾æ¥ï¼Œç‚¹å‡»æ¥å—ä¿å­˜ï¼Œè¾“å…¥ä½ çš„å¯†ç ï¼ŒæˆåŠŸè¿æ¥ã€‚</p><p><img src="/article_img/buildvpn/20180307101823784.jpg" alt="ç¬¬åå››æ­¥"><br><img src="/article_img/buildvpn/20180307101836775.jpg" alt="ç¬¬åäº”æ­¥"></p><p>å…¶æ¬¡è¦è®¾ç½®ç¼–ç æ ¼å¼ï¼Œä¸ç„¶ä¸€ä¼šçš„ä¸­æ–‡ä¼šæ˜¾ç¤ºä¹±ç ã€‚èœå•æ  é€‰é¡¹-ä¼šè¯é€‰é¡¹-å¤–è§‚-å­—ç¬¦ç¼–ç -UTF8-ç¡®è®¤ã€‚<br>å…³é—­è½¯ä»¶ï¼Œé‡æ–°è¿æ¥ï¼ˆç›´æ¥åŒå‡»IPå°±å¯ä»¥äº†ï¼‰ã€‚</p><p><img src="/article_img/buildvpn/20180307101848327.jpg" alt="ç¬¬åå…­æ­¥"></p><p>ç„¶åå¤åˆ¶ä¸‹é¢çš„ä¸€é”®éƒ¨ç½²ç®¡ç†è„šæœ¬ï¼Œç²˜è´´åˆ°çª—å£ä¸­ï¼ˆé¼ æ ‡å³é”®ä¸€ä¸‹å³å¯ç²˜è´´ï¼‰</p><p>CentOS6&#x2F;Debian6&#x2F;Ubuntu14 ShadowsocksRä¸€é”®éƒ¨ç½²ç®¡ç†è„šæœ¬(å¯ä»¥æŠŠä¸‹é¢å‘½ä»¤æŒ‰è¡Œæ‹†å¼€åˆ†æ­¥æ‰§è¡Œ)ï¼š</p><p>wget â€“no-check-certificate <a href="https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh">https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh</a></p><p>chmod +x shadowsocksR.sh</p><p>.&#x2F;shadowsocksR.sh 2&gt;&amp;1 | tee shadowsocksR.log</p><h3 id="ä¸»è„šæœ¬å®‰è£…SSRï¼š"><a href="#ä¸»è„šæœ¬å®‰è£…SSRï¼š" class="headerlink" title="ä¸»è„šæœ¬å®‰è£…SSRï¼š"></a>ä¸»è„šæœ¬å®‰è£…SSRï¼š</h3><p>ç¬¬ä¸€æ­¥ï¼šè®¾å®šå¯†ç ï¼Œdefault ä¸ºé»˜è®¤å¯†ç </p><p><img src="/article_img/buildvpn/new2.png" alt="ç¬¬åå…­-1æ­¥"></p><p>ç¬¬äºŒæ­¥ï¼šè®¾å®šç«¯å£ï¼Œdefault ä¸ºéšæœºç”Ÿæˆé»˜è®¤ç«¯å£<br><img src="/article_img/buildvpn/new3.png" alt="ç¬¬åå…­-2æ­¥"></p><p>ç¬¬ä¸‰æ­¥ï¼šè®¾å®šåŠ å¯†æ–¹å¼ï¼Œdefault ä¸ºé»˜è®¤åŠ å¯†æ–¹å¼<br><img src="/article_img/buildvpn/new4.png" alt="ç¬¬åå…­-3æ­¥"></p><p>ç¬¬å››æ­¥ï¼šè®¾åè®®ï¼Œdefault ä¸ºé»˜è®¤åè®®<br><img src="/article_img/buildvpn/new1.png" alt="ç¬¬åå…­-4æ­¥"></p><p>ç¬¬äº”æ­¥ï¼šè®¾å®šæ··æ·†æ–¹å¼ï¼Œdefault ä¸ºé»˜è®¤æ··æ·†<br><img src="/article_img/buildvpn/new5.png" alt="ç¬¬åå…­-5æ­¥"></p><p>ç¬¬å…­æ­¥ï¼šå®‰ä»»æ„é”®ï¼Œå›è½¦å¼€å§‹è¿›è¡Œå®‰è£…ï¼Œå®‰è£…å®Œæˆåè‡ªåŠ¨å¯åŠ¨<br><img src="/article_img/buildvpn/new7.png" alt="ç¬¬åå…­-6æ­¥"></p><p>å½“å®‰è£…å‡ºç°é—®é¢˜æ—¶ï¼Œæœ‰å¯èƒ½æ˜¯centOSä¸­ç¼ºå°‘ç›¸åº”cç¼–è¯‘å™¨ï¼Œå¯ä»¥åˆ†åˆ«æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤å®‰è£…ç¼–è¯‘å™¨åå†å®‰è£…SSRï¼š</p><p>yum -y install gcc automake autoconf libtool make</p><p>yum -y install gcc-c++</p><p>æœ€ç»ˆï¼šå®‰è£…å®Œæˆï¼Œå±•ç¤ºä½ æ‰€è®¾ç½®çš„å†…å®¹ï¼Œå¯ä»¥æŒ‰ç…§é“¾æ¥ä¿¡æ¯è¿›è¡Œè¿æ¥(æœ€è¿‘è¾ƒä¸¥æœ‰å¯èƒ½è¢«å¢™æˆ–è€…ç«¯å£è¢«å°)<br><img src="/article_img/buildvpn/new6.png" alt="ç¬¬åå…­-7æ­¥"></p><p>å®‰è£…è¿‡åå¦‚æœæƒ³è¦ä¿®æ”¹ï¼Œè¿è¡Œå¦‚ä¸‹ç›¸å…³å‘½ä»¤</p><p>å¯åŠ¨ï¼š&#x2F;etc&#x2F;init.d&#x2F;shadowsocks start</p><p>åœæ­¢ï¼š&#x2F;etc&#x2F;init.d&#x2F;shadowsocks stop</p><p>é‡å¯ï¼š&#x2F;etc&#x2F;init.d&#x2F;shadowsocks restart</p><p>çŠ¶æ€ï¼š&#x2F;etc&#x2F;init.d&#x2F;shadowsocks status</p><p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š&#x2F;etc&#x2F;shadowsocks.json  ä¿®æ”¹æ–‡ä»¶ç”¨vi æˆ–è€… vimå‘½ä»¤ï¼Œä½¿ç”¨æ–¹æ³•ç™¾åº¦</p><p>æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼š&#x2F;var&#x2F;log&#x2F;shadowsocks.log </p><p>å®‰è£…è·¯å¾„ï¼š&#x2F;usr&#x2F;local&#x2F;shadowsocks&#x2F;shadowsoks</p><p>å¸è½½.&#x2F;shadowsocksR.sh uninstall</p><h3 id="å¤‡ç”¨è„šæœ¬å®‰è£…SSRï¼šï¼ˆå¦‚æœæ­¤æ—¶é“¾æ¥æ–­äº†ï¼Œé‡è¿åè¾“å…¥-ssr-sh-å°±å¯ä»¥è¿›å…¥ä¸‹é¢å®‰è£…æ“ä½œï¼Œä»¥åä¿®æ”¹æ—¶ä¹Ÿè¾“å…¥-ssr-shï¼‰"><a href="#å¤‡ç”¨è„šæœ¬å®‰è£…SSRï¼šï¼ˆå¦‚æœæ­¤æ—¶é“¾æ¥æ–­äº†ï¼Œé‡è¿åè¾“å…¥-ssr-sh-å°±å¯ä»¥è¿›å…¥ä¸‹é¢å®‰è£…æ“ä½œï¼Œä»¥åä¿®æ”¹æ—¶ä¹Ÿè¾“å…¥-ssr-shï¼‰" class="headerlink" title="å¤‡ç”¨è„šæœ¬å®‰è£…SSRï¼šï¼ˆå¦‚æœæ­¤æ—¶é“¾æ¥æ–­äº†ï¼Œé‡è¿åè¾“å…¥.&#x2F;ssr.sh å°±å¯ä»¥è¿›å…¥ä¸‹é¢å®‰è£…æ“ä½œï¼Œä»¥åä¿®æ”¹æ—¶ä¹Ÿè¾“å…¥.&#x2F;ssr.shï¼‰"></a>å¤‡ç”¨è„šæœ¬å®‰è£…SSRï¼šï¼ˆå¦‚æœæ­¤æ—¶é“¾æ¥æ–­äº†ï¼Œé‡è¿åè¾“å…¥.&#x2F;ssr.sh å°±å¯ä»¥è¿›å…¥ä¸‹é¢å®‰è£…æ“ä½œï¼Œä»¥åä¿®æ”¹æ—¶ä¹Ÿè¾“å…¥.&#x2F;ssr.shï¼‰</h3><p>å¤‡ç”¨è„šæœ¬ï¼ˆä¸Šé¢çš„è„šæ­¥ä¸å¯ç”¨å†è¾“å…¥è¿™ä¸ªï¼‰ï¼š</p><p>wget -N â€“no-check-certificate <a href="https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh">https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh</a> &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh</p><p>å¦‚æœåœ¨è¾“å…¥å‘½ä»¤å¼æç¤ºwget:command not foundï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰wgetå·¥å…·ï¼Œå…ˆè¾“å…¥ä¸‹é¢æŒ‡ä»¤è¿›è¡Œå®‰è£…ï¼Œç„¶åå†éƒ¨ç½²ç®¡ç†è„šæœ¬<br>yum -y install wget</p><p>ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©1 </p><p><img src="/article_img/buildvpn/20180307101902154.jpg" alt="ç¬¬åä¸ƒæ­¥"></p><p>ç¬¬äºŒæ­¥ï¼šç›´æ¥é»˜è®¤å³å¯ã€‚ï¼ˆç†è®ºä¸Šè¯´æ˜¯å¯ä»¥éšä¾¿çš„ï¼Œ1 - 65535ï¼‰</p><p><img src="/article_img/buildvpn/20180307101913385.jpg" alt="ç¬¬åå…«æ­¥"></p><p>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å¯†ç </p><p><img src="/article_img/buildvpn/20180307101927773.jpg" alt="ç¬¬åä¹æ­¥"></p><p>ç¬¬å››æ­¥ï¼šåŠ å¯†æ–¹å¼ï¼Œé€‰æ‹©aes-128-cfbå°±å¯ä»¥</p><p><img src="/article_img/buildvpn/20180307101937845.jpg" alt="ç¬¬äºŒåæ­¥"></p><p>ç¬¬äº”æ­¥ï¼šåè®®æ’ä»¶ï¼Œä¸ºäº†ä½¿SSä¹Ÿèƒ½å¤Ÿä½¿ç”¨ï¼Œè¿™é‡Œé€‰æ‹©origin</p><p><img src="/article_img/buildvpn/20180307101948387.jpg" alt="ç¬¬äºŒåä¸€æ­¥"></p><p>ç¬¬å…­æ­¥ï¼šé€‰æ‹©æ··æ·†plain</p><p><img src="/article_img/buildvpn/20180307101957836.jpg" alt="ç¬¬äºŒåäºŒæ­¥"></p><p>ç¬¬ä¸ƒæ­¥ï¼šè®¾ç½®è¿æ¥æ•°é‡ï¼Œé»˜è®¤å›è½¦å³å¯ã€‚ç„¶åå¼€å§‹è¿›è¡Œå®‰è£…ã€‚</p><p><img src="/article_img/buildvpn/20180307102008416.jpg" alt="ç¬¬äºŒåä¸‰æ­¥"></p><p>å¦‚æœé‡åˆ°è¾“å…¥é¡¹ï¼Œé—®yè¿˜æ˜¯næ—¶ï¼Œè¾“å…¥y å›è½¦ç¡®è®¤ã€‚</p><p><img src="/article_img/buildvpn/20180307102018140.jpg" alt="ç¬¬äºŒåå››æ­¥"></p><h3 id="åˆ°æ­¤å®‰è£…å°±å®Œæˆäº†ã€‚å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯è¿›è¡Œé“¾æ¥ç¿»å¢™ä¸Šç½‘äº†ã€‚"><a href="#åˆ°æ­¤å®‰è£…å°±å®Œæˆäº†ã€‚å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯è¿›è¡Œé“¾æ¥ç¿»å¢™ä¸Šç½‘äº†ã€‚" class="headerlink" title="åˆ°æ­¤å®‰è£…å°±å®Œæˆäº†ã€‚å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯è¿›è¡Œé“¾æ¥ç¿»å¢™ä¸Šç½‘äº†ã€‚"></a>åˆ°æ­¤å®‰è£…å°±å®Œæˆäº†ã€‚å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯è¿›è¡Œé“¾æ¥ç¿»å¢™ä¸Šç½‘äº†ã€‚</h3><p><img src="/article_img/buildvpn/2018030710205260.jpg" alt="ç¬¬äºŒåäº”æ­¥"></p><p>å¦‚æœSSRæˆåŠŸå®‰è£…ï¼Œä½†æ˜¯ä¸èƒ½æ­£å¸¸å¯åŠ¨ï¼Œåœ¨centOSä¸­ä¸»è¦åŸå› æ˜¯ç¼ºå°‘pythonç¯å¢ƒï¼Œåˆ©ç”¨ä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œå®‰è£…</p><p>yum -y install python36</p><p>cd &#x2F;usr&#x2F;bin</p><p>ln -s python3 python</p><h3 id="ä¸ºäº†èƒ½å¤Ÿæé«˜ä¸Šç½‘é€Ÿåº¦ï¼ŒYouTubeä»480-ä½“éªŒä¸º1080ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥è¿›è¡Œå®‰è£…åŠ é€Ÿè½¯ä»¶ï¼ˆé€Ÿé”ã€BBRä¸¤è€…é€‰å…¶ä¸€ï¼Œä¸å¯å…±å­˜ï¼‰ã€‚"><a href="#ä¸ºäº†èƒ½å¤Ÿæé«˜ä¸Šç½‘é€Ÿåº¦ï¼ŒYouTubeä»480-ä½“éªŒä¸º1080ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥è¿›è¡Œå®‰è£…åŠ é€Ÿè½¯ä»¶ï¼ˆé€Ÿé”ã€BBRä¸¤è€…é€‰å…¶ä¸€ï¼Œä¸å¯å…±å­˜ï¼‰ã€‚" class="headerlink" title="ä¸ºäº†èƒ½å¤Ÿæé«˜ä¸Šç½‘é€Ÿåº¦ï¼ŒYouTubeä»480 ä½“éªŒä¸º1080ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥è¿›è¡Œå®‰è£…åŠ é€Ÿè½¯ä»¶ï¼ˆé€Ÿé”ã€BBRä¸¤è€…é€‰å…¶ä¸€ï¼Œä¸å¯å…±å­˜ï¼‰ã€‚"></a>ä¸ºäº†èƒ½å¤Ÿæé«˜ä¸Šç½‘é€Ÿåº¦ï¼ŒYouTubeä»480 ä½“éªŒä¸º1080ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥è¿›è¡Œå®‰è£…åŠ é€Ÿè½¯ä»¶ï¼ˆé€Ÿé”ã€BBRä¸¤è€…é€‰å…¶ä¸€ï¼Œä¸å¯å…±å­˜ï¼‰ã€‚</h3><h3 id="BBRåŠ é€Ÿï¼ˆå¦‚æœéœ€è¦é€Ÿé”ï¼Œè·³è¿‡æ­¤æ®µï¼‰"><a href="#BBRåŠ é€Ÿï¼ˆå¦‚æœéœ€è¦é€Ÿé”ï¼Œè·³è¿‡æ­¤æ®µï¼‰" class="headerlink" title="BBRåŠ é€Ÿï¼ˆå¦‚æœéœ€è¦é€Ÿé”ï¼Œè·³è¿‡æ­¤æ®µï¼‰"></a>BBRåŠ é€Ÿï¼ˆå¦‚æœéœ€è¦é€Ÿé”ï¼Œè·³è¿‡æ­¤æ®µï¼‰</h3><p>BBRåŠ é€Ÿç‰¹åˆ«ç®€å•ï¼Œå¤åˆ¶ä¸‹é¢è„šæœ¬ä»£ç å³å¯ã€‚<br>è°·æ­ŒBBRåŠ é€Ÿè„šæœ¬ï¼š</p><p>ç¬¬ä¸€ä¸ªæŒ‡ä»¤ï¼šwget â€“no-check-certificate <a href="https://github.com/teddysun/across/raw/master/bbr.sh">https://github.com/teddysun/across/raw/master/bbr.sh</a></p><p>ç¬¬äºŒä¸ªæŒ‡ä»¤ï¼šchmod +x bbr.sh</p><p>ç¬¬ä¸‰ä¸ªæŒ‡ä»¤ï¼š.&#x2F;bbr.sh</p><p>1ã€é‡åˆ°åœé¡¿æŒ‰å›è½¦å³å¯ã€‚ç„¶åç»§ç»­å®‰è£…ã€‚ï¼ˆå¤šç­‰ä¸€ä¼šï¼‰</p><p><img src="/article_img/buildvpn/20180307102104748.jpg" alt="ç¬¬äºŒåå…­æ­¥"></p><p>2ã€å®‰è£…å®Œæˆåé—®ä½ æ˜¯å¦é‡å¯ï¼Œè¿™é‡Œè¾“å…¥yï¼Œå›è½¦ã€‚</p><p><img src="/article_img/buildvpn/20180307102114503.jpg" alt="ç¬¬äºŒåä¸ƒæ­¥"></p><p>3ã€é‡æ–°è¿æ¥åï¼Œè¾“å…¥ lsmod | grep bbr æŸ¥çœ‹BBRæ˜¯å¦å¯åŠ¨ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å¯åŠ¨äº†ã€‚</p><p><img src="/article_img/buildvpn/20180307102126665.jpg" alt="ç¬¬äºŒåå…«æ­¥"></p><h3 id="å¤‡ç”¨è„šæœ¬å®‰è£…SSï¼š"><a href="#å¤‡ç”¨è„šæœ¬å®‰è£…SSï¼š" class="headerlink" title="å¤‡ç”¨è„šæœ¬å®‰è£…SSï¼š"></a>å¤‡ç”¨è„šæœ¬å®‰è£…SSï¼š</h3><p>wget â€“no-check-certificate -O shadowsocks-all.sh <a href="https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh">https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</a></p><p>ç¬¬ä¸€é¡¹é€‰1 pythonå®‰è£…ï¼Œå…¶ä»–é€‰æ‹©ä¸ä¸»è„šæœ¬æè¿°ä¸€æ ·</p><h3 id="é€Ÿé”åŠ é€Ÿ"><a href="#é€Ÿé”åŠ é€Ÿ" class="headerlink" title="é€Ÿé”åŠ é€Ÿ"></a>é€Ÿé”åŠ é€Ÿ</h3><p>1ã€é¦–å…ˆè¾“å…¥<br>uname -a æŸ¥çœ‹å†…æ ¸ä¸º</p><p>2ã€ç„¶åè¾“å…¥<br>cat &#x2F;etc&#x2F;redhat-release  æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</p><p>3ã€ä¸‹è½½CentOS 6.6ç‰ˆæœ¬çš„å†…æ ¸ï¼ˆé€Ÿé”æ”¯æŒ6.6ç‰ˆæœ¬çš„ï¼‰<br>wget <a href="http://ftp.scientificlinux.org/linux/scientific/6.6/x86_64/updates/security/kernel-2.6.32-504.3.3.el6.x86_64.rpm">http://ftp.scientificlinux.org/linux/scientific/6.6/x86_64/updates/security/kernel-2.6.32-504.3.3.el6.x86_64.rpm</a></p><p>4ã€å®‰è£…å†…æ ¸<br>rpm -ivh kernel-2.6.32-504.3.3.el6.x86_64.rpm â€“force</p><p>5ã€é‡å¯æœåŠ¡å™¨<br>reboot</p><p>6ã€å®‰è£…é€Ÿé”<br>wget -N â€“no-check-certificate <a href="https://raw.githubusercontent.com/91yun/serverspeeder/master/serverspeeder-all.sh">https://raw.githubusercontent.com/91yun/serverspeeder/master/serverspeeder-all.sh</a> &amp;&amp; bash serverspeeder-all.sh</p><p>è¿™æ—¶æ­£å¸¸æƒ…å†µé€Ÿé”å°±å·²ç»å®‰è£…å®Œæˆå¹¶ä¸”å¯åŠ¨äº†ã€‚</p><p><img src="/article_img/buildvpn/20180307102140531.jpg" alt="ç¬¬äºŒåä¹æ­¥"></p><p>service serverSpeeder status     æŸ¥çœ‹é€Ÿé”çš„çŠ¶æ€<br>service serverSpeeder start | stop | restart  åœæ­¢æš‚åœé‡å¯é”é€Ÿ</p><h3 id="åˆ°æ­¤ä¸ºæ­¢ï¼Œé€šè¿‡BBRæˆ–é€Ÿé”åŠ é€Ÿçš„VPNæœåŠ¡å™¨å·²ç»å…¨éƒ¨æ­å»ºå®Œæˆäº†ã€‚"><a href="#åˆ°æ­¤ä¸ºæ­¢ï¼Œé€šè¿‡BBRæˆ–é€Ÿé”åŠ é€Ÿçš„VPNæœåŠ¡å™¨å·²ç»å…¨éƒ¨æ­å»ºå®Œæˆäº†ã€‚" class="headerlink" title="åˆ°æ­¤ä¸ºæ­¢ï¼Œé€šè¿‡BBRæˆ–é€Ÿé”åŠ é€Ÿçš„VPNæœåŠ¡å™¨å·²ç»å…¨éƒ¨æ­å»ºå®Œæˆäº†ã€‚"></a>åˆ°æ­¤ä¸ºæ­¢ï¼Œé€šè¿‡BBRæˆ–é€Ÿé”åŠ é€Ÿçš„VPNæœåŠ¡å™¨å·²ç»å…¨éƒ¨æ­å»ºå®Œæˆäº†ã€‚</h3><h3 id="æ¥ä¸‹æ¥ä½¿ç”¨SSRæˆ–è€…SSå®¢æˆ·ç«¯è¿æ¥å³å¯"><a href="#æ¥ä¸‹æ¥ä½¿ç”¨SSRæˆ–è€…SSå®¢æˆ·ç«¯è¿æ¥å³å¯" class="headerlink" title="æ¥ä¸‹æ¥ä½¿ç”¨SSRæˆ–è€…SSå®¢æˆ·ç«¯è¿æ¥å³å¯"></a>æ¥ä¸‹æ¥ä½¿ç”¨SSRæˆ–è€…SSå®¢æˆ·ç«¯è¿æ¥å³å¯</h3><p>MACï¼š<a href="https://github.com/shadowsocksr-backup/ShadowsocksX-NG/releases">https://github.com/shadowsocksr-backup/ShadowsocksX-NG/releases</a><br>WINï¼š<a href="https://github.com/shadowsocksr-backup/shadowsocksr-csharp/releases">https://github.com/shadowsocksr-backup/shadowsocksr-csharp/releases</a><br>IPHONEï¼šFirstWingyã€potatso lite  ï¼ˆå•†åº—é‡Œæœ‰ï¼Œå®åœ¨æ‰¾ä¸åˆ°å¯ä»¥å¼„ä¸ªç¾å›½APPLEIDï¼Œä»€ä¹ˆéƒ½èƒ½ä¸‹ï¼‰</p><p>ä»¥iphoneä¸ºä¾‹ï¼šé¦–å…ˆå³ä¸Šè§’åŠ å·ï¼Œæ·»åŠ æœåŠ¡å™¨é…ç½®ä¿¡æ¯ã€‚</p><p><img src="/article_img/buildvpn/20180307102153178.jpg" alt="ç¬¬ä¸‰åæ­¥"></p><p>ç„¶åï¼šå¡«å†™ä¸€å¼€å§‹å®‰è£…æ—¶çš„ä¿¡æ¯,ä¿å­˜ã€‚å¦‚æœå¿˜äº†è®°å¾— .&#x2F;ssr.sh  é€‰æ‹©5 æŸ¥çœ‹è¿æ¥ä¿¡æ¯</p><p><img src="/article_img/buildvpn/20180307102204995.jpg" alt="ç¬¬ä¸‰åä¸€æ­¥"></p><p>è¿™æ—¶ä½ å¯ä»¥æ„‰å¿«çš„ç¿»å¢™ä¸Šç½‘äº†ã€‚</p><p><img src="/article_img/buildvpn/20180307102258394.jpg" alt="ç¬¬ä¸‰åäºŒæ­¥"></p><h3 id="å¦‚æœä½¿ç”¨SSRæ— æ³•è¿æ¥ç½‘ç»œï¼Œåˆ™å¯èƒ½æ˜¯centOSæœªå¼€æ”¾ç›¸å…³ç«¯å£ï¼Œæ¥ä¸‹æ¥æŸ¥è¯¢å¹¶å¼€å¯ç«¯å£"><a href="#å¦‚æœä½¿ç”¨SSRæ— æ³•è¿æ¥ç½‘ç»œï¼Œåˆ™å¯èƒ½æ˜¯centOSæœªå¼€æ”¾ç›¸å…³ç«¯å£ï¼Œæ¥ä¸‹æ¥æŸ¥è¯¢å¹¶å¼€å¯ç«¯å£" class="headerlink" title="å¦‚æœä½¿ç”¨SSRæ— æ³•è¿æ¥ç½‘ç»œï¼Œåˆ™å¯èƒ½æ˜¯centOSæœªå¼€æ”¾ç›¸å…³ç«¯å£ï¼Œæ¥ä¸‹æ¥æŸ¥è¯¢å¹¶å¼€å¯ç«¯å£"></a>å¦‚æœä½¿ç”¨SSRæ— æ³•è¿æ¥ç½‘ç»œï¼Œåˆ™å¯èƒ½æ˜¯centOSæœªå¼€æ”¾ç›¸å…³ç«¯å£ï¼Œæ¥ä¸‹æ¥æŸ¥è¯¢å¹¶å¼€å¯ç«¯å£</h3><p>.&#x2F;ssr.sh é€‰æ‹©5 æŸ¥çœ‹é…ç½®ä¿¡æ¯ä¸­çš„ç«¯å£å·</p><p>å‡å¦‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯2333ç«¯å£</p><p>ç”¨ä»¥ä¸‹æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹æ˜¯å¦å¼€å¯å¯¹åº”ç«¯å£</p><p>firewall-cmd â€“list-ports</p><p><img src="/article_img/buildvpn/port.png" alt="ç¬¬ä¸‰åä¸‰æ­¥"></p><p>å¦‚æœæ²¡æœ‰å‡ºç°2333&#x2F;tcpçš„å­—æ ·ï¼Œé‚£ä¹ˆè¯¥ç«¯å£è¿˜æ²¡æœ‰å¼€æ”¾ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¼€æ”¾ç›¸åº”ç«¯å£å¹¶é‡å¯ï¼š</p><p>firewall-cmd â€“zone&#x3D;public â€“add-port&#x3D;2333&#x2F;tcp â€“permanent</p><p>reboot</p><p>ç­‰å¾…1åˆ†é’Ÿå·¦å³ï¼Œç«¯å£å·²å¼€æ”¾ï¼ŒSSRå¯ä»¥è¿æ¥</p>]]></content>
    
    
    
    <tags>
      
      <tag>Web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ—¥è¯­è¯æ±‡ç§¯ç´¯</title>
    <link href="/2025/01/01/%E6%97%A5%E8%AF%AD%E8%AF%8D%E6%B1%87%E7%A7%AF%E7%B4%AF/"/>
    <url>/2025/01/01/%E6%97%A5%E8%AF%AD%E8%AF%8D%E6%B1%87%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<p>2025.03.17<br> æ„›(ã‚ã„) çˆ±  æ± (ã„ã‘) é±¼å¡˜  ãŠã¯ã‚ˆã† æ—©ä¸Šå¥½  ãŠã­ãŒã„ æ‹œæ‰˜äº†  ã¯ã„ æ˜¯çš„  ã†ã‚‹ã•ã„ çƒ¦äººçš„  ã„ã„ãˆ ä¸ï¼Œä¸æ˜¯  ã‹ã‚ã„ã„ å¯çˆ±çš„  ã‹ã£ã“ã„ã„ å¸…çš„  å‚˜(ã‹ã•) ä¼  ãŠã¦ã‚ã‚‰ã„ å•æ‰€<br>2025.03.19<br> æµ·(ã†ã¿) æµ·  å˜˜(ã†ã) å‡è¯  ä¸–ç•Œ(ã›ã‹ã„) ä¸–ç•Œ  å¯¿å¸(ã™ã—) å¯¿å¸  ãŠã„ã—ã„ å¥½åƒ  ãŠè“å­(ãŠã‹ã—) ç‚¹å¿ƒ  èŠ(ãã) èŠèŠ±  å›(ãã¿) ä½   å£°(ã“ãˆ) å£°éŸ³  æŸ¿(ã‹ã) æŸ¿å­<br>2025.03.21<br> æœ€é«˜(ã•ã„ã“ã†) æœ€é«˜ï¼Œæœ€å¥½  é¡”(ã‹ãŠ) é¢å­”ï¼Œè„¸  çŒ«(ã­ã“) çŒ«  ã¡ã¡ çˆ¶äº²  ãŸã“ã‚„ã ç« é±¼çƒ§  æœº(ã¤ããˆ) æ¡Œå­  ä½•(ãªã«) ä»€ä¹ˆ  å¹´(ã¨ã—) å¹´é¾„ã€€ å¤(ãªã¤) å¤å¤©  æ¢¨(ãªã—) æ¢¨<br>2025.03.23<br> æ‹›ãçŒ«(ã¾ã­ãã­ã“) æ‹›è´¢çŒ«  ã‚ã» ç™½ç—´  å…„(ã‚ã«) å“¥å“¥  è¥¿(ã«ã—) è¥¿  ä¸‹æ‰‹(ã¸ãŸ) ä¸æ“…é•¿  åœ°ä¸‹é‰„(ã¡ã‹ã¦ã¤) åœ°é“  ã†ã¾ã„ å¥½åƒ  è€³(ã¿ã¿) è€³æœµ  å‘³å¢æ±(ã¿ãã—ã‚‹)  å‘³å¢æ±¤  é›¨(ã‚ã‚) é›¨<br>2025.03.25<br> å±±(ã‚„ã¾) å±±  å½¼(ã‹ã‚Œ) ä»–  ç„¡ç†(ã‚€ã‚Š) æ— ç†  å¨˜(ã‚€ã™ã‚) å¥³å„¿  ã‚‚ã—ã‚‚ã— å–‚ï¼ˆç”µè¯ç”¨è¯­ï¼‰ é³¥(ã¨ã‚Š) é¸Ÿ  é›²ã‚Š(ãã‚‚ã‚Š) é˜´å¤©  å¥ˆè‰¯(ãªã‚‰) å¥ˆè‰¯å¿  æ¡œ(ã•ãã‚‰) æ¨±èŠ±  èŠ±å«(ã¯ãªã‚ˆã‚) æ–°å¨˜<br>2025.03.27<br> ãœã‚  0  ã„ã¡  1  ã«  2  ã•ã‚“  3  ã‚ˆã‚“  4ã€€ ã‚ã  6  ãªãª  7  ã‚ã‹  çº¢è‰²  ã‚ãŠ  è“è‰²  ãã‚  é»‘è‰²  ã—ã‚  ç™½è‰²</p><p>æ—¥å¸¸ç”¨è¯­æ•´ç†ï¼š</p><ol><li>æŒ‡ç¤ºä»£è¯<br>ç¬¬ä¸€äººç§°ï¼šã‚ãŸã—ã€€ã‚ãŸãã—ã€€ã‚ãŸã—(å¥³å£«ä¸“ç”¨)ã€€ã¼ã&#x2F;ãŠã‚Œ(ç”·å£«ä¸“ç”¨)<br>ç¬¬äºŒäººç§°ï¼šã‚ãªãŸã€€ãã¿ã€€ãŠã¾ãˆ<br>ç¬¬ä¸‰äººç§°ï¼šã‹ã‚Œ ä»–ã€€ã‹ã®ã˜ã‚‡ å¥¹ï¼›å¥³æœ‹å‹ã€€ã‹ã‚Œã— ä»–ï¼›ç”·æœ‹å‹<br>ä¸å®šäººç§°ï¼šã ã‚Œã€€ã©ãªãŸ</li><li>è‡ªæˆ‘ä»‹ç»<br>ã¯ã˜ã‚ã¾ã—ã¦ åˆæ¬¡è§é¢ ã‚ãŸã— æˆ‘  ãªã¾ãˆ åå­— ã“ã¨ã— ä»Šå¹´ ã ã„ãŒã å¤§å­¦ ã„ã¡ã­ã‚“ã›ã„ å¤§ä¸€å­¦ç”Ÿ<br>ãŒã£ã“ã† å­¦æ ¡ ã›ã‚“ã‚‚ã‚“ ä¸“ä¸š ã—ã‚…ã£ã—ã‚“ å‡ºèº«ï¼Œå®¶ä¹¡ ã‹ãã å®¶æ— ã“ã‚ŒãŒã‚‰ ä»Šå<br>ã¯ã¯ æ¯äº² ã¡ã¡ çˆ¶äº² ã„ã£ã—ã‚‡ã« ä¸€èµ· ã©ã†ã è¯· ã‚ˆã‚ã—ã å¤šå¤šå…³ç…§</li><li>é—®å€™è¯­<br>ãŠã¯ã‚ˆã† æ—©ä¸Šå¥½ ã“ã‚“ã«ã¡ã¯ ä½ å¥½ï¼Œä¸‹åˆå¥½ ã“ã‚“ã±ã‚“ã¯ æ™šä¸Šå¥½ ãŠã‚„ã™ã¿ãªã•ã„ æ™šå®‰ ã„ã£ã¦ãã¾ã™ æˆ‘å‡ºé—¨äº† ã„ã£ã¦ã‚‰ã£ã—ã‚„ã„ è·¯ä¸Šå°å¿ƒ<br>ãªã ã„ã¾ æˆ‘å›æ¥äº† ãŠã‹ãˆã‚Šãªã•ã„ æ¬¢è¿å›æ¥ ã‚ã‚ŠãŒã¨ã† è°¢è°¢ ã”ã‚ã‚“ãªã•ã„ å¯¹ä¸èµ· ã™ã¿ã¾ã›ã‚“ å¯¹ä¸èµ· ã„ãŸã ãã¾ã™ æˆ‘å¼€åŠ¨äº†<br>ã”ã¡ãã†ã•ã¾ã§ã—ãŸ å¤šè°¢æ¬¾å¾… ã¯ã˜ã‚ã¾ã—ã¦ åˆæ¬¡è§é¢ ã•ã‚ˆã†ãªã‚‰ å†è§ ã±ã„ã±ã„ æ‹œæ‹œ ã˜ã‚ƒã­ æ‹œæ‹œ</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Language</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
